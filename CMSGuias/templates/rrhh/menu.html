{% extends "basemd.html" %}

{% block title %}
  Empleados
{% endblock %}

{% block menu %}
  {% include "menus/rrhhmd.html" %}
{% endblock %}

{% block content %}

<script src="/media/js/rrhh/empleados.js"></script>
<link rel="stylesheet" href="/media/css/rrhh/empleado.css">

<script src="{{ MEDIA_URL }}vendor/chosen/chosen.jquery.js"></script>
<link rel="stylesheet" href="{{ MEDIA_URL }}vendor/chosen/chosen.css">

<div>
<div class="btnaddempleado">
<button type="button" name="btnopennewemple" data-emple="btnnewemple" class="btn waves-effect green lighten-1 btnopennewemple">
        <i class="fa fa-address-card-o"></i>
        <span>AGREGAR EMPLEADO</span>
</button>
</div>
  <div class="divbtnactivos">
      <div class="row">

         <input class="txtbuscar" style="width: 30%;" align="center" type="search" placeholder="Buscar Empleado" data-table="tabl" name="txtbuscar" id="txtbuscar" >
         <i class="fa fa-search"></i>

      </div>
   </div>


{% include "rrhh/formaddempl.html" %}

    <table class="tabl" id="templeados" name="table-princ">

        <thead>
          <tr>
            <th class="colnum">NÂ°</th>
            <th class="colname">Nombres</th>
            <th class="coldni">DNI</th>
            <th class="coltable">Cargo</th>
            <th class="coltitemail">Email</th>
            <th class="colingreso">F.Ingreso</th>
            <th style="display:none;"></th>
            <th class="colmant">Editar</th>
            <th class="colmant">Info</th>
            <th></th>

          </tr>
        </thead>
        <tbody id="fbody" class="bodydetails">
          {% for x in list %}
          <tr class="fer">
            <td class="colnum">{{ forloop.counter }}</td>
            <td class="colname">{{x.lastname}} {{x.firstname}}</td>
            <td class="coldni">{{x.empdni_id}}</td>
            <td class="coltable">{{x.charge}}</td>
            <td class="colemail">{{x.email}}</td>
            <td class="colingreso">{{x.feching}}</td>
            <td class="colplanilla" style="display:none;">{{x.estadoplanilla}}</td>
            <td>
              <ul id="drop">
                <li>
                <a><i class="fa fa-list"></i></a>
                  <ul>
                    <li class="lit"><a class="title">
                    <i class="fa fa-angle-double-left"></i> Ficha de Datos</a>
                      <ul>
                        <li>
                          <button  style="border:none;" type="button" data-emple='btneditemple' value='{{x.empdni_id}}' class="transparent btnshowedit"><a class="subtitle">Empleado</a></button>
                        </li>
                        <li>
                          <button style="border:none;" id="btnidtelef" type="button" value='{{x.empdni_id}}' data-nametel="{{ x.lastname }}" data-telefdni="{{ x.empdni_id }}" data-telefono="btnedittelefono" name="btntelefono" class="transparent btnshowedittelef"><a class="subtitle">Telefono</a></button>
                        </li>
                        <li>
                          <button style="border:none;" id="btnidfamilia" type="button" name="btnfamilia" data-namefam="{{ x.lastname }}" data-familia="btnfamilia" data-familiadni="{{ x.empdni_id }}" value='{{x.empdni_id}}' class="transparent btnshoweditfamilia"><a class="subtitle">Familiares</a></button>
                        </li>
                        <li>
                          <button style="border:none;" id="btnidestudios" type="button" name="btnestudio" value='{{x.empdni_id}}' data-nameest="{{ x.lastname }}" data-estdni="{{ x.empdni_id }}" data-estudio="btneditestudio" class="transparent btnshoweditest"><a class="subtitle">Estudios</a></button>
                        </li>
                        <li>
                          <button style="border:none;" id="btnidexplab" type="button" name="btnexplab" data-explab="btnexplab" data-nameexplab="{{ x.lastname }}" data-explabdni="{{ x.empdni_id }}" value='{{x.empdni_id}}' class="transparent btnshoweditexplab"><a class="subtitle">Exp. Laboral</a></button>
                        </li>
                        <li>
                          <button style="border:none;" id="btnidmedic" type="button" name="btnmedic" data-medic="btnmedic" data-medicname="{{ x.lastname }}" data-medicdni="{{ x.empdni_id }}" value='{{x.empdni_id}}' class="transparent btnshoweditmedic"><a class="subtitle">Datos Medicos</a></button>
                        </li>
                        <li>
                          <button style="border:none;" id="btnidemerg" type="button" name="btnemerg" data-emerg="btnemerg" data-emergname="{{ x.lastname }}" data-emergdni="{{ x.empdni_id }}" value='{{x.empdni_id}}' class="transparent btnshoweditemerg"><a class="subtitle">Contac.Emerg</a></button>
                        </li>
                        <li>
                          <button style="border:none;" id="btnidfamicr" type="button" name="btnfamicr" data-famicr="btnfamicr" data-famicrname="{{ x.lastname }}" data-famicrdni="{{ x.empdni_id }}" value='{{x.empdni_id}}' class="transparent btnshoweditfamicr"><a class="subtitle">Familia en ICR</a></button>
                        </li>
                      </ul>
                    </li>
                    <li class="lit"><a href="#" class="title">
                    <i class="fa fa-angle-double-left"></i> Obra</a>
                      <ul>
                        <li>
                          <button style="border:none;" id="btnidobra" type="button" name="btnproyecto" value='{{x.empdni_id}}' data-nameobra='{{ x.lastname }}' data-e='{{ x.empdni.emplecampo_id }}' data-proyecto="btneditproyecto" data-obradni="{{ x.empdni_id }}" data-induccion="btneditinduccion" class="transparent btnshoweditobra"><a class="subtitle">Epps</a></button>
                        </li>
                        <li>
                          <button style="border:none;" id="btnidexadoc" type="button" name="btnexamen" data-nameexadoc="{{ x.lastname }}" data-exadocdni="{{ x.empdni_id }}" data-examen="btneditexamen" value='{{x.empdni_id}}' class="transparent btnshoweditexadoc"><a class="subtitle">Exam/Doc.</a></button>
                        </li>
                      </ul>
                    </li>
                    <li class="lit"><a href="#" class="title">
                    <i class="fa fa-angle-double-left"></i> Recursos</a>
                      <ul>
                        <li>
                          <button style="border:none;" id="btnidcuenta" type="button" name="btncuenta" data-cuentadni='{{x.empdni_id}}' data-namecuenta='{{ x.lastname }}' data-est='{{ x.estado }}' value='{{x.empdni_id}}' data-cuenta="btneditcuenta" class="transparent btnshoweditcuenta"><a class="subtitle">Cuenta</a></button>
                        </li>
                        <li>
                          <button style="border:none;" id="btnidsegsoc" type="button" name="btnsegsocial" data-examen="btnsegsocial" data-estseg="{{ x.estadoplanilla }}" data-namesegsoc="{{ x.lastname }}" data-segsocialdni="{{ x.empdni_id }}" value='{{x.empdni_id}}' class="transparent btnshoweditsegsocial"><a class="subtitle">Seg.Social</a></button>
                        </li>
                        <li>
                          <button style="border:none;" id="btnidsusp" type="button" name="btnsuspension" value='{{x.empdni_id}}' data-suspname="{{ x.lastname }}" data-suspdni="{{ x.empdni_id }}" data-suspension="btneditsusp" class="transparent btnshoweditsusp"><a class="subtitle">Suspension</a></button>
                        </li>

                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </td>

            <td class="colmant">
                <a type="button" href="{% url 'emple_details' x.empdni_id %}" value='{{x.empdni_id}}' class="btn"><i class="fa fa-info-circle" aria-hidden="true"></i></a>
            </td>
            <td>
                <button type="button" style="border:none;color:red;font-weight:bold;" class="transparent btndardebaja" name="nbtndardebaja" data-motrname="{{ x.lastname }}" data-motrdni="{{ x.empdni_id }}"><small>Dar de Baja</small></button>
            </td>
          </tr>
          {% endfor %}
          </tbody>
    </table>

  </div>
  <!--bootstrap row table-->
  <div id="contextMenu" class="dropdown clearfix">
    <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu" style="display:block;position:static;margin-bottom:5px;">
      <li>
      <i class="fa fa-graduation-cap"></i>
      <button type="button" name="btnestudio" class="transparent btnnewestudio" data-estudio="btnnewestudio" style="border:none;">Estudios</button>
      </li>
      <li>
      <li>
       <i class="fa fa-phone"></i>
       <button type="button" name="btntelefono" class="transparent btnnewtelefono" data-telefono="btnnewtelefono" style="border:none;">Telefono</button>
      </li>
      <li>
      <i class="fa fa-credit-card" aria-hidden="true"></i>
      <button type="button" name="btncuenta" class="transparent btnnewcuenta" data-cuenta="btnnewcuenta" style="border:none;">Cuenta Corriente</button>
      </li>

      <li>
      <i class="fa fa-times-circle" aria-hidden="true"></i>
      <button type="button" name="btnsuspension" class="transparent btnnewsuspension" data-suspension="btnnewsusp" style="border:none;">Supensiones</button>
      </li>
      <li>
        <i class="fa fa-file-text" aria-hidden="true"></i>
      <button type="button" name="btnexamen" class="transparent btnnewexamen" data-examen="btnnewexamen" style="border:none;">Examen</button>
      </li>

      <li>
        <i class="fa fa-file" aria-hidden="true"></i>
      <button type="button" name="btndocumento" class="transparent btnnewdocumento" data-documento="btnnewdocumento" style="border:none;">Documento</button>
      </li>

      <li>
      <i class="fa fa-file-text" aria-hidden="true"></i>
      <button type="button" name="btnproyecto" class="transparent btnnewproyecto" data-proyecto="btnnewproyecto" style="border:none;">Proyecto</button>
      </li>

      <li>
      <i class="fa fa-file-text" aria-hidden="true"></i>
      <button type="button" name="btnepps" class="transparent btnnewepps" data-epps="btnnewepps" style="border:none;">Epps</button>
      </li>
      <li>
      <i class="fa fa-file-text" aria-hidden="true"></i>
      <button type="button" name="btnsegsocial" class="transparent btnnewsegsocial" data-segsocial="btnnewsegsocial" style="border:none;">Seguridad Social</button>
      </li>
      <li>
      <i class="fa fa-file-text" aria-hidden="true"></i>
      <button type="button" name="btnfamilia" class="transparent btnnewfamilia" data-familia="btnnewfam" style="border:none;">Familia</button>
      </li>
      <li>
      <i class="fa fa-file-text" aria-hidden="true"></i>
      <button type="button" name="btnexplab" class="transparent btnnewexplab" data-explab="btnnewexplab" style="border:none;">Experiencia Laboral</button>
      </li>

    </ul>
  </div>

</div>
{% csrf_token %}
{% include "rrhh/forms/formeditcuenta.html" %}
{% include "rrhh/forms/formeditemerg.html" %}
{% include "rrhh/forms/formeditestudios.html" %}
{% include "rrhh/forms/formeditexadoc.html" %}
{% include "rrhh/forms/formeditexamen.html" %}
{% include "rrhh/forms/formeditexplab.html" %}
{% include "rrhh/forms/formeditfamicr.html" %}
{% include "rrhh/forms/formeditfamilia.html" %}
{% include "rrhh/forms/formeditmedic.html" %}
{% include "rrhh/forms/formeditobra.html" %}
{% include "rrhh/forms/formeditproyecto.html" %}
{% include "rrhh/forms/formeditsegsocial.html" %}
{% include "rrhh/forms/formeditsuspension.html" %}
{% include "rrhh/forms/formedittelef.html" %}
{% include "rrhh/forms/formmodals.html" %}




{% endblock %}
