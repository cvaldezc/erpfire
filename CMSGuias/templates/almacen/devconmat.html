{% extends "basemd.html" %}

{% block title %}
  Devolucion de Material
{% endblock %}
{% block menu %}
  {% include "menus/storagemd.htm" %}
{% endblock %}
{% block content %}
<script src="/media/js/almacen/devmaterial.js"></script>
<script src="{{ MEDIA_URL }}js/mustache.js"></script>
<link rel="stylesheet" href="{{ MEDIA_URL }}vendor/chosen/chosen.css">
<script src="{{ MEDIA_URL }}vendor/chosen/chosen.jquery.js"></script>
<link rel="stylesheet" href="/media/css/almacen/devmaterial.css">

<div style="margin:20px;">
	<div class="row">
		<div class="input-field col">
			<h4 align="center">Devolucion de Material por Codigo</h4>
		</div>
		<div class="input-field col s4" style="border:1px solid;border-color:#F44336;border-radius:15px;margin-left:50px;background-color:#EF5350">
            <div class="panel-group">
                <div class="panel" style="margin-left:10px;margin-right:10px;">
                    <div class="panel-heading" style="">
                        <h6 style="font-weight:bold;color:white">NOTA:</h6>
                    </div>
                    <div class="panel-collapse collapse in">
                        <div class="panel-body">
                            <h6 style="font-weight:bold;color:white">Solo puede ingresar hasta 10 materiales por Guia de Devolucion</h6>
                        </div>
                    </div>
                </div>
            </div>
        </div>
	</div>
	<div class="input-field col s3" id="divbtnstorage" style="display:none;background-color:#ef5350;margin-top:-10px;width:20%;">
		<small style="color:white;font-weight:bold">Se Cargo Detalle que no fueron Guardados</small></br>
		<small style="color:white;font-weight:bold">Si no desea utilizarlo.</small><button style="border:none;" type="button" class="transparent btncleardatatemp"><h6 style="color:black;font-weight:bold">Clic aqui</h6>
		</button>
	</div>
	<div class="card">
		<div class="card-action" style="height:150px;background-color:#f5f5f5">
			<div style="width:100%;float:left">
				<div style="width:50%;float:left">
					<div class="input-field col">
						<i class="prefix fa fa-sign-in"></i>
						<input class="txtlistaproy" type="text" placeholder="" name="txtlistaproy" id="txtlistaproy" >
						<label for="txtlistaproy">CODIGO O DESCRIPCION DE MATERIAL</label>
					</div>
				</div>
				<div style="width:50%;float:left">
					<div class="input-field col" id="divdescmat" style="display:none;margin-left:5%;border:1px solid;border-color:#039be5;border-radius:15px;margin-top:-10px;">
						<div class="panel-group">
							<div class="panel" style="margin-left:20px;margin-right:20px;">
								<div class="panel-heading" style="">
									<h6 class="panel-title lblcodmat" style="font-weight:bold"></h6>
								</div>
								<div class="panel-collapse collapse in">
									<div class="panel-body">
										<h6 class="lblnamematerial"></h6>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!--
			<div class="row">
				<div class="input-field col">
					<i class="prefix fa fa-sign-in"></i>
					<input class="txtlistaproy" type="text" placeholder="" name="txtlistaproy" id="txtlistaproy" >
					<label for="txtlistaproy">CODIGO O DESCRIPCION DE MATERIAL</label>
				</div>
				<div class="input-field col" id="divdescmat" style="display:none;margin-left:40%;width:40%;border:1px solid;border-color:#039be5;border-radius:15px;margin-top:-10px;">
					<div class="panel-group">
						<div class="panel" style="margin-left:20px;margin-right:20px;">
							<div class="panel-heading" style="">
								<h6 class="panel-title lblcodmat" style="font-weight:bold"></h6>
							</div>
							<div class="panel-collapse collapse in">
								<div class="panel-body">
									<h6 class="lblnamematerial"></h6>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			-->
			<h6 class="lblcodproystorage" style="font-weight:bold"></h6>
		</div>
	</div>

			<!--DETALLE-->
	<div class="card" id="divcabguiadev" style="height:300px;display:none;background-color:#e0e0e0">
		<div class="card-action">
			<div style="width:100%:float:left">
				<div style="width:80%;float:left">
					<h5><strong>Cabecera de Guia de Devolucion</strong></h5>
				</div>

				<div style="width:20%;float:left">
					<button style="border:none;" type="button" class="btn waves-effect red lighten-1 btnopencab" value=""><i class="fa fa-floppy-o"></i><span><strong>Guardar Guia</strong>
					</span>
					</button>
				</div>
			</div>
			<div style="width:100%;float:left">
				<hr>
				<div style="width:70%;float:left">
					<div class="row" id="divtitproy" style="display:none">
						<div class="input-field col" style="margin-top:30px;">
							<button style="border:none;" type="button" class="transparent btnlistagainproy"><a style="font-size:15px;"><i class="fa fa-list"></i></a>
				            </button>
						</div>
						<div class="input-field col">
							<h5 class="panel-title">Proyecto: </h5>
						</div>
						<div class="input-field col">
							<h5 class="lblcodproject"></h5>
						</div>
						<div class="input-field col">
							<h5 class="lblnameproject"></h5>
						</div>
					</div>
					<div class="input-field col s6" id="divcbolistguia" style="display:none;margin-top:50px;">
						<select id="cbolistguias" class="browser-default cbolistguias">
						</select>
						<label for="cbolistguias" style="margin-top:-45px;color:#0091ea;font-size:0.8rem">SELECCIONAR SECTOR || GRUPO || AREA || GUIA</label>
					</div>
				</div>
				<div style="display:none;margin-left:5%;width:25%;float:left;" id="divdetsectors">
					<div class="row">
						<div class="input-field col">
							<h6 class="lblnamesector"></h6>
							<h6 for="lblnamesector" style="margin-top:-35px;font-weight:bold;color:#0091ea">SECTOR</h6>
						</div>
					</div>
					<div class="row">
						<div class="input-field col">
							<h6 class="lblnamegrupo"></h6>
							<h6 for="lblnamegrupo" style="margin-top:-35px;font-weight:bold;color:#0091ea">GRUPO</h6>
						</div>
					</div>
					<div class="row">
						<div class="input-field col">
							<h6 class="lblnamearea"></h6>
							<h6 for="lblnamearea" style="margin-top:-35px;font-weight:bold;color:#0091ea">AREA</h6>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!--TABLAS-->
	<div id="divtableproy" style="display:none;">
		<table class="table table-condensed highlight responsive-table tablelistproy" id="tablelistproy">
			<div class="row">
				<div class="input-field col">
					<h5 align="center">PROYECTOS</h5>
				</div>
				<div class="input-field col s6" style="margin-left:10%">
					<i class="prefix fa fa-search" style="font-size:30px;"></i>
				    <input class="txtbuscproyecto" id="txtbuscproyecto" style="height:30px;" type="text" placeholder="Codigo o descripcion de Proyecto">
				</div>
			</div>
			<thead class="cab">
				<tr>
					<th class="colst50" style="text-align:center">#</th>
					<th class="colst150">Codigo</th>
					<th >Proyecto</th>
					<th class="colst200">Acciones</th>
				</tr>
			</thead>
			<tbody class=""></tbody>
		</table>
	</div>

	<!--
	<div id="divtablesector" style="display:none">
		<h5 align="center">SECTORES</h5>
		<div style="overflow-y: scroll;height:250px;">
			<table class="table table-condensed highlight responsive-table tablelistsector" id="tablelistsector">
				<thead class="cab">
					<tr>
						<th class="colst50" style="text-align:center">#</th>
						<th class="colst150">Codigo</th>
						<th class="">Sector</th>
						<th class="colst200">Acciones</th>
					</tr>
				</thead>
				<tbody></tbody>
			</table>
		</div>
	</div>
	-->
	<!--
	<div id="divtablegroup" style="display:none;">
		<h5 align="center">GRUPOS</h5>
		<div style="overflow-y: scroll;height:250px;">
			<table class="table table-condensed highlight responsive-table tablelistgroup" id="tablelistgroup">
				<thead class="cab">
					<tr>
						<th class="colst50" style="text-align:center">#</th>
						<th class="colst150">Codigo</th>
						<th >Grupo</th>
						<th class="colst200">Acciones</th>
					</tr>
				</thead>
				<tbody></tbody>
			</table>
		</div>
	</div>
	-->
		<!--LISTA DE DETALLE DE MATERIALES-->

	<div id="divtabldetguiarem" style="display:none">
		<hr>
		<table class="table table-condensed responsive-table highlight tab-ldetguiarem">
			<h5 align="center" class="lbltitdetmat"></h5>
			<thead class="cab">
				<tr>
					<th class="colst40" style="text-align:center">#</th>
					<th class="colst150">Codigo</th>
					<th >Material</th>
					<th class="colst100">Cant.</th>
					<th class="colst100">C.Dev</th>
					<th class="colst100">Dev.</th>
					<th class="colst150">Motivo</th>
					<th class="colst40"></th>
				</tr>
			</thead>
			<tbody></tbody>
		</table>
		<div align="right" id="divbtnadd">
			<button style="border:none;" type="button" class="btn waves-effect teal lighten-1 btnaddmat" value=""><i class="fa fa-plus-square"></i><span>
	        	<strong>Añadir</strong>
	        </span>
	        </button>
		</div>
	</div>

	<!--DETALLE GUIA-->
	<div id="divtableddetfinal" style="display:none;background-color:#e0e0e0">
	<hr>
		<h5><strong>Detalle de Guia de Devolucion</strong></h5>
		<div style="overflow-y: scroll;height:300px;">
			<table class="table table-condensed responsive-table tableddetfinal" id="tableddetfinal">
				<thead class="cab">
					<tr>
						<th class="colst40" style="text-align:center">#</th>
						<th class="colst150">N° Guia</th>
						<th class="colst150">Codigo</th>
						<th >Material</th>
						<th class="colst100">Marca</th>
						<th class="colst100">Modelo</th>
						<th class="colst100">Cantidad</th>
						<th class="colst100">Acciones</th>
					</tr>
				</thead>
				<tbody></tbody>
			</table>
		</div>
	</div>

	<div id="divtabledetniple" style="display:none;background-color:#e0e0e0">
	<hr>
		<h5><strong>Detalle de Niples</strong></h5>
		<div style="overflow-y: scroll;height:300px;">
			<table class="table table-condensed responsive-table highlight tab-detniple">
				<thead class="cab">
					<tr>
						<th class="colst40" style="text-align:center">#</th>
						<th class="colst150">Guia</th>
						<th class="colst150">Codigo</th>
						<th >Material</th>
						<th class="colst40">Cantidad</th>
						<th class="colst100">Metrado</th>
						<th class="colst50">Tipo</th>
						<th class="colst100">Acciones</th>
					</tr>
				</thead>
				<tbody></tbody>
			</table>
		</div>
	</div>
	<div align="center" id="divbtnsavefin" style="display:none">

	</div>

	<!--LISTA DE MATERIALES -->
	<div class="modal mlistmat">
		<div class="modal-content">
			<div class="row">
				<div class="input-field col s6">
					<i class="prefix fa fa-search"></i>
					<input class="txtbuscmat" style="width:90%;" type="text" placeholder="Buscar Material" name="txtbuscmat" id="txtbuscmat" >
				</div>
			</div>
			<div style="overflow-y: scroll;height:550px;">
				<table class="table table-condensed highlight responsive-table tab-lmaterials" id="tab-lmaterials">
					<thead class="cab">
						<tr>
							<th class="colst40">#</th>
							<th class="colst150">Codigo</th>
							<th>Material</th>
							<th class="colst150">Marca</th>
							<th class="colst150">Modelo</th>
							<th class="colst100">Unidad</th>
							<th class="colst40"></th>
						</tr>
					</thead>
					<tbody></tbody>
				</table>
			</div>
			<div align="right">
				<button type="button" class="btn modal-action modal-close waves-effect waves-green blue lighten-1 btn-flat btnsalirmodal">
	            <i class="fa fa-times"></i><span>SALIR</span>
	            </button>
	        </div>
		</div>
	</div>
</div>

<div class="modal modeditmat">
	<div class="modal-content">
		<div class="card">
			<div class="card-action">
				<div class="panel-group">
					<div class="panel">
						<div class="panel-heading">
							<div class="panel-tittle">
								<h6 style="font-weight:bold">Guia</h6>
							</div>
						</div>
						<div class="panel-collapse collapse in">
							<div class="panel-body">
								<h6 class="lblcodednumguia"></h6>
							</div>
						</div>
					</div>
				</div>
				<hr>
				<div class="panel-group">
					<div class="panel">
						<div class="panel-heading">
							<div class="panel-tittle">
								<h6 class="lbledititem" style="display:none"></h6>
								<h6 style="font-weight:bold">Codigo</h6>
							</div>
						</div>
						<div class="panel-collapse collapse in">
							<div class="panel-body">
								<h6 class="lblcodigomaterial"></h6>
							</div>
						</div>
					</div>
				</div>
				<hr>
				<div class="panel-group">
					<div class="panel">
						<div class="panel-heading">
							<div class="panel-tittle">
								<h6 style="font-weight:bold">Material</h6>
							</div>
						</div>
						<div class="panel-collapse collapse in">
							<div class="panel-body">
								<h6 class="lbldescrmaterial"></h6>
							</div>
						</div>
					</div>
				</div>
				<hr>
			</div>
		</div>

		<div class="row">
			<div class="input-field col">
				<h6>Cantidad maxima permitida:</h6>
			</div>
			<div class="input-field col">
				<h6 class="lblcantmax"></h6>
			</div>
			<div class="input-field col s12">
				<input class="txtedcantidad" type="text" placeholder="">
				<label for="txtlistaproy">Cantidad</label>
			</div>
			<div class="input-field col s12">
				<input class="cboedmotivo" type="text" maxlength="55" placeholder="">
				<label for="cboedmotivo">Motivo</label>
			</div>
			<div class="input-field col s12" style="margin-top:10px;">
				<textarea placeholder="" class="materialize-textarea txtedcom" name="txtedcom"></textarea>
				<label for="txtedcom">Comentario</label>
			</div>
		</div>
		<div align="center">
			<button type="button" class="btn waves-effect teal lighten-1 btnedsavemat">
            <i class="fa fa-floppy-o"></i>
            <span><strong>GUARDAR</strong></span>
            </button>
            <button type="button" class="btn modal-action modal-close red lighten-1 btn-flat btncancelar">
            <i class="fa fa-times"></i>
            <span>CANCELAR</span>
            </button>
		</div>

	</div>
</div>

<div class="modal bottom-sheet modlnippleop" style="height:55%">
	<div class="modal-content">
		<div class="row">
			<h6 class="nippcodped" style="display:none"></h6>
			<h6 class="nippcodbr" style="display:none"></h6>
			<h6 class="nippcodmod" style="display:none"></h6>
			<h6 class="nippbrand" style="display:none"></h6>
			<h6 class="nippmodel" style="display:none"></h6>
			<div class="input-field col">
				<h6 class="nippcodmat" style="font-weight:bold"></h6>
			</div>
			<div class="input-field col">
				<h6 class="nippnamemat" style="font-weight:bold"></h6>
			</div>
			<div class="input-field col">
				<h6 class="nippmedmat" style="font-weight:bold"></h6>
			</div>
			<div class="input-field col">
				<button type="button" class="btn waves-effect teal lighten-1 btnsavenipple">
	            <i class="fa fa-floppy-o"></i>
	            <span><strong>GUARDAR</strong></span>
	            </button>
			</div>
			<div class="input-field col">
				<button type="button" class="btn modal-action modal-close red lighten-1 btn-flat btncancelar">
	            <i class="fa fa-times"></i>
	            <span>CANCELAR</span>
	            </button>
			</div>
		</div>
		<div class="row">
            <input checked onclick="javascript:selboxnipmat();" name="checkmatnip" type="radio" id="radmatnipall"/>
            <label for="radmatnipall" style="font-size:15px;font-weight:bold;color:black;">Todo</label>
            <input onclick="javascript:selboxnipmat();" name="checkmatnip" type="radio" id="radmatnipnone"/>
            <label for="radmatnipnone" style="font-size:15px;font-weight:bold;color:black;">Ninguno</label>
        </div>
		<hr>
		<table class="table table-condensed responsive-table highlight tab-lnippleop">
			<thead class="cab">
				<tr>
					<th class="colst40" style="text-align:center">#</th>
					<th class="colst100">Cantidad</th>
					<th class="colst100">Metrado</th>
					<th class="colst50">Tipo</th>
					<th class="colst100">Enviado</th>
					<th class="colst100">Enviar</th>
					<th class="colst50"></th>
					<th >Motivo</th>
					<th class="colst100">Comentario</th>
				</tr>
			</thead>
			<tbody></tbody>
		</table>
	</div>
</div>

<!--MODAL CABECERA-->
<div class="modal modcabecera">
	<div class="modal-content">
		<div class="row">
			<div class="input-field col s9">
				<input type="text" class="matnumeroguia" placeholder="" maxlength="12" length="12"/>
				<label for="matnumeroguia">NUMERO DE GUIA</label>
			</div>
		</div>
		<div class="row">
			<div class="input-field col s9">
                <select id="cbomattransp" class="browser-default cbomattransp">
                <option value=""></option>
                {% for x in ltransportmat %}
                    <option value="{{ x.traruc_id }}">{{ x.tranom }}</option>
                {% endfor %}
                </select>
                <label for="cbomattransp" style="margin-top:-30px;font-size:0.8rem;color:#0091ea">TRANSPORTISTA</label>
            </div>
		</div>
		<div class="row">
            <div class="input-field col s9">
                <select id="cbomatcond" class="browser-default cbomatcond"></select>
                <label for="cbomatcond" style="margin-top:-30px;font-size:0.8rem;color:#0091ea">CONDUCTOR</label>
            </div>
		</div>
		<div class="row">
            <div class="input-field col s9">
                <select id="cbomatplaca" class="browser-default cbomatplaca"></select>
                <label for="cbomatplaca" style="margin-top:-30px;font-size:0.8rem;color:#0091ea">PLACA</label>
            </div>
		</div>
		<div class="row">
			<div class="input-field col s9">
				<select id="cbolistempleado" class="browser-default cbolistempleado">
	                {% for x in lempleados %}
	                <option value="{{ x.empdni_id }}">{{ x.lastname }}, {{ x.firstname }}</option>
	                {% endfor %}
	        	</select>
	        	<label for="cbolistempleado" style="margin-top:-30px;font-size:0.8rem;color:#0091ea">AUTORIZADO POR</label>
			</div>
		</div>
		<div class="row">
			<div class="input-field col s12">
				<input placeholder="" type="date" class="datepicker fechdevmat">
	            <label for="fechdevmat">FECHA DE DEVOLUCION</label>
			</div>
		</div>
		<div class="row">
			<div class="input-field col s12">
				<textarea placeholder="" length="200" maxlength="200" class="materialize-textarea comentconmat" name="comentconmat"></textarea>
				<label for="comentconmat">COMENTARIO</label>
			</div>
		</div>
		<div class="input-fiel col" align="center" style="margin-top:50px;">
			<button style="border:none;" type="button" class="btn waves-effect teal lighten-1 btnsaveguiafin" value=""><i class="fa fa-floppy-o"></i><span><strong>Guardar</strong>
			</span>
			</button>
			<button type="button" class="btn modal-action modal-close red lighten-1 btn-flat btncancelar">
			<i class="fa fa-times"></i>
			<span>CANCELAR</span>
			</button>
		</div>
	</div>
</div>


<!-- hreport and ruc -->
<input type="hidden" id="hreport" value="{{hreport}}">
<input type="hidden" id="ruc" value="{{ruc}}">

{% csrf_token %}

{% endblock %}