!function(e,t){"use strict";function n(e,t){for(var n,r=[],o=0;o<e.length;++o){if(n=a[e[o]]||i(e[o]),!n)throw"module definition dependecy not found: "+e[o];r.push(n)}t.apply(null,r)}function r(e,r,i){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(i===t)throw"invalid module definition, definition function must be specified";n(r,function(){a[e]=i.apply(null,arguments)})}function i(t){for(var n=e,r=t.split(/[.\/]/),i=0;i<r.length;++i){if(!n[r[i]])return;n=n[r[i]]}return n}function o(n){for(var r=0;r<n.length;r++){for(var i=e,o=n[r],s=o.split(/[.\/]/),l=0;l<s.length-1;++l)i[s[l]]===t&&(i[s[l]]={}),i=i[s[l]];i[s[s.length-1]]=a[o]}}var a={},s="tinymce/dom/EventUtils",l="tinymce/dom/Sizzle",c="tinymce/util/Tools",d="tinymce/Env",u="tinymce/dom/DomQuery",f="tinymce/html/Styles",m="tinymce/dom/TreeWalker",p="tinymce/dom/Range",h="tinymce/html/Entities",g="tinymce/dom/StyleSheetLoader",v="tinymce/dom/DOMUtils",y="tinymce/dom/ScriptLoader",b="tinymce/AddOnManager",x="tinymce/dom/RangeUtils",C="tinymce/NodeChange",w="tinymce/html/Node",_="tinymce/html/Schema",k="tinymce/html/SaxParser",N="tinymce/html/DomParser",S="tinymce/html/Writer",E="tinymce/html/Serializer",T="tinymce/dom/Serializer",R="tinymce/dom/TridentSelection",A="tinymce/util/VK",B="tinymce/dom/ControlSelection",P="tinymce/dom/BookmarkManager",D="tinymce/dom/Selection",M="tinymce/dom/ElementUtils",L="tinymce/fmt/Preview",I="tinymce/Formatter",O="tinymce/UndoManager",H="tinymce/EnterKey",F="tinymce/ForceBlocks",z="tinymce/EditorCommands",W="tinymce/util/URI",U="tinymce/util/Class",V="tinymce/util/EventDispatcher",$="tinymce/ui/Selector",q="tinymce/ui/Collection",j="tinymce/ui/DomUtils",K="tinymce/ui/Control",Y="tinymce/ui/Factory",G="tinymce/ui/KeyboardNavigation",J="tinymce/ui/Container",X="tinymce/ui/DragHelper",Q="tinymce/ui/Scrollable",Z="tinymce/ui/Panel",ee="tinymce/ui/Movable",te="tinymce/ui/Resizable",ne="tinymce/ui/FloatPanel",re="tinymce/ui/Window",ie="tinymce/ui/MessageBox",oe="tinymce/WindowManager",ae="tinymce/util/Quirks",se="tinymce/util/Observable",le="tinymce/EditorObservable",ce="tinymce/Shortcuts",de="tinymce/Editor",ue="tinymce/util/I18n",fe="tinymce/FocusManager",me="tinymce/EditorManager",pe="tinymce/LegacyInput",he="tinymce/util/XHR",ge="tinymce/util/JSON",ve="tinymce/util/JSONRequest",ye="tinymce/util/JSONP",be="tinymce/util/LocalStorage",xe="tinymce/Compat",Ce="tinymce/ui/Layout",we="tinymce/ui/AbsoluteLayout",_e="tinymce/ui/Tooltip",ke="tinymce/ui/Widget",Ne="tinymce/ui/Button",Se="tinymce/ui/ButtonGroup",Ee="tinymce/ui/Checkbox",Te="tinymce/ui/ComboBox",Re="tinymce/ui/ColorBox",Ae="tinymce/ui/PanelButton",Be="tinymce/ui/ColorButton",Pe="tinymce/util/Color",De="tinymce/ui/ColorPicker",Me="tinymce/ui/Path",Le="tinymce/ui/ElementPath",Ie="tinymce/ui/FormItem",Oe="tinymce/ui/Form",He="tinymce/ui/FieldSet",Fe="tinymce/ui/FilePicker",ze="tinymce/ui/FitLayout",We="tinymce/ui/FlexLayout",Ue="tinymce/ui/FlowLayout",Ve="tinymce/ui/FormatControls",$e="tinymce/ui/GridLayout",qe="tinymce/ui/Iframe",je="tinymce/ui/Label",Ke="tinymce/ui/Toolbar",Ye="tinymce/ui/MenuBar",Ge="tinymce/ui/MenuButton",Je="tinymce/ui/ListBox",Xe="tinymce/ui/MenuItem",Qe="tinymce/ui/Menu",Ze="tinymce/ui/Radio",et="tinymce/ui/ResizeHandle",tt="tinymce/ui/Spacer",nt="tinymce/ui/SplitButton",rt="tinymce/ui/StackLayout",it="tinymce/ui/TabPanel",ot="tinymce/ui/TextBox",at="tinymce/ui/Throbber";r(s,[],function(){function e(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function t(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function n(e,t){function n(){return!1}function r(){return!0}var i,o,l=t||{};for(i in e)s[i]||(l[i]=e[i]);if(l.target||(l.target=l.srcElement||document),e&&a.test(e.type)&&e.pageX===o&&e.clientX!==o){var c=l.target.ownerDocument||document,d=c.documentElement,u=c.body;l.pageX=e.clientX+(d&&d.scrollLeft||u&&u.scrollLeft||0)-(d&&d.clientLeft||u&&u.clientLeft||0),l.pageY=e.clientY+(d&&d.scrollTop||u&&u.scrollTop||0)-(d&&d.clientTop||u&&u.clientTop||0)}return l.preventDefault=function(){l.isDefaultPrevented=r,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},l.stopPropagation=function(){l.isPropagationStopped=r,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},l.stopImmediatePropagation=function(){l.isImmediatePropagationStopped=r,l.stopPropagation()},l.isDefaultPrevented||(l.isDefaultPrevented=n,l.isPropagationStopped=n,l.isImmediatePropagationStopped=n),l}function r(n,r,i){function o(){i.domLoaded||(i.domLoaded=!0,r(c))}function a(){("complete"===l.readyState||"interactive"===l.readyState&&l.body)&&(t(l,"readystatechange",a),o())}function s(){try{l.documentElement.doScroll("left")}catch(e){return void setTimeout(s,0)}o()}var l=n.document,c={type:"ready"};return i.domLoaded?void r(c):(l.addEventListener?"complete"===l.readyState?o():e(n,"DOMContentLoaded",o):(e(l,"readystatechange",a),l.documentElement.doScroll&&n.self===n.top&&s()),void e(n,"load",o))}function i(){function i(e,t){var n,r,i,o,a=f[t];if(n=a&&a[e.type])for(r=0,i=n.length;i>r;r++)if(o=n[r],o&&o.func.call(o.scope,e)===!1&&e.preventDefault(),e.isImmediatePropagationStopped())return}var a,s,l,c,d,u=this,f={};s=o+(+new Date).toString(32),c="onmouseenter"in document.documentElement,l="onfocusin"in document.documentElement,d={mouseenter:"mouseover",mouseleave:"mouseout"},a=1,u.domLoaded=!1,u.events=f,u.bind=function(t,o,m,p){function h(e){i(n(e||_.event),g)}var g,v,y,b,x,C,w,_=window;if(t&&3!==t.nodeType&&8!==t.nodeType){for(t[s]?g=t[s]:(g=a++,t[s]=g,f[g]={}),p=p||t,o=o.split(" "),y=o.length;y--;)b=o[y],C=h,x=w=!1,"DOMContentLoaded"===b&&(b="ready"),u.domLoaded&&"ready"===b&&"complete"==t.readyState?m.call(p,n({type:b})):(c||(x=d[b],x&&(C=function(e){var t,r;if(t=e.currentTarget,r=e.relatedTarget,r&&t.contains)r=t.contains(r);else for(;r&&r!==t;)r=r.parentNode;r||(e=n(e||_.event),e.type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,i(e,g))})),l||"focusin"!==b&&"focusout"!==b||(w=!0,x="focusin"===b?"focus":"blur",C=function(e){e=n(e||_.event),e.type="focus"===e.type?"focusin":"focusout",i(e,g)}),v=f[g][b],v?"ready"===b&&u.domLoaded?m({type:b}):v.push({func:m,scope:p}):(f[g][b]=v=[{func:m,scope:p}],v.fakeName=x,v.capture=w,v.nativeHandler=C,"ready"===b?r(t,C,u):e(t,x||b,C,w)));return t=v=0,m}},u.unbind=function(e,n,r){var i,o,a,l,c,d;if(!e||3===e.nodeType||8===e.nodeType)return u;if(i=e[s]){if(d=f[i],n){for(n=n.split(" "),a=n.length;a--;)if(c=n[a],o=d[c]){if(r)for(l=o.length;l--;)if(o[l].func===r){var m=o.nativeHandler,p=o.fakeName,h=o.capture;o=o.slice(0,l).concat(o.slice(l+1)),o.nativeHandler=m,o.fakeName=p,o.capture=h,d[c]=o}r&&0!==o.length||(delete d[c],t(e,o.fakeName||c,o.nativeHandler,o.capture))}}else{for(c in d)o=d[c],t(e,o.fakeName||c,o.nativeHandler,o.capture);d={}}for(c in d)return u;delete f[i];try{delete e[s]}catch(t){e[s]=null}}return u},u.fire=function(e,t,r){var o;if(!e||3===e.nodeType||8===e.nodeType)return u;r=n(null,r),r.type=t,r.target=e;do o=e[s],o&&i(r,o),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow;while(e&&!r.isPropagationStopped());return u},u.clean=function(e){var t,n,r=u.unbind;if(!e||3===e.nodeType||8===e.nodeType)return u;if(e[s]&&r(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(r(e),n=e.getElementsByTagName("*"),t=n.length;t--;)e=n[t],e[s]&&r(e);return u},u.destroy=function(){f={}},u.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}}var o="mce-data-",a=/^(?:mouse|contextmenu)|click/,s={keyLocation:1,layerX:1,layerY:1,returnValue:1};return i.Event=new i,i.Event.bind(window,"ready",function(){}),i}),r(l,[],function(){function e(e){return he.test(e+"")}function n(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>_.cacheLength&&delete e[t.shift()],e[n]=r,r}}function r(e){return e[H]=!0,e}function i(e){var t=B.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t=null}}function o(e,t,n,r){var i,o,a,s,l,c,f,m,p,h;if((t?t.ownerDocument||t:F)!==B&&A(t),t=t||B,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(D&&!r){if(i=ge.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&O(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((a=i[3])&&z.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(a)),n}if(z.qsa&&!M.test(e)){if(f=!0,m=H,p=t,h=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(c=d(e),(f=t.getAttribute("id"))?m=f.replace(be,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",l=c.length;l--;)c[l]=m+u(c[l]);p=pe.test(e)&&t.parentNode||t,h=c.join(",")}if(h)try{return Z.apply(n,p.querySelectorAll(h)),n}catch(e){}finally{f||t.removeAttribute("id")}}}return b(e.replace(le,"$1"),t,n,r)}function a(e,t){var n=t&&e,r=n&&(~t.sourceIndex||G)-(~e.sourceIndex||G);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function d(e,t){var n,r,i,a,s,l,c,d=$[e+" "];if(d)return t?0:d.slice(0);for(s=e,l=[],c=_.preFilter;s;){(!n||(r=ce.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),l.push(i=[])),n=!1,(r=de.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(le," ")}),s=s.slice(n.length));for(a in _.filter)!(r=me[a].exec(s))||c[a]&&!(r=c[a](r))||(n=r.shift(),i.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?o.error(e):$(e,l).slice(0)}function u(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function f(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=U++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,l,c,d=W+" "+o;if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i)if(c=t[H]||(t[H]={}),(l=c[r])&&l[0]===d){if((s=l[1])===!0||s===w)return s===!0}else if(l=c[r]=[d],l[1]=e(t,n,a)||w,l[1]===!0)return!0}}function m(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function p(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,c=null!=t;l>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),c&&t.push(s));return a}function h(e,t,n,i,o,a){return i&&!i[H]&&(i=h(i)),o&&!o[H]&&(o=h(o,a)),r(function(r,a,s,l){var c,d,u,f=[],m=[],h=a.length,g=r||y(t||"*",s.nodeType?[s]:s,[]),v=!e||!r&&t?g:p(g,f,e,s,l),b=n?o||(r?e:h||i)?[]:a:v;if(n&&n(v,b,s,l),i)for(c=p(b,m),i(c,[],s,l),d=c.length;d--;)(u=c[d])&&(b[m[d]]=!(v[m[d]]=u));if(r){if(o||e){if(o){for(c=[],d=b.length;d--;)(u=b[d])&&c.push(v[d]=u);o(null,b=[],c,l)}for(d=b.length;d--;)(u=b[d])&&(c=o?te.call(r,u):f[d])>-1&&(r[c]=!(a[c]=u))}}else b=p(b===a?b.splice(h,b.length):b),o?o(null,a,b,l):Z.apply(a,b)})}function g(e){for(var t,n,r,i=e.length,o=_.relative[e[0].type],a=o||_.relative[" "],s=o?1:0,l=f(function(e){return e===t},a,!0),c=f(function(e){return te.call(t,e)>-1},a,!0),d=[function(e,n,r){return!o&&(r||n!==E)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];i>s;s++)if(n=_.relative[e[s].type])d=[f(m(d),n)];else{if(n=_.filter[e[s].type].apply(null,e[s].matches),n[H]){for(r=++s;i>r&&!_.relative[e[r].type];r++);return h(s>1&&m(d),s>1&&u(e.slice(0,s-1)).replace(le,"$1"),n,r>s&&g(e.slice(s,r)),i>r&&g(e=e.slice(r)),i>r&&u(e))}d.push(n)}return m(d)}function v(e,t){var n=0,i=t.length>0,a=e.length>0,s=function(r,s,l,c,d){var u,f,m,h=[],g=0,v="0",y=r&&[],b=null!=d,x=E,C=r||a&&_.find.TAG("*",d&&s.parentNode||s),k=W+=null==x?1:Math.random()||.1;for(b&&(E=s!==B&&s,w=n);null!=(u=C[v]);v++){if(a&&u){for(f=0;m=e[f++];)if(m(u,s,l)){c.push(u);break}b&&(W=k,w=++n)}i&&((u=!m&&u)&&g--,r&&y.push(u))}if(g+=v,i&&v!==g){for(f=0;m=t[f++];)m(y,h,s,l);if(r){if(g>0)for(;v--;)y[v]||h[v]||(h[v]=X.call(c));h=p(h)}Z.apply(c,h),b&&!r&&h.length>0&&g+t.length>1&&o.uniqueSort(c)}return b&&(W=k,E=x),y};return i?r(s):s}function y(e,t,n){for(var r=0,i=t.length;i>r;r++)o(e,t[r],n);return n}function b(e,t,n,r){var i,o,a,s,l,c=d(e);if(!r&&1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&D&&_.relative[o[1].type]){if(t=(_.find.ID(a.matches[0].replace(Ce,we),t)||[])[0],!t)return n;e=e.slice(o.shift().value.length)}for(i=me.needsContext.test(e)?0:o.length;i--&&(a=o[i],!_.relative[s=a.type]);)if((l=_.find[s])&&(r=l(a.matches[0].replace(Ce,we),pe.test(o[0].type)&&t.parentNode||t))){if(o.splice(i,1),e=r.length&&u(o),!e)return Z.apply(n,r),n;break}}return S(e,c)(r,t,!D,n,pe.test(e)),n}function x(){}var C,w,_,k,N,S,E,T,R,A,B,P,D,M,L,I,O,H="sizzle"+-new Date,F=window.document,z={},W=0,U=0,V=n(),$=n(),q=n(),j=!1,K=function(){return 0},Y=typeof t,G=1<<31,J=[],X=J.pop,Q=J.push,Z=J.push,ee=J.slice,te=J.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie=re.replace("w","w#"),oe="([*^$|!~]?=)",ae="\\["+ne+"*("+re+")"+ne+"*(?:"+oe+ne+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ie+")|)|)"+ne+"*\\]",se=":("+re+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ae.replace(3,8)+")*)|.*)\\)|)",le=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ce=new RegExp("^"+ne+"*,"+ne+"*"),de=new RegExp("^"+ne+"*([\\x20\\t\\r\\n\\f>+~])"+ne+"*"),ue=new RegExp(se),fe=new RegExp("^"+ie+"$"),me={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),NAME:new RegExp("^\\[name=['\"]?("+re+")['\"]?\\]"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+ae),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},pe=/[\x20\t\r\n\f]*[+~]/,he=/^[^{]+\{\s*\[native code/,ge=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,ve=/^(?:input|select|textarea|button)$/i,ye=/^h\d$/i,be=/'|\\/g,xe=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,Ce=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,we=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Z.apply(J=ee.call(F.childNodes),F.childNodes),J[F.childNodes.length].nodeType}catch(e){Z={apply:J.length?function(e,t){Q.apply(e,ee.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}N=o.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},A=o.setDocument=function(n){var r=n?n.ownerDocument||n:F;return r!==B&&9===r.nodeType&&r.documentElement?(B=r,P=r.documentElement,D=!N(r),z.getElementsByTagName=i(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),z.attributes=i(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),z.getElementsByClassName=i(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!(!e.getElementsByClassName||!e.getElementsByClassName("e").length)&&(e.lastChild.className="e",2===e.getElementsByClassName("e").length)}),z.getByName=i(function(e){e.id=H+0,e.appendChild(B.createElement("a")).setAttribute("name",H),e.appendChild(B.createElement("i")).setAttribute("name",H),P.appendChild(e);var t=r.getElementsByName&&r.getElementsByName(H).length===2+r.getElementsByName(H+0).length;return P.removeChild(e),t}),z.sortDetached=i(function(e){return e.compareDocumentPosition&&1&e.compareDocumentPosition(B.createElement("div"))}),_.attrHandle=i(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==Y&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},z.getByName?(_.find.ID=function(e,t){if(typeof t.getElementById!==Y&&D){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},_.filter.ID=function(e){var t=e.replace(Ce,we);return function(e){return e.getAttribute("id")===t}}):(_.find.ID=function(e,n){if(typeof n.getElementById!==Y&&D){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==Y&&r.getAttributeNode("id").value===e?[r]:t:[]}},_.filter.ID=function(e){var t=e.replace(Ce,we);return function(e){var n=typeof e.getAttributeNode!==Y&&e.getAttributeNode("id");return n&&n.value===t}}),_.find.TAG=z.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==Y?t.getElementsByTagName(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},_.find.NAME=z.getByName&&function(e,t){return typeof t.getElementsByName!==Y?t.getElementsByName(name):void 0},_.find.CLASS=z.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==Y&&D?t.getElementsByClassName(e):void 0},L=[],M=[":focus"],(z.qsa=e(r.querySelectorAll))&&(i(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||M.push("\\["+ne+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||M.push(":checked")}),i(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&M.push("[*^$]="+ne+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(z.matchesSelector=e(I=P.matchesSelector||P.mozMatchesSelector||P.webkitMatchesSelector||P.oMatchesSelector||P.msMatchesSelector))&&i(function(e){z.disconnectedMatch=I.call(e,"div"),I.call(e,"[s!='']:x"),L.push("!=",se)}),M=new RegExp(M.join("|")),L=L.length&&new RegExp(L.join("|")),O=e(P.contains)||P.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},K=P.compareDocumentPosition?function(e,t){if(e===t)return j=!0,0;var n=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t);return n?1&n||T&&t.compareDocumentPosition(e)===n?e===r||O(F,e)?-1:t===r||O(F,t)?1:R?te.call(R,e)-te.call(R,t):0:4&n?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var n,i=0,o=e.parentNode,s=t.parentNode,l=[e],c=[t];if(e===t)return j=!0,0;if(!o||!s)return e===r?-1:t===r?1:o?-1:s?1:0;if(o===s)return a(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;l[i]===c[i];)i++;return i?a(l[i],c[i]):l[i]===F?-1:c[i]===F?1:0},B):B},o.matches=function(e,t){return o(e,null,null,t)},o.matchesSelector=function(e,t){if((e.ownerDocument||e)!==B&&A(e),t=t.replace(xe,"='$1']"),z.matchesSelector&&D&&(!L||!L.test(t))&&!M.test(t))try{var n=I.call(e,t);if(n||z.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return o(t,B,null,[e]).length>0},o.contains=function(e,t){return(e.ownerDocument||e)!==B&&A(e),O(e,t)},o.attr=function(e,t){var n;return(e.ownerDocument||e)!==B&&A(e),D&&(t=t.toLowerCase()),(n=_.attrHandle[t])?n(e):!D||z.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},o.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},o.uniqueSort=function(e){var t,n=[],r=0,i=0;if(j=!z.detectDuplicates,T=!z.sortDetached,R=!z.sortStable&&e.slice(0),e.sort(K),j){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return e},k=o.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=k(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=k(t);return n},_=o.selectors={cacheLength:50,createPseudo:r,match:me,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Ce,we),e[3]=(e[4]||e[5]||"").replace(Ce,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||o.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&o.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return me.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&ue.test(n)&&(t=d(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(Ce,we).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=V[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&V(e,function(e){return t.test(e.className||typeof e.getAttribute!==Y&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=o.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var c,d,u,f,m,p,h=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s;if(g){if(o){for(;h;){for(u=t;u=u[h];)if(s?u.nodeName.toLowerCase()===v:1===u.nodeType)return!1;p=h="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&y){for(d=g[H]||(g[H]={}),c=d[e]||[],m=c[0]===W&&c[1],f=c[0]===W&&c[2],u=m&&g.childNodes[m];u=++m&&u&&u[h]||(f=m=0)||p.pop();)if(1===u.nodeType&&++f&&u===t){d[e]=[W,m,f];break}}else if(y&&(c=(t[H]||(t[H]={}))[e])&&c[0]===W)f=c[1];else for(;(u=++m&&u&&u[h]||(f=m=0)||p.pop())&&((s?u.nodeName.toLowerCase()!==v:1!==u.nodeType)||!++f||(y&&((u[H]||(u[H]={}))[e]=[W,f]),u!==t)););return f-=i,f===r||f%r===0&&f/r>=0}}},PSEUDO:function(e,t){var n,i=_.pseudos[e]||_.setFilters[e.toLowerCase()]||o.error("unsupported pseudo: "+e);return i[H]?i(t):i.length>1?(n=[e,e,"",t],_.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,n){for(var r,o=i(e,t),a=o.length;a--;)r=te.call(e,o[a]),e[r]=!(n[r]=o[a])}):function(e){return i(e,0,n)}):i}},pseudos:{not:r(function(e){var t=[],n=[],i=S(e.replace(le,"$1"));return i[H]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),!n.pop()}}),has:r(function(e){return function(t){return o(e,t).length>0}}),contains:r(function(e){return function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:r(function(e){return fe.test(e||"")||o.error("unsupported lang: "+e),e=e.replace(Ce,we).toLowerCase(),function(t){var n;do if(n=D?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===P},focus:function(e){return e===B.activeElement&&(!B.hasFocus||B.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!_.pseudos.empty(e)},header:function(e){return ye.test(e.nodeName)},input:function(e){return ve.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:c(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}};for(C in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[C]=s(C);for(C in{submit:!0,reset:!0})_.pseudos[C]=l(C);return S=o.compile=function(e,t){var n,r=[],i=[],o=q[e+" "];if(!o){for(t||(t=d(e)),n=t.length;n--;)o=g(t[n]),o[H]?r.push(o):i.push(o);o=q(e,v(i,r))}return o},_.pseudos.nth=_.pseudos.eq,x.prototype=_.filters=_.pseudos,_.setFilters=new x,z.sortStable=H.split("").sort(K).join("")===H,A(),[0,0].sort(K),z.detectDuplicates=j,o}),r(c,[],function(){function e(e){return null===e||e===t?"":(""+e).replace(h,"")}function n(e,n){return n?!("array"!=n||!g(e))||typeof e==n:e!==t}function r(e){var t,n,r=e;if(!g(e))for(r=[],t=0,n=e.length;n>t;t++)r[t]=e[t];return r}function i(e,t,n){var r;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},r=e.length;r--;)n[e[r]]={};return n}function o(e,n,r){var i,o;if(!e)return 0;if(r=r||e,e.length!==t){for(i=0,o=e.length;o>i;i++)if(n.call(r,e[i],i,e)===!1)return 0}else for(i in e)if(e.hasOwnProperty(i)&&n.call(r,e[i],i,e)===!1)return 0;return 1}function a(e,t){var n=[];return o(e,function(e){n.push(t(e))}),n}function s(e,t){var n=[];return o(e,function(e){(!t||t(e))&&n.push(e)}),n}function l(e,t,n){var r,i,o,a,s,l=this,c=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),o=e[3].match(/(^|\.)(\w+)$/i)[2],i=l.createNS(e[3].replace(/\.\w+$/,""),n),!i[o]){if("static"==e[2])return i[o]=t,void(this.onCreate&&this.onCreate(e[2],e[3],i[o]));t[o]||(t[o]=function(){},c=1),i[o]=t[o],l.extend(i[o].prototype,t),e[5]&&(r=l.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],s=i[o],i[o]=c?function(){return r[a].apply(this,arguments)}:function(){return this.parent=r[a],s.apply(this,arguments)},i[o].prototype[o]=i[o],l.each(r,function(e,t){i[o].prototype[t]=r[t]}),l.each(t,function(e,t){r[t]?i[o].prototype[t]=function(){return this.parent=r[t],e.apply(this,arguments)}:t!=o&&(i[o].prototype[t]=e)})),l.each(t.static,function(e,t){i[o][t]=e})}}function c(e,t){var n,r;if(e)for(n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}function d(e,n){var r,i,o,a,s=arguments;for(r=1,i=s.length;i>r;r++){n=s[r];for(o in n)n.hasOwnProperty(o)&&(a=n[o],a!==t&&(e[o]=a))}return e}function u(e,t,n,r){r=r||this,e&&(n&&(e=e[n]),o(e,function(e,i){return t.call(r,e,i,n)!==!1&&void u(e,t,n,r)}))}function f(e,t){var n,r;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)r=e[n],t[r]||(t[r]={}),t=t[r];return t}function m(e,t){var n,r;for(t=t||window,e=e.split("."),n=0,r=e.length;r>n&&(t=t[e[n]]);n++);return t}function p(t,r){return!t||n(t,"array")?t:a(t.split(r||","),e)}var h=/^\s*|\s*$/g,g=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return{trim:e,isArray:g,is:n,toArray:r,makeMap:i,each:o,map:a,grep:s,inArray:c,extend:d,create:l,walk:u,createNS:f,resolve:m,explode:p}}),r(d,[],function(){var e,t,n,r,i,o,a,s=navigator,l=s.userAgent;e=window.opera&&window.opera.buildNumber,t=/WebKit/.test(l),n=!t&&!e&&/MSIE/gi.test(l)&&/Explorer/gi.test(s.appName),n=n&&/MSIE (\w+)\./.exec(l)[1],r=-1!=l.indexOf("Trident/")&&(-1!=l.indexOf("rv:")||-1!=s.appName.indexOf("Netscape"))&&11,n=n||r,i=!t&&!r&&/Gecko/.test(l),o=-1!=l.indexOf("Mac"),a=/(iPad|iPhone)/.test(l);var c=!a||l.match(/AppleWebKit\/(\d*)/)[1]>=534;return{opera:e,webkit:t,ie:n,gecko:i,mac:o,iOS:a,contentEditable:c,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=n,range:window.getSelection&&"Range"in window,documentMode:n?document.documentMode||7:10}}),r(u,[s,l,c,d],function(e,n,r,i){function o(e){return"undefined"!=typeof e}function a(e){return"string"==typeof e}function s(e,t){var n,r,i;for(t=t||x,i=t.createElement("div"),n=t.createDocumentFragment(),i.innerHTML=e;r=i.firstChild;)n.appendChild(r);return n}function l(e,t,n,r){var i;if(a(t))t=s(t);else if(t.length&&!t.nodeType){if(t=u.makeArray(t),r)for(i=t.length-1;i>=0;i--)l(e,t[i],n,r);else for(i=0;i<t.length;i++)l(e,t[i],n,r);return e}if(t.nodeType)for(i=e.length;i--;)n.call(e[i],t);return e}function c(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")}function d(e,t,n){var r,i;return t=u(t)[0],e.each(function(){var e=this;n&&r==e.parentNode?i.appendChild(e):(r=e.parentNode,i=t.cloneNode(!1),e.parentNode.insertBefore(i,e),i.appendChild(e))}),e}function u(e,t){return new u.fn.init(e,t)}function f(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1}function m(e){return null===e||e===b?"":(""+e).replace(B,"")}function p(e,t){var n,r,i,o,a;if(e)if(n=e.length,n===o){for(r in e)if(e.hasOwnProperty(r)&&(a=e[r],t.call(a,r,a)===!1))break}else for(i=0;n>i&&(a=e[i],t.call(a,i,a)!==!1);i++);return e}function h(e,n,r){var i=[],o=e[n];for("string"!=typeof r&&r instanceof u&&(r=r[0]);o&&9!==o.nodeType;){if(r!==t){if(o===r)break;if("string"==typeof r&&u(o).is(r))break}1===o.nodeType&&i.push(o),o=o[n]}return i}function g(e,n,r,i){var o=[];for(i instanceof u&&(i=i[0]);e;e=e[n])if(!r||e.nodeType===r){if(i!==t){if(e===i)break;if("string"==typeof i&&u(e).is(i))break}o.push(e)}return o}function v(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType==n)return e;return null}function y(e,t,n){p(n,function(n,r){e[n]=e[n]||{},e[n][t]=r})}var b,x=document,C=Array.prototype.push,w=Array.prototype.slice,_=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,k=e.Event,N=r.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),S=r.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),E={for:"htmlFor",class:"className",readonly:"readOnly"},T={float:"cssFloat"},R={},A={},B=/^\s*|\s*$/g;return u.fn=u.prototype={constructor:u,selector:"",context:null,length:0,init:function(e,t){var n,r,i=this;if(!e)return i;if(e.nodeType)return i.context=i[0]=e,i.length=1,i;if(t&&t.nodeType)i.context=t;else{if(t)return u(e).attr(t);i.context=t=document}if(a(e)){if(i.selector=e,n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:_.exec(e),!n)return u(t).find(e);if(n[1])for(r=s(e,t).firstChild;r;)C.call(i,r),r=r.nextSibling;else{if(r=x.getElementById(n[2]),r.id!==n[2])return i.find(e);i.length=1,i[0]=r}}else this.add(e,!1);return i},toArray:function(){return r.toArray(this)},add:function(e,t){var n,r,i=this;if(a(e))return i.add(u(e));if(e.nodeType)return i.add([e]);if(t!==!1)for(n=u.unique(i.toArray().concat(u.makeArray(e))),i.length=n.length,r=0;r<n.length;r++)i[r]=n[r];else C.apply(i,u.makeArray(e));return i},attr:function(e,t){var n,r=this;if("object"==typeof e)p(e,function(e,t){r.attr(e,t)});else{if(!o(t)){if(r[0]&&1===r[0].nodeType){if(n=R[e],n&&n.get)return n.get(r[0],e);if(S[e])return r.prop(e)?e:b;t=r[0].getAttribute(e,2),null===t&&(t=b)}return t}this.each(function(){var n;if(1===this.nodeType){if(n=R[e],n&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}})}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if(e=E[e]||e,"object"==typeof e)p(e,function(e,t){n.prop(e,t)});else{if(!o(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;
this.each(function(){1==this.nodeType&&(this[e]=t)})}return n},css:function(e,t){function n(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})}function r(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})}var i,a,s=this;if("object"==typeof e)p(e,function(e,t){s.css(e,t)});else if(o(t))e=n(e),"number"!=typeof t||N[e]||(t+="px"),s.each(function(){var n=this.style;if(a=A[e],a&&a.set)return void a.set(this,t);try{this.style[T[e]||e]=t}catch(e){}(null===t||""===t)&&(n.removeProperty?n.removeProperty(r(e)):n.removeAttribute(e))});else{if(i=s[0],a=A[e],a&&a.get)return a.get(i);if(i.ownerDocument.defaultView)try{return i.ownerDocument.defaultView.getComputedStyle(i,null).getPropertyValue(r(e))}catch(e){return b}else if(i.currentStyle)return i.currentStyle[n(e)]}return s},remove:function(){for(var e,t=this,n=this.length;n--;)e=t[n],k.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this,n=this.length;n--;)for(e=t[n];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t,n=this;if(o(e)){t=n.length;try{for(;t--;)n[t].innerHTML=e}catch(r){u(n[t]).empty().append(e)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var t,n=this;if(o(e)){for(t=n.length;t--;)"innerText"in n[t]?n[t].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return l(this,arguments,function(e){1===this.nodeType&&this.appendChild(e)})},prepend:function(){return l(this,arguments,function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)},!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?l(e,arguments,function(e){this.parentNode.insertBefore(e,this)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?l(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):e},appendTo:function(e){return u(e).append(this),this},prependTo:function(e){return u(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return d(this,e)},wrapAll:function(e){return d(this,e,!0)},wrapInner:function(e){return this.each(function(){u(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){u(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),u(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e?n:(-1!==e.indexOf(" ")?p(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(n,r){var i,o;o=c(r,e),o!==t&&(i=r.className,o?r.className=m((" "+i+" ").replace(" "+e+" "," ")):r.className+=i?" "+e:e)}),n)},hasClass:function(e){return c(this[0],e)},each:function(e){return p(this,e)},on:function(e,t){return this.each(function(){k.bind(this,e,t)})},off:function(e,t){return this.each(function(){k.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?k.fire(this,e.type,e):k.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new u(w.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,r=[];for(t=0,n=this.length;n>t;t++)u.find(e,this[t],r);return u(r)},filter:function(e){return u(u.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof u&&(e=e[0]),this.each(function(n,r){for(;r;){if("string"==typeof e&&u(r).is(e)){t.push(r);break}if(r==e){t.push(r);break}r=r.parentNode}}),u(t)},push:C,sort:[].sort,splice:[].splice},r.extend(u,{extend:r.extend,makeArray:r.toArray,inArray:f,isArray:r.isArray,each:p,trim:m,find:n,expr:n.selectors,unique:n.uniqueSort,text:n.getText,contains:n.contains,filter:function(e,t,n){return n&&(e=":not("+e+")"),t=1===t.length?u.find.matchesSelector(t[0],e)?[t[0]]:[]:u.find.matches(e,t)}}),p({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,"parentNode")},next:function(e){return v(e,"nextSibling",1)},prev:function(e){return v(e,"previousSibling",1)},children:function(e){return g(e.firstChild,"nextSibling",1)},contents:function(e){return r.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){u.fn[e]=function(n){var r=this,i=[];return r.each(function(){var e=t.call(i,this,n,i);e&&(u.isArray(e)?i.push.apply(i,e):i.push(e))}),this.length>1&&(i=u.unique(i),0===e.indexOf("parents")&&(i=i.reverse())),i=u(i),n?i.filter(n):i}}),p({parentsUntil:function(e,t){return h(e,"parentNode",t)},nextUntil:function(e,t){return g(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return g(e,"previousSibling",1,t).slice(1)}},function(e,t){u.fn[e]=function(n,r){var i=this,o=[];return i.each(function(){var e=t.call(o,this,n,o);e&&(u.isArray(e)?o.push.apply(o,e):o.push(e))}),this.length>1&&(o=u.unique(o),(0===e.indexOf("parents")||"prevUntil"===e)&&(o=o.reverse())),o=u(o),r?o.filter(r):o}}),u.fn.is=function(e){return!!e&&this.filter(e).length>0},u.fn.init.prototype=u.fn,u.overrideDefaults=function(e){function t(r,i){return n=n||e(),0===arguments.length&&(r=n.element),i||(i=n.context),new t.fn.init(r,i)}var n;return u.extend(t,this),t},i.ie&&i.ie<8&&(y(R,"get",{maxlength:function(e){var t=e.maxLength;return 2147483647===t?b:t},size:function(e){var t=e.size;return 20===t?b:t},class:function(e){return e.className},style:function(e){var t=e.style.cssText;return 0===t.length?b:t}}),y(R,"set",{class:function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),i.ie&&i.ie<9&&(T.float="styleFloat",y(A,"set",{opacity:function(e,t){var n=e.style;null===t||""===t?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*t+")")}})),u.attrHooks=R,u.cssHooks=A,u}),r(f,[],function(){return function(e,t){function n(e,t,n,r){function i(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+i(t)+i(n)+i(r)}var r,i,o,a,s,l=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,c=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,d=/\s*([^:]+):\s*([^;]+);?/g,u=/\s+$/,f={},m="\ufeff";for(e=e||{},t&&(a=t.getValidStyles(),s=t.getInvalidStyles()),o=("\\\" \\' \\; \\: ; : "+m).split(" "),i=0;i<o.length;i++)f[o[i]]=m+i,f[m+i]=o[i];return{toHex:function(e){return e.replace(l,n)},parse:function(t){function r(e,t,n){var r,o,a,s;if(r=b[e+"-top"+t],r&&(o=b[e+"-right"+t],o&&(a=b[e+"-bottom"+t],a&&(s=b[e+"-left"+t])))){var l=[r,o,a,s];for(i=l.length-1;i--&&l[i]===l[i+1];);i>-1&&n||(b[e+t]=-1==i?l[0]:l.join(" "),delete b[e+"-top"+t],delete b[e+"-right"+t],delete b[e+"-bottom"+t],delete b[e+"-left"+t])}}function o(e){var t,n=b[e];if(n){for(n=n.split(" "),t=n.length;t--;)if(n[t]!==n[0])return!1;return b[e]=n[0],!0}}function a(e,t,n,r){o(t)&&o(n)&&o(r)&&(b[e]=b[t]+" "+b[n]+" "+b[r],delete b[t],delete b[n],delete b[r])}function s(e){return y=!0,f[e]}function m(e,t){return y&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return f[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}function p(t,n,r,i,o,a){if(o=o||a)return o=m(o),"'"+o.replace(/\'/g,"\\'")+"'";if(n=m(n||r||i),!e.allow_script_urls){var s=n.replace(/[\s\r\n]+/,"");if(/(java|vb)script:/i.test(s))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return x&&(n=x.call(C,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"}var h,g,v,y,b={},x=e.url_converter,C=e.url_converter_scope||this;if(t){for(t=t.replace(/[\u0000-\u001F]/g,""),t=t.replace(/\\[\"\';:\uFEFF]/g,s).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,s)});h=d.exec(t);){if(g=h[1].replace(u,"").toLowerCase(),v=h[2].replace(u,""),v=v.replace(/\\[0-9a-f]+/g,function(e){return String.fromCharCode(parseInt(e.substr(1),16))}),g&&v.length>0){if(!e.allow_script_urls&&("behavior"==g||/expression\s*\(|\/\*|\*\//.test(v)))continue;"font-weight"===g&&"700"===v?v="bold":("color"===g||"background-color"===g)&&(v=v.toLowerCase()),v=v.replace(l,n),v=v.replace(c,p),b[g]=y?m(v,!0):v}d.lastIndex=h.index+h[0].length}r("border","",!0),r("border","-width"),r("border","-color"),r("border","-style"),r("padding",""),r("margin",""),a("border","border-width","border-style","border-color"),"medium none"===b.border&&delete b.border,"none"===b["border-image"]&&delete b["border-image"]}return b},serialize:function(e,t){function n(t){var n,i,o,s;if(n=a[t])for(i=0,o=n.length;o>i;i++)t=n[i],s=e[t],s!==r&&s.length>0&&(c+=(c.length>0?" ":"")+t+": "+s+";")}function i(e,t){var n;return n=s["*"],(!n||!n[e])&&(n=s[t],!n||!n[e])}var o,l,c="";if(t&&a)n("*"),n(t);else for(o in e)l=e[o],l!==r&&l.length>0&&(!s||i(o,t))&&(c+=(c.length>0?" ":"")+o+": "+l+";");return c}}}}),r(m,[],function(){return function(e,t){function n(e,n,r,i){var o,a;if(e){if(!i&&e[n])return e[n];if(e!=t){if(o=e[r])return o;for(a=e.parentNode;a&&a!=t;a=a.parentNode)if(o=a[r])return o}}}var r=e;this.current=function(){return r},this.next=function(e){return r=n(r,"firstChild","nextSibling",e)},this.prev=function(e){return r=n(r,"lastChild","previousSibling",e)}}}),r(p,[c],function(e){function t(n){function r(){return L.createDocumentFragment()}function i(e,t){_(F,e,t)}function o(e,t){_(z,e,t)}function a(e){i(e.parentNode,j(e))}function s(e){i(e.parentNode,j(e)+1)}function l(e){o(e.parentNode,j(e))}function c(e){o(e.parentNode,j(e)+1)}function d(e){e?(M[V]=M[U],M[$]=M[W]):(M[U]=M[V],M[W]=M[$]),M.collapsed=F}function u(e){a(e),c(e)}function f(e){i(e,0),o(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)}function m(e,t){var n=M[U],r=M[W],i=M[V],o=M[$],a=t.startContainer,s=t.startOffset,l=t.endContainer,c=t.endOffset;return 0===e?w(n,r,a,s):1===e?w(i,o,a,s):2===e?w(i,o,l,c):3===e?w(n,r,l,c):void 0}function p(){k(H)}function h(){return k(I)}function g(){return k(O)}function v(e){var t,r,i=this[U],o=this[W];3!==i.nodeType&&4!==i.nodeType||!i.nodeValue?(i.childNodes.length>0&&(r=i.childNodes[o]),r?i.insertBefore(e,r):3==i.nodeType?n.insertAfter(e,i):i.appendChild(e)):o?o>=i.nodeValue.length?n.insertAfter(e,i):(t=i.splitText(o),i.parentNode.insertBefore(e,t)):i.parentNode.insertBefore(e,i)}function y(e){var t=M.extractContents();M.insertNode(e),e.appendChild(t),M.selectNode(e)}function b(){return q(new t(n),{startContainer:M[U],startOffset:M[W],endContainer:M[V],endOffset:M[$],collapsed:M.collapsed,commonAncestorContainer:M.commonAncestorContainer})}function x(e,t){var n;if(3==e.nodeType)return e;if(0>t)return e;for(n=e.firstChild;n&&t>0;)--t,n=n.nextSibling;return n?n:e}function C(){return M[U]==M[V]&&M[W]==M[$]}function w(e,t,r,i){var o,a,s,l,c,d;if(e==r)return t==i?0:i>t?-1:1;for(o=r;o&&o.parentNode!=e;)o=o.parentNode;if(o){for(a=0,s=e.firstChild;s!=o&&t>a;)a++,s=s.nextSibling;return a>=t?-1:1}for(o=e;o&&o.parentNode!=r;)o=o.parentNode;if(o){for(a=0,s=r.firstChild;s!=o&&i>a;)a++,s=s.nextSibling;return i>a?-1:1}for(l=n.findCommonAncestor(e,r),c=e;c&&c.parentNode!=l;)c=c.parentNode;for(c||(c=l),d=r;d&&d.parentNode!=l;)d=d.parentNode;if(d||(d=l),c==d)return 0;for(s=l.firstChild;s;){if(s==c)return-1;if(s==d)return 1;s=s.nextSibling}}function _(e,t,r){var i,o;for(e?(M[U]=t,M[W]=r):(M[V]=t,M[$]=r),i=M[V];i.parentNode;)i=i.parentNode;for(o=M[U];o.parentNode;)o=o.parentNode;o==i?w(M[U],M[W],M[V],M[$])>0&&M.collapse(e):M.collapse(e),M.collapsed=C(),M.commonAncestorContainer=n.findCommonAncestor(M[U],M[V])}function k(e){var t,n,r,i,o,a,s,l=0,c=0;if(M[U]==M[V])return N(e);for(t=M[V],n=t.parentNode;n;t=n,n=n.parentNode){if(n==M[U])return S(t,e);++l}for(t=M[U],n=t.parentNode;n;t=n,n=n.parentNode){if(n==M[V])return E(t,e);++c}for(r=c-l,i=M[U];r>0;)i=i.parentNode,r--;for(o=M[V];0>r;)o=o.parentNode,r++;for(a=i.parentNode,s=o.parentNode;a!=s;a=a.parentNode,s=s.parentNode)i=a,o=s;return T(i,o,e)}function N(e){var t,n,i,o,a,s,l,c,d;if(e!=H&&(t=r()),M[W]==M[$])return t;if(3==M[U].nodeType){if(n=M[U].nodeValue,i=n.substring(M[W],M[$]),e!=O&&(o=M[U],c=M[W],d=M[$]-M[W],0===c&&d>=o.nodeValue.length-1?o.parentNode.removeChild(o):o.deleteData(c,d),M.collapse(F)),e==H)return;return i.length>0&&t.appendChild(L.createTextNode(i)),t}for(o=x(M[U],M[W]),a=M[$]-M[W];o&&a>0;)s=o.nextSibling,l=P(o,e),t&&t.appendChild(l),--a,o=s;return e!=O&&M.collapse(F),t}function S(e,t){var n,i,o,a,s,l;if(t!=H&&(n=r()),i=R(e,t),n&&n.appendChild(i),o=j(e),a=o-M[W],0>=a)return t!=O&&(M.setEndBefore(e),M.collapse(z)),n;for(i=e.previousSibling;a>0;)s=i.previousSibling,l=P(i,t),n&&n.insertBefore(l,n.firstChild),--a,i=s;return t!=O&&(M.setEndBefore(e),M.collapse(z)),n}function E(e,t){var n,i,o,a,s,l;for(t!=H&&(n=r()),o=A(e,t),n&&n.appendChild(o),i=j(e),++i,a=M[$]-i,o=e.nextSibling;o&&a>0;)s=o.nextSibling,l=P(o,t),n&&n.appendChild(l),--a,o=s;return t!=O&&(M.setStartAfter(e),M.collapse(F)),n}function T(e,t,n){var i,o,a,s,l,c,d;for(n!=H&&(o=r()),i=A(e,n),o&&o.appendChild(i),a=j(e),s=j(t),++a,l=s-a,c=e.nextSibling;l>0;)d=c.nextSibling,i=P(c,n),o&&o.appendChild(i),c=d,--l;return i=R(t,n),o&&o.appendChild(i),n!=O&&(M.setStartAfter(e),M.collapse(F)),o}function R(e,t){var n,r,i,o,a,s=x(M[V],M[$]-1),l=s!=M[V];if(s==e)return B(s,l,z,t);for(n=s.parentNode,r=B(n,z,z,t);n;){for(;s;)i=s.previousSibling,o=B(s,l,z,t),t!=H&&r.insertBefore(o,r.firstChild),l=F,s=i;if(n==e)return r;s=n.previousSibling,n=n.parentNode,a=B(n,z,z,t),t!=H&&a.appendChild(r),r=a}}function A(e,t){var n,r,i,o,a,s=x(M[U],M[W]),l=s!=M[U];if(s==e)return B(s,l,F,t);for(n=s.parentNode,r=B(n,z,F,t);n;){for(;s;)i=s.nextSibling,o=B(s,l,F,t),t!=H&&r.appendChild(o),l=F,s=i;if(n==e)return r;s=n.nextSibling,n=n.parentNode,a=B(n,z,F,t),t!=H&&a.appendChild(r),r=a}}function B(e,t,r,i){var o,a,s,l,c;if(t)return P(e,i);if(3==e.nodeType){if(o=e.nodeValue,r?(l=M[W],a=o.substring(l),s=o.substring(0,l)):(l=M[$],a=o.substring(0,l),s=o.substring(l)),i!=O&&(e.nodeValue=s),i==H)return;return c=n.clone(e,z),c.nodeValue=a,c}return i!=H?n.clone(e,z):void 0}function P(e,t){return t!=H?t==O?n.clone(e,F):e:void e.parentNode.removeChild(e)}function D(){return n.create("body",null,g()).outerText}var M=this,L=n.doc,I=0,O=1,H=2,F=!0,z=!1,W="startOffset",U="startContainer",V="endContainer",$="endOffset",q=e.extend,j=n.nodeIndex;return q(M,{startContainer:L,startOffset:0,endContainer:L,endOffset:0,collapsed:F,commonAncestorContainer:L,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:i,setEnd:o,setStartBefore:a,setStartAfter:s,setEndBefore:l,setEndAfter:c,collapse:d,selectNode:u,selectNodeContents:f,compareBoundaryPoints:m,deleteContents:p,extractContents:h,cloneContents:g,insertNode:v,surroundContents:y,cloneRange:b,toStringIE:D}),M}return t.prototype.toString=function(){return this.toStringIE()},t}),r(h,[c],function(e){function t(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.textContent||t.innerText||e}function n(e,t){var n,r,o,a={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r=String.fromCharCode(parseInt(e[n],t)),i[r]||(o="&"+e[n+1]+";",a[r]=o,a[o]=r);return a}}var r,i,o,a=e.makeMap,s=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=/[<>&\"\']/g,d=/&(#x|#)?([\w]+);/g,u={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};i={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},o={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},r=n("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var f={encodeRaw:function(e,t){return e.replace(t?s:l,function(e){return i[e]||e})},encodeAllRaw:function(e){return(""+e).replace(c,function(e){return i[e]||e})},encodeNumeric:function(e,t){return e.replace(t?s:l,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":i[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,n){return n=n||r,e.replace(t?s:l,function(e){return i[e]||n[e]||e})},getEncodeFunc:function(e,t){function o(e,n){return e.replace(n?s:l,function(e){return i[e]||t[e]||"&#"+e.charCodeAt(0)+";"||e})}function c(e,n){return f.encodeNamed(e,n,t)}return t=n(t)||r,e=a(e.replace(/\+/g,",")),e.named&&e.numeric?o:e.named?t?c:f.encodeNamed:e.numeric?f.encodeNumeric:f.encodeRaw},decode:function(e){return e.replace(d,function(e,n,i){return n?(i=parseInt(i,2===n.length?16:10),i>65535?(i-=65536,String.fromCharCode(55296+(i>>10),56320+(1023&i))):u[i]||String.fromCharCode(i)):o[e]||r[e]||t(e)})}};return f}),r(g,[],function(){return function(e,t){function n(t){e.getElementsByTagName("head")[0].appendChild(t)}function r(t,r,s){function l(){for(var e=v.passed,t=e.length;t--;)e[t]();v.status=2,v.passed=[],v.failed=[]}function c(){for(var e=v.failed,t=e.length;t--;)e[t]();v.status=3,v.passed=[],v.failed=[]}function d(){var e=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(e&&e[1]<536)}function u(e,t){e()||((new Date).getTime()-g<i?window.setTimeout(t,0):c())}function f(){u(function(){for(var t,n,r=e.styleSheets,i=r.length;i--;)if(t=r[i],n=t.ownerNode?t.ownerNode:t.owningElement,n&&n.id===p.id)return l(),!0},f)}function m(){u(function(){try{var e=h.sheet.cssRules;return l(),!!e}catch(e){}},m)}var p,h,g,v;if(a[t]?v=a[t]:(v={passed:[],failed:[]},a[t]=v),r&&v.passed.push(r),s&&v.failed.push(s),1!=v.status){if(2==v.status)return void l();if(3==v.status)return void c();if(v.status=1,p=e.createElement("link"),p.rel="stylesheet",p.type="text/css",p.id="u"+o++,p.async=!1,p.defer=!1,g=(new Date).getTime(),"onload"in p&&!d())p.onload=f,p.onerror=c;else{if(navigator.userAgent.indexOf("Firefox")>0)return h=e.createElement("style"),h.textContent='@import "'+t+'"',m(),void n(h);f()}n(p),p.href=t}}var i,o=0,a={};t=t||{},i=t.maxLoadTime||5e3,this.load=r}}),r(v,[l,u,f,s,m,p,h,d,c,g],function(e,n,r,i,o,a,s,l,c,d){function u(e,t){var n,r={},i=t.keep_values;return n={set:function(n,r,i){t.url_converter&&(r=t.url_converter.call(t.url_converter_scope||e,r,i,n[0])),n.attr("data-mce-"+i,r).attr(i,r)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}},r={style:{set:function(e,t){return null!==t&&"object"==typeof t?void e.css(t):(i&&e.attr("data-mce-style",t),void e.attr("style",t))},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return n=e.serializeStyle(e.parseStyle(n),t[0].nodeName)}}},i&&(r.href=r.src=n),r}function f(e,t){var o,a=this;a.doc=e,a.win=window,a.files={},a.counter=0,a.stdMode=!v||e.documentMode>=8,a.boxModel=!v||"CSS1Compat"==e.compatMode||a.stdMode,a.styleSheetLoader=new d(e),a.boundEvents=[],a.settings=t=t||{},a.schema=t.schema,a.styles=new r({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),a.fixDoc(e),a.events=t.ownEvents?new i(t.proxy):i.Event,a.attrHooks=u(a,t),o=t.schema?t.schema.getBlockElements():{},a.$=n.overrideDefaults(function(){return{context:e,element:a.getRoot()}}),a.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?!(1!==t||!o[e.nodeName]):!!o[e]}}var m=c.each,p=c.is,h=c.grep,g=c.trim,v=l.ie,y=/^([a-z0-9],?)+$/i,b=/^[ \t\r\n]*$/;return f.prototype={$$:function(e){return"string"==typeof e&&(e=this.get(e)),this.$(e)},root:null,fixDoc:function(e){var t,n=this.settings;if(v&&n.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(t in n.schema.getCustomElements())e.createElement(t)}},clone:function(e,t){var n,r,i=this;return!v||1!==e.nodeType||t?e.cloneNode(t):(r=i.doc,t?n.firstChild:(n=r.createElement(e.nodeName),m(i.getAttribs(e),function(t){i.setAttrib(n,t.nodeName,i.getAttrib(e,t.nodeName))}),n))},getRoot:function(){var e=this;return e.get(e.settings.root_element)||e.doc.body},getViewPort:function(e){var t,n;return e=e?e:this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n,r=this;return e=r.get(e),t=r.getPos(e),n=r.getSize(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:function(e){var t,n,r=this;return e=r.get(e),t=r.getStyle(e,"width"),n=r.getStyle(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,n,r,i){var o,a=this,s=[];for(e=a.get(e),i=i===t,r=r||("BODY"!=a.getRoot().nodeName?a.getRoot().parentNode:null),p(n,"string")&&(o=n,n="*"===n?function(e){return 1==e.nodeType}:function(e){return a.is(e,o)});e&&e!=r&&e.nodeType&&9!==e.nodeType;){if(!n||n(e)){if(!i)return e;s.push(e)}e=e.parentNode}return i?s:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,e=this.doc.getElementById(e),e&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(t,n){var r=this;return e(t,r.get(n)||r.get(r.settings.root_element)||r.doc,[])},is:function(n,r){var i;if(n.length===t){if("*"===r)return 1==n.nodeType;if(y.test(r)){for(r=r.toLowerCase().split(/,/),n=n.nodeName.toLowerCase(),i=r.length-1;i>=0;i--)if(r[i]==n)return!0;return!1}}if(n.nodeType&&1!=n.nodeType)return!1;var o=n.nodeType?[n]:n;return e(r,o[0].ownerDocument||o[0],null,o).length>0},add:function(e,t,n,r,i){var o=this;return this.run(e,function(e){var a;return a=p(t,"string")?o.doc.createElement(t):t,o.setAttribs(a,n),r&&(r.nodeType?a.appendChild(r):o.setHTML(a,r)),i?a:e.appendChild(a)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var r,i="";i+="<"+e;for(r in t)t.hasOwnProperty(r)&&null!==t[r]&&"undefined"!=typeof t[r]&&(i+=" "+r+'="'+this.encode(t[r])+'"');return"undefined"!=typeof n?i+">"+n+"</"+e+">":i+" />"},createFragment:function(e){var t,n,r,i=this.doc;for(r=i.createElement("div"),t=i.createDocumentFragment(),e&&(r.innerHTML=e);n=r.firstChild;)t.appendChild(n);return t},remove:function(e,t){return e=this.$$(e),t?e.each(function(){for(var e;e=this.firstChild;)3==e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():e.remove(),e.length>1?e.toArray():e[0]},setStyle:function(e,t,n){e=this.$$(e).css(t,n),this.settings.update_styles&&e.attr("data-mce-style",null)},getStyle:function(e,n,r){return e=this.$$(e),r?e.css(n):(n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"==n&&(n=v?"styleFloat":"cssFloat"),e[0].style?e[0].style[n]:t)},setStyles:function(e,t){this.$$(e).css(t)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,t,n){var r,i,o=this,a=o.settings;""===n&&(n=null),e=o.$$(e),r=e.attr(t),i=o.attrHooks[t],i&&i.set?i.set(e,n,t):e.attr(t,n),r!=n&&a.onSetAttrib&&a.onSetAttrib({attrElm:e,attrName:t,attrValue:n})},setAttribs:function(e,t){var n=this;n.$$(e).each(function(e,r){m(t,function(e,t){n.setAttrib(r,t,e)})})},getAttrib:function(e,t,n){var r,i,o=this;return e=o.$$(e),r=o.attrHooks[t],i=r&&r.get?r.get(e,t):e.attr(t),"undefined"==typeof i&&(i=n||""),i},getPos:function(e,t){var n,r,i=this,o=0,a=0,s=i.doc;if(e=i.get(e),t=t||s.body,e){if(t===s.body&&e.getBoundingClientRect)return r=e.getBoundingClientRect(),t=i.boxModel?s.documentElement:s.body,o=r.left+(s.documentElement.scrollLeft||s.body.scrollLeft)-t.clientLeft,a=r.top+(s.documentElement.scrollTop||s.body.scrollTop)-t.clientTop,{x:o,y:a};for(n=e;n&&n!=t&&n.nodeType;)o+=n.offsetLeft||0,a+=n.offsetTop||0,n=n.offsetParent;for(n=e.parentNode;n&&n!=t&&n.nodeType;)o-=n.scrollLeft||0,a-=n.scrollTop||0,n=n.parentNode}return{x:o,y:a}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t,n,r=this,i=r.doc;if(r!==f.DOM&&i===document){var o=f.DOM.addedStyles;if(o=o||[],o[e])return;o[e]=!0,f.DOM.addedStyles=o}n=i.getElementById("mceDefaultStyles"),n||(n=i.createElement("style"),n.id="mceDefaultStyles",n.type="text/css",t=i.getElementsByTagName("head")[0],t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(i.createTextNode(e))},loadCSS:function(e){var t,n=this,r=n.doc;return n!==f.DOM&&r===document?void f.DOM.loadCSS(e):(e||(e=""),t=r.getElementsByTagName("head")[0],void m(e.split(","),function(e){var i;n.files[e]||(n.files[e]=!0,i=n.create("link",{rel:"stylesheet",href:e}),v&&r.documentMode&&r.recalc&&(i.onload=function(){r.recalc&&r.recalc(),i.onload=null}),t.appendChild(i))}))},addClass:function(e,t){this.$$(e).addClass(t)},removeClass:function(e,t){this.toggleClass(e,t,!1)},hasClass:function(e,t){return this.$$(e).hasClass(t)},toggleClass:function(e,t,r){this.$$(e).toggleClass(t,r).each(function(){""===this.className&&n(this).attr("class",null)})},show:function(e){this.$$(e).show()},hide:function(e){this.$$(e).hide()},isHidden:function(e){return"none"==this.$$(e).css("display")},uniqueId:function(e){return(e?e:"mce_")+this.counter++},setHTML:function(e,t){e=this.$$(e),v?e.each(function(e,r){if(r.canHaveHTML!==!1){for(;r.firstChild;)r.removeChild(r.firstChild);try{r.innerHTML="<br>"+t,r.removeChild(r.firstChild)}catch(e){n("<div>").html("<br>"+t).contents().slice(1).appendTo(r)}return t}}):e.html(t)},getOuterHTML:function(e){return e=this.get(e),1==e.nodeType?e.outerHTML:n("<div>").append(n(e).clone()).html()},setOuterHTML:function(e,t){var r=this;r.$$(e).each(function(){try{this.outerHTML=t}catch(e){r.remove(n(this).html(t),!0)}})},decode:s.decode,encode:s.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,r;return n=t.parentNode,r=t.nextSibling,r?n.insertBefore(e,r):n.appendChild(e),e})},replace:function(e,t,n){var r=this;return r.run(t,function(t){return p(t,"array")&&(e=e.cloneNode(!0)),n&&m(h(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},rename:function(e,t){var n,r=this;return e.nodeName!=t.toUpperCase()&&(n=r.create(t),m(r.getAttribs(e),function(t){r.setAttrib(n,t.nodeName,r.getAttrib(e,t.nodeName))}),r.replace(n,e,1)),n||e},findCommonAncestor:function(e,t){for(var n,r=e;r;){for(n=t;n&&r!=n;)n=n.parentNode;if(r==n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},toHex:function(e){return this.styles.toHex(c.trim(e))},run:function(e,t,n){var r,i=this;return"string"==typeof e&&(e=i.get(e)),!!e&&(n=n||this,e.nodeType||!e.length&&0!==e.length?t.call(n,e):(r=[],m(e,function(e,o){e&&("string"==typeof e&&(e=i.get(e)),r.push(t.call(n,e,o)))}),r))},getAttribs:function(e){var t;if(e=this.get(e),!e)return[];if(v){if(t=[],"OBJECT"==e.nodeName)return e.attributes;"OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"});var n=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;return e.cloneNode(!1).outerHTML.replace(n,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t}return e.attributes},isEmpty:function(e,t){var n,r,i,a,s,l=this,c=0;if(e=e.firstChild){a=new o(e,e.parentNode),t=t||l.schema?l.schema.getNonEmptyElements():null;do{if(i=e.nodeType,1===i){if(e.getAttribute("data-mce-bogus"))continue;if(s=e.nodeName.toLowerCase(),t&&t[s]){if("br"===s){c++;continue}return!1}for(r=l.getAttribs(e),n=r.length;n--;)if(s=r[n].nodeName,"name"===s||"data-mce-bookmark"===s)return!1}if(8==i)return!1;if(3===i&&!b.test(e.nodeValue))return!1}while(e=a.next())}return 1>=c},createRng:function(){var e=this.doc;return e.createRange?e.createRange():new a(this)},nodeIndex:function(e,t){var n,r,i=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!=r||r!=n&&e.nodeValue.length)&&(i++,n=r);return i},split:function(e,t,n){function r(e){function t(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&n}var n,i=e.childNodes,o=e.nodeType;if(1!=o||"bookmark"!=e.getAttribute("data-mce-type")){for(n=i.length-1;n>=0;n--)r(i[n]);if(9!=o){if(3==o&&e.nodeValue.length>0){var a=g(e.nodeValue).length;if(!s.isBlock(e.parentNode)||a>0||0===a&&t(e))return}else if(1==o&&(i=e.childNodes,1==i.length&&i[0]&&1==i[0].nodeType&&"bookmark"==i[0].getAttribute("data-mce-type")&&e.parentNode.insertBefore(i[0],e),i.length||/^(br|hr|input|img)$/i.test(e.nodeName)))return;s.remove(e)}return e}}var i,o,a,s=this,l=s.createRng();return e&&t?(l.setStart(e.parentNode,s.nodeIndex(e)),l.setEnd(t.parentNode,s.nodeIndex(t)),i=l.extractContents(),l=s.createRng(),l.setStart(t.parentNode,s.nodeIndex(t)+1),l.setEnd(e.parentNode,s.nodeIndex(e)+1),o=l.extractContents(),a=e.parentNode,a.insertBefore(r(i),e),n?a.replaceChild(n,t):a.insertBefore(t,e),a.insertBefore(r(o),e),s.remove(e),n||t):void 0},bind:function(e,t,n,r){var i=this;if(c.isArray(e)){for(var o=e.length;o--;)e[o]=i.bind(e[o],t,n,r);return e}return!i.settings.collect||e!==i.doc&&e!==i.win||i.boundEvents.push([e,t,n,r]),i.events.bind(e,t,n,r||i)},unbind:function(e,t,n){var r,i=this;if(c.isArray(e)){for(r=e.length;r--;)e[r]=i.unbind(e[r],t,n);return e}if(i.boundEvents&&(e===i.doc||e===i.win))for(r=i.boundEvents.length;r--;){var o=i.boundEvents[r];e!=o[0]||t&&t!=o[1]||n&&n!=o[2]||this.events.unbind(o[0],o[1],o[2])}return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return e&&1==e.nodeType?(t=e.getAttribute("data-mce-contenteditable"),t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null):null},getContentEditableParent:function(e){
for(var t=this.getRoot(),n=null;e&&e!==t&&(n=this.getContentEditable(e),null===n);e=e.parentNode);return n},destroy:function(){var t=this;if(t.boundEvents){for(var n=t.boundEvents.length;n--;){var r=t.boundEvents[n];this.events.unbind(r[0],r[1],r[2])}t.boundEvents=null}e.setDocument&&e.setDocument(),t.win=t.doc=t.root=t.events=t.frag=null},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var r=this,i=t;if(e)for("string"==typeof i&&(i=function(e){return r.is(e,t)}),e=e[n];e;e=e[n])if(i(e))return e;return null}},f.DOM=new f(document),f}),r(y,[v,c],function(e,t){function n(){function e(e,t){function n(){s.remove(a),o&&(o.onreadystatechange=o.onload=o=null),t()}function i(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+e)}var o,a,s=r;a=s.uniqueId(),o=document.createElement("script"),o.id=a,o.type="text/javascript",o.src=e,"onreadystatechange"in o?o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&n()}:o.onload=n,o.onerror=i,(document.getElementsByTagName("head")[0]||document.body).appendChild(o)}var t,n=0,a=1,s=2,l={},c=[],d={},u=[],f=0;this.isDone=function(e){return l[e]==s},this.markDone=function(e){l[e]=s},this.add=this.load=function(e,r,i){var o=l[e];o==t&&(c.push(e),l[e]=n),r&&(d[e]||(d[e]=[]),d[e].push({func:r,scope:i||this}))},this.loadQueue=function(e,t){this.loadScripts(c,e,t)},this.loadScripts=function(n,r,c){function m(e){i(d[e],function(e){e.func.call(e.scope)}),d[e]=t}var p;u.push({func:r,scope:c||this}),(p=function(){var t=o(n);n.length=0,i(t,function(t){return l[t]==s?void m(t):void(l[t]!=a&&(l[t]=a,f++,e(t,function(){l[t]=s,f--,m(t),p()})))}),f||(i(u,function(e){e.func.call(e.scope)}),u.length=0)})()}}var r=e.DOM,i=t.each,o=t.grep;return n.ScriptLoader=new n,n}),r(b,[y,c],function(e,n){function r(){var e=this;e.items=[],e.urls={},e.lookup={}}var i=n.each;return r.prototype={get:function(e){return this.lookup[e]?this.lookup[e].instance:t},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t,n){var i=r.language;if(i&&r.languageLoad!==!1){if(n)if(n=","+n+",",-1!=n.indexOf(","+i.substr(0,2)+","))i=i.substr(0,2);else if(-1==n.indexOf(","+i+","))return;e.ScriptLoader.add(this.urls[t]+"/langs/"+i+".js")}},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},t},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var r=this.urls[t];i(n,function(t){e.ScriptLoader.add(r+"/"+t)})},load:function(n,o,a,s){function l(){var r=c.dependencies(n);i(r,function(e){var n=c.createUrl(o,e);c.load(n.resource,n,t,t)}),a&&a.call(s?s:e)}var c=this,d=o;c.urls[n]||("object"==typeof o&&(d=o.prefix+o.resource+o.suffix),0!==d.indexOf("/")&&-1==d.indexOf("://")&&(d=r.baseURL+"/"+d),c.urls[n]=d.substring(0,d.lastIndexOf("/")),c.lookup[n]?l():e.ScriptLoader.add(d,l,s))}},r.PluginManager=new r,r.ThemeManager=new r,r}),r(x,[c,m],function(e,t){function n(e,t){var n=e.childNodes;return t--,t>n.length-1?t=n.length-1:0>t&&(t=0),n[t]||e}function r(e){this.walk=function(t,r){function o(e){var t;return t=e[0],3===t.nodeType&&t===g&&v>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===b&&e.length>0&&t===y&&3===t.nodeType&&e.splice(e.length-1,1),e}function a(e,t,n){for(var r=[];e&&e!=n;e=e[t])r.push(e);return r}function s(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function l(e,t,n){var i=n?"nextSibling":"previousSibling";for(f=e,m=f.parentNode;f&&f!=t;f=m)m=f.parentNode,p=a(f==e?f:f[i],i),p.length&&(n||p.reverse(),r(o(p)))}var c,d,u,f,m,p,h,g=t.startContainer,v=t.startOffset,y=t.endContainer,b=t.endOffset;if(h=e.select("td.mce-item-selected,th.mce-item-selected"),h.length>0)return void i(h,function(e){r([e])});if(1==g.nodeType&&g.hasChildNodes()&&(g=g.childNodes[v]),1==y.nodeType&&y.hasChildNodes()&&(y=n(y,b)),g==y)return r(o([g]));for(c=e.findCommonAncestor(g,y),f=g;f;f=f.parentNode){if(f===y)return l(g,c,!0);if(f===c)break}for(f=y;f;f=f.parentNode){if(f===g)return l(y,c);if(f===c)break}d=s(g,c)||g,u=s(y,c)||y,l(g,d,!0),p=a(d==g?d:d.nextSibling,"nextSibling",u==y?u.nextSibling:u),p.length&&r(o(p)),l(y,u)},this.split=function(e){function t(e,t){return e.splitText(t)}var n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset;return n==i&&3==n.nodeType?r>0&&r<n.nodeValue.length&&(i=t(n,r),n=i.previousSibling,o>r?(o-=r,n=i=t(i,o).previousSibling,o=i.nodeValue.length,r=0):o=0):(3==n.nodeType&&r>0&&r<n.nodeValue.length&&(n=t(n,r),r=0),3==i.nodeType&&o>0&&o<i.nodeValue.length&&(i=t(i,o).previousSibling,o=i.nodeValue.length)),{startContainer:n,startOffset:r,endContainer:i,endOffset:o}},this.normalize=function(n){function r(r){function a(n,r){for(var i=new t(n,e.getParent(n.parentNode,e.isBlock)||g);n=i[r?"prev":"next"]();)if("BR"===n.nodeName)return!0}function s(e,t){return e.previousSibling&&e.previousSibling.nodeName==t}function l(n,r){var a,s,l;if(r=r||c,l=e.getParent(r.parentNode,e.isBlock)||g,n&&"BR"==r.nodeName&&h&&e.isEmpty(l))return c=r.parentNode,d=e.nodeIndex(r),void(i=!0);for(a=new t(r,l);f=a[n?"prev":"next"]();){if("false"===e.getContentEditableParent(f))return;if(3===f.nodeType&&f.nodeValue.length>0)return c=f,d=n?f.nodeValue.length:0,void(i=!0);if(e.isBlock(f)||m[f.nodeName.toLowerCase()])return;s=f}o&&s&&(c=s,i=!0,d=0)}var c,d,u,f,m,p,h,g=e.getRoot();if(c=n[(r?"start":"end")+"Container"],d=n[(r?"start":"end")+"Offset"],h=1==c.nodeType&&d===c.childNodes.length,m=e.schema.getNonEmptyElements(),p=r,1==c.nodeType&&d>c.childNodes.length-1&&(p=!1),9===c.nodeType&&(c=e.getRoot(),d=0),c===g){if(p&&(f=c.childNodes[d>0?d-1:0],f&&(m[f.nodeName]||"TABLE"==f.nodeName)))return;if(c.hasChildNodes()&&(d=Math.min(!p&&d>0?d-1:d,c.childNodes.length-1),c=c.childNodes[d],d=0,c.hasChildNodes()&&!/TABLE/.test(c.nodeName))){f=c,u=new t(c,g);do{if(3===f.nodeType&&f.nodeValue.length>0){d=p?0:f.nodeValue.length,c=f,i=!0;break}if(m[f.nodeName.toLowerCase()]){d=e.nodeIndex(f),c=f.parentNode,"IMG"!=f.nodeName||p||d++,i=!0;break}}while(f=p?u.next():u.prev())}}o&&(3===c.nodeType&&0===d&&l(!0),1===c.nodeType&&(f=c.childNodes[d],f||(f=c.childNodes[d-1]),!f||"BR"!==f.nodeName||s(f,"A")||a(f)||a(f,!0)||l(!0,f))),p&&!o&&3===c.nodeType&&d===c.nodeValue.length&&l(!1),i&&n["set"+(r?"Start":"End")](c,d)}var i,o;return o=n.collapsed,r(!0),o||r(),i&&o&&n.collapse(!0),i}}var i=e.each;return r.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1},r}),r(C,[x],function(e){return function(t){function n(e){var n,r;if(r=t.$(e).parentsUntil(t.getBody()).add(e),r.length===i.length){for(n=r.length;n>=0&&r[n]===i[n];n--);if(-1===n)return i=r,!0}return i=r,!1}var r,i=[];"onselectionchange"in t.getDoc()||t.on("NodeChange Click MouseUp KeyUp",function(n){var i,o;i=t.selection.getRng(),o={startContainer:i.startContainer,startOffset:i.startOffset,endContainer:i.endContainer,endOffset:i.endOffset},"nodechange"!=n.type&&e.compareRanges(o,r)||t.fire("SelectionChange"),r=o}),t.on("SelectionChange",function(){var e=t.selection.getStart();!n(e)&&t.dom.isChildOf(e,t.getBody())&&t.nodeChanged({selectionChange:!0})}),this.nodeChanged=function(e){var n,r,i,o=t.selection;!t.initialized||t.settings.disable_nodechange||t.settings.readonly||(i=t.getBody(),n=o.getStart()||i,n=n.ownerDocument!=t.getDoc()?t.getBody():n,"IMG"==n.nodeName&&o.isCollapsed()&&(n=n.parentNode),r=[],t.dom.getParent(n,function(e){return e===i||void r.push(e)}),e=e||{},e.element=n,e.parents=r,t.fire("NodeChange",e))}}}),r(w,[],function(){function e(e,t,n){var r,i,o=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[o])return e[o];if(e!==t){if(r=e[a])return r;for(i=e.parent;i&&i!==t;i=i.parent)if(r=i[a])return r}}function t(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}var n=/^[ \t\r\n]*$/,r={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};return t.prototype={replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n,r,i,o=this;if("string"!=typeof e){for(r in e)o.attr(r,e[r]);return o}if(n=o.attributes){if(t!==i){if(null===t){if(e in n.map)for(delete n.map[e],r=n.length;r--;)if(n[r].name===e)return n=n.splice(r,1),o;return o}if(e in n.map){for(r=n.length;r--;)if(n[r].name===e){n[r].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,o}return n.map[e]}},clone:function(){var e,n,r,i,o,a=this,s=new t(a.name,a.type);if(r=a.attributes){for(o=[],o.map={},e=0,n=r.length;n>e;e++)i=r[e],"id"!==i.name&&(o[o.length]={name:i.name,value:i.value},o.map[i.name]=i.value);s.attributes=o}return s.value=a.value,s.shortEnded=a.shortEnded,s},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e,t,n=this;for(e=n.firstChild;e;)t=e.next,n.insert(e,n,!0),e=t;n.remove()},remove:function(){var e=this,t=e.parent,n=e.next,r=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):r.next=n,t.lastChild===e?(t.lastChild=r,r&&(r.next=null)):n.prev=r,e.parent=e.next=e.prev=null),e},append:function(e){var t,n=this;return e.parent&&e.remove(),t=n.lastChild,t?(t.next=e,e.prev=t,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e},insert:function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e},getAll:function(t){var n,r=this,i=[];for(n=r.firstChild;n;n=e(n,r))n.name===t&&i.push(n);return i},empty:function(){var t,n,r,i=this;if(i.firstChild){for(t=[],r=i.firstChild;r;r=e(r,i))t.push(r);for(n=t.length;n--;)r=t[n],r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}return i.firstChild=i.lastChild=null,i},isEmpty:function(t){var r,i,o=this,a=o.firstChild;if(a)do{if(1===a.type){if(a.attributes.map["data-mce-bogus"])continue;if(t[a.name])return!1;for(r=a.attributes.length;r--;)if(i=a.attributes[r].name,"name"===i||0===i.indexOf("data-mce-"))return!1}if(8===a.type)return!1;if(3===a.type&&!n.test(a.value))return!1}while(a=e(a,o));return!0},walk:function(t){return e(this,null,t)}},t.create=function(e,n){var i,o;if(i=new t(e,r[e]||1),n)for(o in n)i.attr(o,n[o]);return i},t}),r(_,[c],function(e){function t(e,t){return e?e.split(t||" "):[]}function n(e){function n(e,n,r){function i(e){var t,n,r={};for(t=0,n=e.length;n>t;t++)r[e[t]]={};return r}var a,s,l,c=arguments;for(r=r||[],n=n||"","string"==typeof r&&(r=t(r)),s=3;s<c.length;s++)"string"==typeof c[s]&&(c[s]=t(c[s])),r.push.apply(r,c[s]);for(e=t(e),a=e.length;a--;)l=[].concat(o,t(n)),f[e[a]]={attributes:i(l),attributesOrder:l,children:i(r)}}function r(e,n){var r,i,o,a;for(e=t(e),r=e.length,n=t(n);r--;)for(i=f[e[r]],o=0,a=n.length;a>o;o++)i.attributes[n[o]]={},i.attributesOrder.push(n[o])}var o,s,l,c,d,u,f={};return i[e]?i[e]:(o=t("id accesskey class dir lang style tabindex title"),s=t("address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul"),l=t("a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment"),"html4"!=e&&(o.push.apply(o,t("contenteditable contextmenu draggable dropzone hidden spellcheck translate")),s.push.apply(s,t("article aside details dialog figure header footer hgroup section nav")),l.push.apply(l,t("audio canvas command datalist mark meter output progress time wbr video ruby bdi keygen"))),"html5-strict"!=e&&(o.push("xml:lang"),u=t("acronym applet basefont big font strike tt"),l.push.apply(l,u),a(u,function(e){n(e,"",l)}),d=t("center dir isindex noframes"),s.push.apply(s,d),c=[].concat(s,l),a(d,function(e){n(e,"",c)})),c=c||[].concat(s,l),n("html","manifest","head body"),n("head","","base command link meta noscript script style title"),n("title hr noscript br"),n("base","href target"),n("link","href rel media hreflang type sizes hreflang"),n("meta","name http-equiv content charset"),n("style","media type scoped"),n("script","src async defer type charset"),n("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",c),n("address dt dd div caption","",c),n("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",l),n("blockquote","cite",c),n("ol","reversed start type","li"),n("ul","","li"),n("li","value",c),n("dl","","dt dd"),n("a","href target rel media hreflang type",l),n("q","cite",l),n("ins del","cite datetime",c),n("img","src alt usemap ismap width height"),n("iframe","src name width height",c),n("embed","src type width height"),n("object","data type typemustmatch name usemap form width height",c,"param"),n("param","name value"),n("map","name",c,"area"),n("area","alt coords shape href target rel media hreflang type"),n("table","border","caption colgroup thead tfoot tbody tr"+("html4"==e?" col":"")),n("colgroup","span","col"),n("col","span"),n("tbody thead tfoot","","tr"),n("tr","","td th"),n("td","colspan rowspan headers",c),n("th","colspan rowspan headers scope abbr",c),n("form","accept-charset action autocomplete enctype method name novalidate target",c),n("fieldset","disabled form name",c,"legend"),n("label","form for",l),n("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),n("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==e?c:l),n("select","disabled form multiple name required size","option optgroup"),n("optgroup","disabled label","option"),n("option","disabled label selected value"),n("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),n("menu","type label",c,"li"),n("noscript","",c),"html4"!=e&&(n("wbr"),n("ruby","",l,"rt rp"),n("figcaption","",c),n("mark rt rp summary bdi","",l),n("canvas","width height",c),n("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",c,"track source"),n("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",c,"track source"),n("source","src type media"),n("track","kind src srclang label default"),n("datalist","",l,"option"),n("article section nav aside header footer","",c),n("hgroup","","h1 h2 h3 h4 h5 h6"),n("figure","",c,"figcaption"),n("time","datetime",l),n("dialog","open",c),n("command","type label icon disabled checked radiogroup command"),n("output","for form name",l),n("progress","value max",l),n("meter","value min max low high optimum",l),n("details","open",c,"summary"),n("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!=e&&(r("script","language xml:space"),r("style","xml:space"),r("object","declare classid code codebase codetype archive standby align border hspace vspace"),r("embed","align name hspace vspace"),r("param","valuetype type"),r("a","charset name rev shape coords"),r("br","clear"),r("applet","codebase archive code object alt name width height align hspace vspace"),r("img","name longdesc align border hspace vspace"),r("iframe","longdesc frameborder marginwidth marginheight scrolling align"),r("font basefont","size color face"),r("input","usemap align"),r("select","onchange"),r("textarea"),r("h1 h2 h3 h4 h5 h6 div p legend caption","align"),r("ul","type compact"),r("li","type"),r("ol dl menu dir","compact"),r("pre","width xml:space"),r("hr","align noshade size width"),r("isindex","prompt"),r("table","summary width frame rules cellspacing cellpadding align bgcolor"),r("col","width align char charoff valign"),r("colgroup","width align char charoff valign"),r("thead","align char charoff valign"),r("tr","align char charoff valign bgcolor"),r("th","axis align char charoff valign nowrap bgcolor width height"),r("form","accept"),r("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),r("tfoot","align char charoff valign"),r("tbody","align char charoff valign"),r("area","nohref"),r("body","background bgcolor text link vlink alink")),"html4"!=e&&(r("input button select textarea","autofocus"),r("input textarea","placeholder"),r("a","download"),r("link script img","crossorigin"),r("iframe","sandbox seamless allowfullscreen")),a(t("a form meter progress dfn"),function(e){f[e]&&delete f[e].children[e]}),delete f.caption.children.table,i[e]=f,f)}function r(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),a(e,function(e,r){n[r]="map"==t?o(e,/[, ]/):l(e,/[, ]/)})),n}var i={},o=e.makeMap,a=e.each,s=e.extend,l=e.explode,c=e.inArray;return function(e){function d(t,n,r){var a=e[t];return a?a=o(a,/[, ]/,o(a.toUpperCase(),/[, ]/)):(a=i[t],a||(a=o(n," ",o(n.toUpperCase()," ")),a=s(a,r),i[t]=a)),a}function u(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function f(e){var n,r,i,a,s,l,d,f,m,p,h,g,v,y,b,x,C,w,_,k=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,N=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,S=/[*?+]/;if(e)for(e=t(e,","),A["@"]&&(x=A["@"].attributes,C=A["@"].attributesOrder),n=0,r=e.length;r>n;n++)if(s=k.exec(e[n])){if(y=s[1],m=s[2],b=s[3],f=s[5],g={},v=[],l={attributes:g,attributesOrder:v},"#"===y&&(l.paddEmpty=!0),"-"===y&&(l.removeEmpty=!0),"!"===s[4]&&(l.removeEmptyAttrs=!0),x){for(w in x)g[w]=x[w];v.push.apply(v,C)}if(f)for(f=t(f,"|"),i=0,a=f.length;a>i;i++)if(s=N.exec(f[i])){if(d={},h=s[1],p=s[2].replace(/::/g,":"),y=s[3],_=s[4],"!"===h&&(l.attributesRequired=l.attributesRequired||[],l.attributesRequired.push(p),d.required=!0),"-"===h){delete g[p],v.splice(c(v,p),1);continue}y&&("="===y&&(l.attributesDefault=l.attributesDefault||[],l.attributesDefault.push({name:p,value:_}),d.defaultValue=_),":"===y&&(l.attributesForced=l.attributesForced||[],l.attributesForced.push({name:p,value:_}),d.forcedValue=_),"<"===y&&(d.validValues=o(_,"?"))),S.test(p)?(l.attributePatterns=l.attributePatterns||[],d.pattern=u(p),l.attributePatterns.push(d)):(g[p]||v.push(p),g[p]=d)}x||"@"!=m||(x=g,C=v),b&&(l.outputName=m,A[b]=l),S.test(m)?(l.pattern=u(m),P.push(l)):A[m]=l}}function m(e){A={},P=[],f(e),a(b,function(e,t){B[t]=e.children})}function p(e){var n=/^(~)?(.+)$/;e&&(i.text_block_elements=i.block_elements=null,a(t(e,","),function(e){var t=n.exec(e),r="~"===t[1],i=r?"span":"div",o=t[2];if(B[o]=B[i],D[o]=i,r||(N[o.toUpperCase()]={},N[o]={}),!A[o]){var l=A[i];l=s({},l),delete l.removeEmptyAttrs,delete l.removeEmpty,A[o]=l}a(B,function(e,t){e[i]&&(B[t]=e=s({},B[t]),e[o]=e[i])})}))}function h(e){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;e&&a(t(e,","),function(e){var r,i,o=n.exec(e);o&&(i=o[1],r=i?B[o[2]]:B[o[2]]={"#comment":{}},r=B[o[2]],a(t(o[3],"|"),function(e){"-"===i?(B[o[2]]=r=s({},B[o[2]]),delete r[e]):r[e]={}}))})}function g(e){var t,n=A[e];if(n)return n;for(t=P.length;t--;)if(n=P[t],n.pattern.test(e))return n}var v,y,b,x,C,w,_,k,N,S,E,T,R=this,A={},B={},P=[],D={},M={};e=e||{},b=n(e.schema),e.verify_html===!1&&(e.valid_elements="*[*]"),v=r(e.valid_styles),y=r(e.invalid_styles,"map"),k=r(e.valid_classes,"map"),x=d("whitespace_elements","pre script noscript style textarea video audio iframe object"),C=d("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),w=d("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),_=d("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),S=d("non_empty_elements","td th iframe video audio object script",w),E=d("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),N=d("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup",E),T=d("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),a((e.special||"script noscript style textarea").split(" "),function(e){M[e]=new RegExp("</"+e+"[^>]*>","gi")}),e.valid_elements?m(e.valid_elements):(a(b,function(e,t){A[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},B[t]=e.children}),"html5"!=e.schema&&a(t("strong/b em/i"),function(e){e=t(e,"/"),A[e[1]].outputName=e[0]}),A.img.attributesDefault=[{name:"alt",value:""}],a(t("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){A[e]&&(A[e].removeEmpty=!0)}),a(t("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(e){A[e].paddEmpty=!0}),a(t("span"),function(e){A[e].removeEmptyAttrs=!0})),p(e.custom_elements),h(e.valid_children),f(e.extended_valid_elements),h("+ol[ul|ol],+ul[ul|ol]"),e.invalid_elements&&a(l(e.invalid_elements),function(e){A[e]&&delete A[e]}),g("span")||f("span[!data-mce-type|*]"),R.children=B,R.getValidStyles=function(){return v},R.getInvalidStyles=function(){return y},R.getValidClasses=function(){return k},R.getBoolAttrs=function(){return _},R.getBlockElements=function(){return N},R.getTextBlockElements=function(){return E},R.getTextInlineElements=function(){return T},R.getShortEndedElements=function(){return w},R.getSelfClosingElements=function(){return C},R.getNonEmptyElements=function(){return S},R.getWhiteSpaceElements=function(){return x},R.getSpecialElements=function(){return M},R.isValidChild=function(e,t){var n=B[e];return!(!n||!n[t])},R.isValid=function(e,t){var n,r,i=g(e);if(i){if(!t)return!0;if(i.attributes[t])return!0;if(n=i.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},R.getElementRule=g,R.getCustomElements=function(){return D},R.addValidElements=f,R.setValidElements=m,R.addCustomElements=p,R.addValidChildren=h,R.elements=A}}),r(k,[_,h,c],function(e,t,n){function r(e,t,n){var r,i,o,a,s=1;for(a=e.getShortEndedElements(),o=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g,o.lastIndex=r=n;i=o.exec(t);){if(r=o.lastIndex,"/"===i[1])s--;else if(!i[1]){if(i[2]in a)continue;s++}if(0===s)break}return r}function i(i,a){function s(){}var l=this;i=i||{},l.schema=a=a||new e,i.fix_self_closing!==!1&&(i.fix_self_closing=!0),o("comment cdata text start end pi doctype".split(" "),function(e){e&&(l[e]=i[e]||s)}),l.parse=function(e){function o(e){var t,n;for(t=F.length;t--&&F[t].name!==e;);if(t>=0){for(n=F.length-1;n>=t;n--)e=F[n],e.valid&&O.end(e.name);F.length=t}}function s(e,t,n,r,o){var a,s,l=/[\s\u0000-\u001F]+/g;if(t=t.toLowerCase(),n=t in y?t:W(n||r||o||""),x&&!h&&0!==t.indexOf("data-")){if(a=N[t],!a&&S){for(s=S.length;s--&&(a=S[s],!a.pattern.test(t)););-1===s&&(a=null)}if(!a)return;if(a.validValues&&!(n in a.validValues))return}if(U[t]&&!i.allow_script_urls){var c=n.replace(l,"");try{c=decodeURIComponent(c)}catch(e){c=unescape(c)}if(V.test(c))return;if(!i.allow_html_data_urls&&$.test(c)&&!/^data:image\//i.test(c))return}u.map[t]=n,u.push({name:t,value:n})}var l,c,d,u,f,m,p,h,g,v,y,b,x,C,w,_,k,N,S,E,T,R,A,B,P,D,M,L,I,O=this,H=0,F=[],z=0,W=t.decode,U=n.makeMap("src,href,data,background,formaction,poster"),V=/((java|vb)script|mhtml):/i,$=/^data:/i;for(P=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),D=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,v=a.getShortEndedElements(),B=i.self_closing_elements||a.getSelfClosingElements(),y=a.getBoolAttrs(),x=i.validate,g=i.remove_internals,I=i.fix_self_closing,M=a.getSpecialElements();l=P.exec(e);){if(H<l.index&&O.text(W(e.substr(H,l.index-H))),c=l[6])c=c.toLowerCase(),":"===c.charAt(0)&&(c=c.substr(1)),o(c);else if(c=l[7]){if(c=c.toLowerCase(),":"===c.charAt(0)&&(c=c.substr(1)),b=c in v,I&&B[c]&&F.length>0&&F[F.length-1].name===c&&o(c),!x||(C=a.getElementRule(c))){if(w=!0,x&&(N=C.attributes,S=C.attributePatterns),(k=l[8])?(h=-1!==k.indexOf("data-mce-type"),h&&g&&(w=!1),u=[],u.map={},k.replace(D,s)):(u=[],u.map={}),x&&!h){if(E=C.attributesRequired,T=C.attributesDefault,R=C.attributesForced,A=C.removeEmptyAttrs,A&&!u.length&&(w=!1),R)for(f=R.length;f--;)_=R[f],p=_.name,L=_.value,"{$uid}"===L&&(L="mce_"+z++),u.map[p]=L,u.push({name:p,value:L});if(T)for(f=T.length;f--;)_=T[f],p=_.name,p in u.map||(L=_.value,"{$uid}"===L&&(L="mce_"+z++),u.map[p]=L,u.push({name:p,value:L}));if(E){for(f=E.length;f--&&!(E[f]in u.map););-1===f&&(w=!1)}if(_=u.map["data-mce-bogus"]){if("all"===_){H=r(a,e,P.lastIndex),P.lastIndex=H;continue}w=!1}}w&&O.start(c,u,b)}else w=!1;if(d=M[c]){d.lastIndex=H=l.index+l[0].length,(l=d.exec(e))?(w&&(m=e.substr(H,l.index-H)),H=l.index+l[0].length):(m=e.substr(H),H=e.length),w&&(m.length>0&&O.text(m,!0),O.end(c)),P.lastIndex=H;continue}b||(k&&k.indexOf("/")==k.length-1?w&&O.end(c):F.push({name:c,valid:w}))}else(c=l[1])?(">"===c.charAt(0)&&(c=" "+c),i.allow_conditional_comments||"[if"!==c.substr(0,3)||(c=" "+c),O.comment(c)):(c=l[2])?O.cdata(c):(c=l[3])?O.doctype(c):(c=l[4])&&O.pi(c,l[5]);H=l.index+l[0].length}for(H<e.length&&O.text(W(e.substr(H))),f=F.length-1;f>=0;f--)c=F[f],c.valid&&O.end(c.name)}}var o=n.each;return i.findEndTag=r,i}),r(N,[w,_,k,c],function(e,t,n,r){var i=r.makeMap,o=r.each,a=r.explode,s=r.extend;return function(r,l){function c(t){var n,r,o,a,s,c,u,f,m,p,h,g,v,y;for(h=i("tr,td,th,tbody,thead,tfoot,table"),p=l.getNonEmptyElements(),g=l.getTextBlockElements(),n=0;n<t.length;n++)if(r=t[n],r.parent&&!r.fixed)if(g[r.name]&&"li"==r.parent.name){for(v=r.next;v&&g[v.name];)v.name="li",v.fixed=!0,r.parent.insert(v,r.parent),v=v.next;r.unwrap(r)}else{for(a=[r],o=r.parent;o&&!l.isValidChild(o.name,r.name)&&!h[o.name];o=o.parent)a.push(o);if(o&&a.length>1){for(a.reverse(),s=c=d.filterNode(a[0].clone()),m=0;m<a.length-1;m++){for(l.isValidChild(c.name,a[m].name)?(u=d.filterNode(a[m].clone()),c.append(u)):u=c,f=a[m].firstChild;f&&f!=a[m+1];)y=f.next,u.append(f),f=y;c=u}s.isEmpty(p)?o.insert(r,a[0],!0):(o.insert(s,a[0],!0),o.insert(r,s)),o=a[0],(o.isEmpty(p)||o.firstChild===o.lastChild&&"br"===o.firstChild.name)&&o.empty().remove()}else if(r.parent){if("li"===r.name){if(v=r.prev,v&&("ul"===v.name||"ul"===v.name)){v.append(r);continue}if(v=r.next,v&&("ul"===v.name||"ul"===v.name)){v.insert(r,v.firstChild,!0);continue}r.wrap(d.filterNode(new e("ul",1)));continue}l.isValidChild(r.parent.name,"div")&&l.isValidChild("div",r.name)?r.wrap(d.filterNode(new e("div",1))):"style"===r.name||"script"===r.name?r.empty().remove():r.unwrap()}}}var d=this,u={},f=[],m={},p={};r=r||{},r.validate=!("validate"in r)||r.validate,r.root_name=r.root_name||"body",d.schema=l=l||new t,d.filterNode=function(e){var t,n,r;n in u&&(r=m[n],r?r.push(e):m[n]=[e]),t=f.length;for(;t--;)n=f[t].name,n in e.attributes.map&&(r=p[n],r?r.push(e):p[n]=[e]);return e},d.addNodeFilter=function(e,t){o(a(e),function(e){var n=u[e];n||(u[e]=n=[]),n.push(t)})},d.addAttributeFilter=function(e,t){o(a(e),function(e){var n;for(n=0;n<f.length;n++)if(f[n].name===e)return void f[n].callbacks.push(t);f.push({name:e,callbacks:[t]})})},d.parse=function(t,o){function a(){function e(e){e&&(i=e.firstChild,i&&3==i.type&&(i.value=i.value.replace(R,"")),i=e.lastChild,i&&3==i.type&&(i.value=i.value.replace(B,"")))}var t,n,i=y.firstChild;if(l.isValidChild(y.name,O.toLowerCase())){for(;i;)t=i.next,3==i.type||1==i.type&&"p"!==i.name&&!T[i.name]&&!i.attr("data-mce-type")?n?n.append(i):(n=d(O,1),n.attr(r.forced_root_block_attrs),y.insert(n,i),n.append(i)):(e(n),n=null),i=t;e(n)}}function d(t,n){var r,i=new e(t,n);return t in u&&(r=m[t],r?r.push(i):m[t]=[i]),i}function h(e){var t,n,r;for(t=e.prev;t&&3===t.type;)n=t.value.replace(B,""),n.length>0?(t.value=n,t=t.prev):(r=t.prev,t.remove(),t=r)}function g(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n}var v,y,b,x,C,w,_,k,N,S,E,T,R,A,B,P,D,M,L,I,O,H=[];if(o=o||{},m={},p={},T=s(i("script,style,head,html,body,title,meta,param"),l.getBlockElements()),I=l.getNonEmptyElements(),L=l.children,E=r.validate,O="forced_root_block"in o?o.forced_root_block:r.forced_root_block,M=l.getWhiteSpaceElements(),R=/^[ \t\r\n]+/,B=/[ \t\r\n]+$/,P=/[ \t\r\n]+/g,D=/^[ \t\r\n]+$/,v=new n({validate:E,allow_script_urls:r.allow_script_urls,allow_conditional_comments:r.allow_conditional_comments,self_closing_elements:g(l.getSelfClosingElements()),cdata:function(e){b.append(d("#cdata",4)).value=e},text:function(e,t){var n;A||(e=e.replace(P," "),b.lastChild&&T[b.lastChild.name]&&(e=e.replace(R,""))),0!==e.length&&(n=d("#text",3),n.raw=!!t,b.append(n).value=e)},comment:function(e){b.append(d("#comment",8)).value=e},pi:function(e,t){b.append(d(e,7)).value=t,h(b)},doctype:function(e){var t;t=b.append(d("#doctype",10)),t.value=e,h(b)},start:function(e,t,n){var r,i,o,a,s;if(o=E?l.getElementRule(e):{}){for(r=d(o.outputName||e,1),r.attributes=t,r.shortEnded=n,b.append(r),s=L[b.name],s&&L[r.name]&&!s[r.name]&&H.push(r),i=f.length;i--;)a=f[i].name,a in t.map&&(N=p[a],N?N.push(r):p[a]=[r]);T[e]&&h(r),n||(b=r),!A&&M[e]&&(A=!0)}},end:function(t){var n,r,i,o,a;if(r=E?l.getElementRule(t):{}){if(T[t]&&!A){if(n=b.firstChild,n&&3===n.type)if(i=n.value.replace(R,""),i.length>0)n.value=i,n=n.next;else for(o=n.next,n.remove(),n=o;n&&3===n.type;)i=n.value,o=n.next,(0===i.length||D.test(i))&&(n.remove(),n=o),n=o;if(n=b.lastChild,n&&3===n.type)if(i=n.value.replace(B,""),i.length>0)n.value=i,n=n.prev;else for(o=n.prev,n.remove(),n=o;n&&3===n.type;)i=n.value,o=n.prev,(0===i.length||D.test(i))&&(n.remove(),n=o),n=o}if(A&&M[t]&&(A=!1),(r.removeEmpty||r.paddEmpty)&&b.isEmpty(I))if(r.paddEmpty)b.empty().append(new e("#text","3")).value=" ";else if(!b.attributes.map.name&&!b.attributes.map.id)return a=b.parent,b.unwrap(),void(b=a);b=b.parent}}},l),y=b=new e(o.context||r.root_name,11),v.parse(t),E&&H.length&&(o.context?o.invalid=!0:c(H)),O&&("body"==y.name||o.isRootContent)&&a(),!o.invalid){for(S in m){for(N=u[S],x=m[S],_=x.length;_--;)x[_].parent||x.splice(_,1);for(C=0,w=N.length;w>C;C++)N[C](x,S,o)}for(C=0,w=f.length;w>C;C++)if(N=f[C],N.name in p){for(x=p[N.name],_=x.length;_--;)x[_].parent||x.splice(_,1);for(_=0,k=N.callbacks.length;k>_;_++)N.callbacks[_](x,N.name,o)}}return y},r.remove_trailing_brs&&d.addNodeFilter("br",function(t){var n,r,i,o,a,c,d,u,f=t.length,m=s({},l.getBlockElements()),p=l.getNonEmptyElements();for(m.body=1,n=0;f>n;n++)if(r=t[n],i=r.parent,m[r.parent.name]&&r===i.lastChild){for(a=r.prev;a;){if(c=a.name,"span"!==c||"bookmark"!==a.attr("data-mce-type")){if("br"!==c)break;if("br"===c){r=null;break}}a=a.prev}r&&(r.remove(),i.isEmpty(p)&&(d=l.getElementRule(i.name),d&&(d.removeEmpty?i.remove():d.paddEmpty&&(i.empty().append(new e("#text",3)).value=" "))))}else{for(o=r;i&&i.firstChild===o&&i.lastChild===o&&(o=i,!m[i.name]);)i=i.parent;o===i&&(u=new e("#text",3),u.value=" ",r.replace(u))}}),r.allow_html_in_named_anchor||d.addAttributeFilter("id,name",function(e){for(var t,n,r,i,o=e.length;o--;)if(i=e[o],"a"===i.name&&i.firstChild&&!i.attr("href")){r=i.parent,t=i.lastChild;do n=t.prev,r.insert(t,i),t=n;while(t)}}),r.validate&&l.getValidClasses()&&d.addAttributeFilter("class",function(e){for(var t,n,r,i,o,a,s,c=e.length,d=l.getValidClasses();c--;){for(t=e[c],n=t.attr("class").split(" "),o="",r=0;r<n.length;r++)i=n[r],s=!1,a=d["*"],a&&a[i]&&(s=!0),a=d[t.name],s||!a||a[i]||(s=!0),s&&(o&&(o+=" "),o+=i);o.length||(o=null),t.attr("class",o)}})}}),r(S,[h,c],function(e,t){var n=t.makeMap;return function(t){
var r,i,o,a,s,l=[];return t=t||{},r=t.indent,i=n(t.indent_before||""),o=n(t.indent_after||""),a=e.getEncodeFunc(t.entity_encoding||"raw",t.entities),s="html"==t.element_format,{start:function(e,t,n){var c,d,u,f;if(r&&i[e]&&l.length>0&&(f=l[l.length-1],f.length>0&&"\n"!==f&&l.push("\n")),l.push("<",e),t)for(c=0,d=t.length;d>c;c++)u=t[c],l.push(" ",u.name,'="',a(u.value,!0),'"');l[l.length]=!n||s?">":" />",n&&r&&o[e]&&l.length>0&&(f=l[l.length-1],f.length>0&&"\n"!==f&&l.push("\n"))},end:function(e){var t;l.push("</",e,">"),r&&o[e]&&l.length>0&&(t=l[l.length-1],t.length>0&&"\n"!==t&&l.push("\n"))},text:function(e,t){e.length>0&&(l[l.length]=t?e:a(e))},cdata:function(e){l.push("<![CDATA[",e,"]]>")},comment:function(e){l.push("<!--",e,"-->")},pi:function(e,t){t?l.push("<?",e," ",t,"?>"):l.push("<?",e,"?>"),r&&l.push("\n")},doctype:function(e){l.push("<!DOCTYPE",e,">",r?"\n":"")},reset:function(){l.length=0},getContent:function(){return l.join("").replace(/\n$/,"")}}}}),r(E,[S,_],function(e,t){return function(n,r){var i=this,o=new e(n);n=n||{},n.validate=!("validate"in n)||n.validate,i.schema=r=r||new t,i.writer=o,i.serialize=function(e){function t(e){var n,s,l,c,d,u,f,m,p,h=i[e.type];if(h)h(e);else{if(n=e.name,s=e.shortEnded,l=e.attributes,a&&l&&l.length>1){for(u=[],u.map={},p=r.getElementRule(e.name),f=0,m=p.attributesOrder.length;m>f;f++)c=p.attributesOrder[f],c in l.map&&(d=l.map[c],u.map[c]=d,u.push({name:c,value:d}));for(f=0,m=l.length;m>f;f++)c=l[f].name,c in u.map||(d=l.map[c],u.map[c]=d,u.push({name:c,value:d}));l=u}if(o.start(e.name,l,s),!s){if(e=e.firstChild)do t(e);while(e=e.next);o.end(n)}}}var i,a;return a=n.validate,i={3:function(e){o.text(e.value,e.raw)},8:function(e){o.comment(e.value)},7:function(e){o.pi(e.name,e.value)},10:function(e){o.doctype(e.value)},4:function(e){o.cdata(e.value)},11:function(e){if(e=e.firstChild)do t(e);while(e=e.next)}},o.reset(),1!=e.type||n.inner?i[11](e):t(e),o.getContent()}}}),r(T,[v,N,h,E,w,_,d,c],function(e,t,n,r,i,o,a,s){var l=s.each,c=s.trim,d=e.DOM;return function(e,i){var s,u,f;return i&&(s=i.dom,u=i.schema),s=s||d,u=u||new o(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs=!("remove_trailing_brs"in e)||e.remove_trailing_brs,f=new t(e,u),f.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,r=e.length;r--;)n=e[r],n.attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)}),f.addAttributeFilter("src,href,style",function(t,n){for(var r,i,o,a=t.length,l="data-mce-"+n,c=e.url_converter,d=e.url_converter_scope;a--;)r=t[a],i=r.attributes.map[l],i!==o?(r.attr(n,i.length>0?i:null),r.attr(l,null)):(i=r.attributes.map[n],"style"===n?i=s.serializeStyle(s.parseStyle(i),r.name):c&&(i=c.call(d,i,n,r.name)),r.attr(n,i.length>0?i:null))}),f.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)t=e[r],n=t.attr("class"),n&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",n.length>0?n:null))}),f.addAttributeFilter("data-mce-type",function(e,t,n){for(var r,i=e.length;i--;)r=e[i],"bookmark"!==r.attributes.map["data-mce-type"]||n.cleanup||r.remove()}),f.addNodeFilter("noscript",function(e){for(var t,r=e.length;r--;)t=e[r].firstChild,t&&(t.value=n.decode(t.value))}),f.addNodeFilter("script,style",function(e,t){function n(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var r,i,o,a=e.length;a--;)r=e[a],i=r.firstChild?r.firstChild.value:"","script"===t?(o=r.attr("type"),o&&r.attr("type","mce-no/type"==o?null:o.replace(/^mce\-/,"")),i.length>0&&(r.firstChild.value="// <![CDATA[\n"+n(i)+"\n// ]]>")):i.length>0&&(r.firstChild.value="<!--\n"+n(i)+"\n-->")}),f.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)t=e[n],0===t.value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),f.addNodeFilter("xml:namespace,input",function(e,t){for(var n,r=e.length;r--;)n=e[r],7===n.type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),e.fix_list_elements&&f.addNodeFilter("ul,ol",function(e){for(var t,n,r=e.length;r--;)t=e[r],n=t.parent,("ul"===n.name||"ol"===n.name)&&t.prev&&"li"===t.prev.name&&t.prev.append(t)}),f.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:function(t,n){var i,o,d,m,p,h=this;return a.ie&&s.select("script,style,select,map").length>0?(p=t.innerHTML,t=t.cloneNode(!1),s.setHTML(t,p)):t=t.cloneNode(!0),i=t.ownerDocument.implementation,i.createHTMLDocument&&(o=i.createHTMLDocument(""),l("BODY"==t.nodeName?t.childNodes:[t],function(e){o.body.appendChild(o.importNode(e,!0))}),t="BODY"!=t.nodeName?o.body.firstChild:o.body,d=s.doc,s.doc=o),n=n||{},n.format=n.format||"html",n.selection&&(n.forced_root_block=""),n.no_events||(n.node=t,h.onPreProcess(n)),m=new r(e,u),n.content=m.serialize(f.parse(c(n.getInner?t.innerHTML:s.getOuterHTML(t)),n)),n.cleanup||(n.content=n.content.replace(/\uFEFF/g,"")),n.no_events||h.onPostProcess(n),d&&(s.doc=d),n.node=null,n.content},addRules:function(e){u.addValidElements(e)},setRules:function(e){u.setValidElements(e)},onPreProcess:function(e){i&&i.fire("PreProcess",e)},onPostProcess:function(e){i&&i.fire("PostProcess",e)}}}}),r(R,[],function(){function e(e){function t(t,n){var r,i,o,a,s,l,c,d,u=0,f=-1;if(r=t.duplicate(),r.collapse(n),d=r.parentElement(),d.ownerDocument===e.dom.doc){for(;"false"===d.contentEditable;)d=d.parentNode;if(!d.hasChildNodes())return{node:d,inside:1};for(a=d.children,i=a.length-1;i>=u;)if(c=Math.floor((u+i)/2),s=a[c],r.moveToElementText(s),f=r.compareEndPoints(n?"StartToStart":"EndToEnd",t),f>0)i=c-1;else{if(!(0>f))return{node:s};u=c+1}if(0>f)for(s?r.collapse(!1):(r.moveToElementText(d),r.collapse(!0),s=d,o=!0),l=0;0!==r.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==r.move("character",1)&&d==r.parentElement();)l++;else for(r.collapse(!0),l=0;0!==r.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==r.move("character",-1)&&d==r.parentElement();)l++;return{node:s,position:f,offset:l,inside:o}}}function n(){function n(e){var n,r,i,o,a,s=t(d,e),l=0;if(n=s.node,r=s.offset,s.inside&&!n.hasChildNodes())return void u[e?"setStart":"setEnd"](n,0);if(r===o)return void u[e?"setStartBefore":"setEndAfter"](n);if(s.position<0){if(i=s.inside?n.firstChild:n.nextSibling,!i)return void u[e?"setStartAfter":"setEndAfter"](n);if(!r)return void(3==i.nodeType?u[e?"setStart":"setEnd"](i,0):u[e?"setStartBefore":"setEndBefore"](i));for(;i;){if(3==i.nodeType&&(a=i.nodeValue,l+=a.length,l>=r)){n=i,l-=r,l=a.length-l;break}i=i.nextSibling}}else{if(i=n.previousSibling,!i)return u[e?"setStartBefore":"setEndBefore"](n);if(!r)return void(3==n.nodeType?u[e?"setStart":"setEnd"](i,n.nodeValue.length):u[e?"setStartAfter":"setEndAfter"](i));for(;i;){if(3==i.nodeType&&(l+=i.nodeValue.length,l>=r)){n=i,l-=r;break}i=i.previousSibling}}u[e?"setStart":"setEnd"](n,l)}var o,a,s,l,c,d=e.getRng(),u=i.createRng();if(o=d.item?d.item(0):d.parentElement(),o.ownerDocument!=i.doc)return u;if(a=e.isCollapsed(),d.item)return u.setStart(o.parentNode,i.nodeIndex(o)),u.setEnd(u.startContainer,u.startOffset+1),u;try{n(!0),a||n()}catch(t){if(-2147024809!=t.number)throw t;c=r.getBookmark(2),s=d.duplicate(),s.collapse(!0),o=s.parentElement(),a||(s=d.duplicate(),s.collapse(!1),l=s.parentElement(),l.innerHTML=l.innerHTML),o.innerHTML=o.innerHTML,r.moveToBookmark(c),d=e.getRng(),n(!0),a||n()}return u}var r=this,i=e.dom,o=!1;this.getBookmark=function(n){function r(e){var t,n,r,o,a=[];for(t=e.parentNode,n=i.getRoot().parentNode;t!=n&&9!==t.nodeType;){for(r=t.children,o=r.length;o--;)if(e===r[o]){a.push(o);break}e=t,t=t.parentNode}return a}function o(e){var n;return n=t(a,e),n?{position:n.position,offset:n.offset,indexes:r(n.node),inside:n.inside}:void 0}var a=e.getRng(),s={};return 2===n&&(a.item?s.start={ctrl:!0,indexes:r(a.item(0))}:(s.start=o(!0),e.isCollapsed()||(s.end=o()))),s},this.moveToBookmark=function(e){function t(e){var t,n,r,o;for(t=i.getRoot(),n=e.length-1;n>=0;n--)o=t.children,r=e[n],r<=o.length-1&&(t=o[r]);return t}function n(n){var i,a,s,l,c=e[n?"start":"end"];c&&(i=c.position>0,a=o.createTextRange(),a.moveToElementText(t(c.indexes)),l=c.offset,l!==s?(a.collapse(c.inside||i),a.moveStart("character",i?-l:l)):a.collapse(n),r.setEndPoint(n?"StartToStart":"EndToStart",a),n&&r.collapse(!0))}var r,o=i.doc.body;e.start&&(e.start.ctrl?(r=o.createControlRange(),r.addElement(t(e.start.indexes)),r.select()):(r=o.createTextRange(),n(!0),n(),r.select()))},this.addRange=function(t){function n(e){var t,n,a,u,f;a=i.create("a"),t=e?s:c,n=e?l:d,u=r.duplicate(),(t==p||t==p.documentElement)&&(t=h,n=0),3==t.nodeType?(t.parentNode.insertBefore(a,t),u.moveToElementText(a),u.moveStart("character",n),i.remove(a),r.setEndPoint(e?"StartToStart":"EndToEnd",u)):(f=t.childNodes,f.length?(n>=f.length?i.insertAfter(a,f[f.length-1]):t.insertBefore(a,f[n]),u.moveToElementText(a)):t.canHaveHTML&&(t.innerHTML="<span>&#xFEFF;</span>",a=t.firstChild,u.moveToElementText(a),u.collapse(o)),r.setEndPoint(e?"StartToStart":"EndToEnd",u),i.remove(a))}var r,a,s,l,c,d,u,f,m,p=e.dom.doc,h=p.body;if(s=t.startContainer,l=t.startOffset,c=t.endContainer,d=t.endOffset,r=h.createTextRange(),s==c&&1==s.nodeType){if(l==d&&!s.hasChildNodes()){if(s.canHaveHTML)return u=s.previousSibling,u&&!u.hasChildNodes()&&i.isBlock(u)?u.innerHTML="&#xFEFF;":u=null,s.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>",r.moveToElementText(s.lastChild),r.select(),i.doc.selection.clear(),s.innerHTML="",void(u&&(u.innerHTML=""));l=i.nodeIndex(s),s=s.parentNode}if(l==d-1)try{if(m=s.childNodes[l],a=h.createControlRange(),a.addElement(m),a.select(),f=e.getRng(),f.item&&m===f.item(0))return}catch(e){}}n(!0),n(),r.select()},this.getRangeAt=n}return e}),r(A,[d],function(e){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey},metaKeyPressed:function(t){return e.mac?t.metaKey:t.ctrlKey&&!t.altKey}}}),r(B,[A,c,d],function(e,t,n){return function(r,i){function o(e){var t=i.settings.object_resizing;return t!==!1&&!n.iOS&&("string"!=typeof t&&(t="table,img,div"),"false"!==e.getAttribute("data-mce-resize")&&i.dom.is(e,t))}function a(t){var n,r,o,a,s;n=t.screenX-S,r=t.screenY-E,M=n*k[2]+A,L=r*k[3]+B,M=5>M?5:M,L=5>L?5:L,o="IMG"==x.nodeName&&i.settings.resize_img_proportional!==!1?!e.modifierPressed(t):e.modifierPressed(t)||"IMG"==x.nodeName&&k[2]*k[3]!==0,o&&(V(n)>V(r)?(L=$(M*P),M=$(L/P)):(M=$(L/P),L=$(M*P))),H.setStyles(C,{width:M,height:L}),a=k.startPos.x+n,s=k.startPos.y+r,a=a>0?a:0,s=s>0?s:0,H.setStyles(w,{left:a,top:s,display:"block"}),w.innerHTML=M+" &times; "+L,k[2]<0&&C.clientWidth<=M&&H.setStyle(C,"left",T+(A-M)),k[3]<0&&C.clientHeight<=L&&H.setStyle(C,"top",R+(B-L)),n=q.scrollWidth-I,r=q.scrollHeight-O,n+r!==0&&H.setStyles(w,{left:a-n,top:s-r}),D||(i.fire("ObjectResizeStart",{target:x,width:A,height:B}),D=!0)}function s(){function e(e,t){t&&(x.style[e]||!i.schema.isValid(x.nodeName.toLowerCase(),e)?H.setStyle(x,e,t):H.setAttrib(x,e,t))}D=!1,e("width",M),e("height",L),H.unbind(z,"mousemove",a),H.unbind(z,"mouseup",s),W!=z&&(H.unbind(W,"mousemove",a),H.unbind(W,"mouseup",s)),H.remove(C),H.remove(w),U&&"TABLE"!=x.nodeName||l(x),i.fire("ObjectResized",{target:x,width:M,height:L}),i.nodeChanged()}function l(e,t,r){var l,d,u,f,m;g(),l=H.getPos(e,q),T=l.x,R=l.y,m=e.getBoundingClientRect(),d=m.width||m.right-m.left,u=m.height||m.bottom-m.top,x!=e&&(h(),x=e,M=L=0),f=i.fire("ObjectSelected",{target:e}),o(e)&&!f.isDefaultPrevented()?F(_,function(e,i){function o(t){S=t.screenX,E=t.screenY,A=x.clientWidth,B=x.clientHeight,P=B/A,k=e,e.startPos={x:d*e[0]+T,y:u*e[1]+R},I=q.scrollWidth,O=q.scrollHeight,C=x.cloneNode(!0),H.addClass(C,"mce-clonedresizable"),H.setAttrib(C,"data-mce-bogus","all"),C.contentEditable=!1,C.unSelectabe=!0,H.setStyles(C,{left:T,top:R,margin:0}),C.removeAttribute("data-mce-selected"),q.appendChild(C),H.bind(z,"mousemove",a),H.bind(z,"mouseup",s),W!=z&&(H.bind(W,"mousemove",a),H.bind(W,"mouseup",s)),w=H.add(q,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},A+" &times; "+B)}var l,c;return t?void(i==t&&o(r)):(l=H.get("mceResizeHandle"+i),l?H.show(l):(c=q,l=H.add(c,"div",{id:"mceResizeHandle"+i,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+i+"-resize; margin:0; padding:0"}),n.ie&&(l.contentEditable=!1)),e.elm||(H.bind(l,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),o(e)}),e.elm=l),void H.setStyles(l,{left:d*e[0]+T-l.offsetWidth/2,top:u*e[1]+R-l.offsetHeight/2}))}):c(),x.setAttribute("data-mce-selected","1")}function c(){var e,t;g(),x&&x.removeAttribute("data-mce-selected");for(e in _)t=H.get("mceResizeHandle"+e),t&&(H.unbind(t),H.remove(t))}function d(e){function t(e,t){if(e)do if(e===t)return!0;while(e=e.parentNode)}var n;return F(H.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),n="mousedown"==e.type?e.target:r.getNode(),n=H.$(n).closest(U?"table":"table,img,hr")[0],t(n,q)&&(v(),t(r.getStart(),n)&&t(r.getEnd(),n)&&(!U||n!=r.getStart()&&"IMG"!==r.getStart().nodeName))?void l(n):void c()}function u(e,t,n){e&&e.attachEvent&&e.attachEvent("on"+t,n)}function f(e,t,n){e&&e.detachEvent&&e.detachEvent("on"+t,n)}function m(e){var t,n,r,o,a,s,c,d=e.srcElement;t=d.getBoundingClientRect(),s=N.clientX-t.left,c=N.clientY-t.top;for(n in _)if(r=_[n],o=d.offsetWidth*r[0],a=d.offsetHeight*r[1],V(o-s)<8&&V(a-c)<8){k=r;break}D=!0,i.fire("ObjectResizeStart",{target:x,width:x.clientWidth,height:x.clientHeight}),i.getDoc().selection.empty(),l(d,n,N)}function p(e){var t=e.srcElement;if(t!=x){if(i.fire("ObjectSelected",{target:t}),h(),0===t.id.indexOf("mceResizeHandle"))return void(e.returnValue=!1);("IMG"==t.nodeName||"TABLE"==t.nodeName)&&(c(),x=t,u(t,"resizestart",m))}}function h(){f(x,"resizestart",m)}function g(){for(var e in _){var t=_[e];t.elm&&(H.unbind(t.elm),delete t.elm)}}function v(){try{i.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}}function y(e){var t;if(U){t=z.body.createControlRange();try{return t.addElement(e),t.select(),!0}catch(e){}}}function b(){x=C=null,U&&(h(),f(q,"controlselect",p))}var x,C,w,_,k,N,S,E,T,R,A,B,P,D,M,L,I,O,H=i.dom,F=t.each,z=i.getDoc(),W=document,U=n.ie&&n.ie<11,V=Math.abs,$=Math.round,q=i.getBody();_={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var j=".mce-content-body";return i.contentStyles.push(j+" div.mce-resizehandle {position: absolute;border: 1px solid black;background: #FFF;width: 5px;height: 5px;z-index: 10000}"+j+" .mce-resizehandle:hover {background: #000}"+j+" img[data-mce-selected], hr[data-mce-selected] {outline: 1px solid black;resize: none}"+j+" .mce-clonedresizable {position: absolute;"+(n.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+j+" .mce-resize-helper {background-color: #555;background-color: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}"),i.on("init",function(){U?(i.on("ObjectResized",function(e){"TABLE"!=e.target.nodeName&&(c(),y(e.target))}),u(q,"controlselect",p),i.on("mousedown",function(e){N=e})):(v(),n.ie>=11&&(i.on("mouseup",function(e){var t=e.target.nodeName;/^(TABLE|IMG|HR)$/.test(t)&&(i.selection.select(e.target,"TABLE"==t),i.nodeChanged())}),i.dom.bind(q,"mscontrolselect",function(e){/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"==e.target.tagName&&window.setTimeout(function(){i.selection.select(e.target)},0))}))),i.on("nodechange mousedown mouseup ResizeEditor",d),i.on("keydown keyup",function(e){x&&"TABLE"==x.nodeName&&d(e)}),i.on("hide",c)}),i.on("remove",g),{isResizable:o,showResizeRect:l,hideResizeRect:c,updateResizeRect:d,controlSelect:y,destroy:b}}}),r(P,[d,c],function(e,t){function n(n){var r=n.dom;this.getBookmark=function(e,i){function o(e,n){var i=0;return t.each(r.select(e),function(e,t){e==n&&(i=t)}),i}function a(e){function t(t){var n,r,i,o=t?"start":"end";n=e[o+"Container"],r=e[o+"Offset"],1==n.nodeType&&"TR"==n.nodeName&&(i=n.childNodes,n=i[Math.min(t?r:r-1,i.length-1)],n&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r)))}return t(!0),t(),e}function s(){function e(e,t){var n,a,s=e[t?"startContainer":"endContainer"],l=e[t?"startOffset":"endOffset"],c=[],d=0;if(3==s.nodeType){if(i)for(n=s.previousSibling;n&&3==n.nodeType;n=n.previousSibling)l+=n.nodeValue.length;c.push(l)}else a=s.childNodes,l>=a.length&&a.length&&(d=1,l=Math.max(0,a.length-1)),c.push(r.nodeIndex(a[l],i)+d);for(;s&&s!=o;s=s.parentNode)c.push(r.nodeIndex(s,i));return c}var t=n.getRng(!0),o=r.getRoot(),a={};return a.start=e(t,!0),n.isCollapsed()||(a.end=e(t)),a}var l,c,d,u,f,m,p,h="&#xFEFF;";if(2==e)return m=n.getNode(),f=m?m.nodeName:null,"IMG"==f?{name:f,index:o(f,m)}:n.tridentSel?n.tridentSel.getBookmark(e):s();if(e)return{rng:n.getRng()};if(l=n.getRng(),d=r.uniqueId(),u=n.isCollapsed(),p="overflow:hidden;line-height:0px",l.duplicate||l.item){if(l.item)return m=l.item(0),f=m.nodeName,{name:f,index:o(f,m)};c=l.duplicate();try{l.collapse(),l.pasteHTML('<span data-mce-type="bookmark" id="'+d+'_start" style="'+p+'">'+h+"</span>"),u||(c.collapse(!1),l.moveToElementText(c.parentElement()),0===l.compareEndPoints("StartToEnd",c)&&c.move("character",-1),c.pasteHTML('<span data-mce-type="bookmark" id="'+d+'_end" style="'+p+'">'+h+"</span>"))}catch(e){return null}}else{if(m=n.getNode(),f=m.nodeName,"IMG"==f)return{name:f,index:o(f,m)};c=a(l.cloneRange()),u||(c.collapse(!1),c.insertNode(r.create("span",{"data-mce-type":"bookmark",id:d+"_end",style:p},h))),l=a(l),l.collapse(!0),l.insertNode(r.create("span",{"data-mce-type":"bookmark",id:d+"_start",style:p},h))}return n.moveToBookmark({id:d,keep:1}),{id:d}},this.moveToBookmark=function(i){function o(e){var t,n,r,o,a=i[e?"start":"end"];if(a){for(r=a[0],n=c,t=a.length-1;t>=1;t--){if(o=n.childNodes,a[t]>o.length-1)return;n=o[a[t]]}3===n.nodeType&&(r=Math.min(a[0],n.nodeValue.length)),1===n.nodeType&&(r=Math.min(a[0],n.childNodes.length)),e?l.setStart(n,r):l.setEnd(n,r)}return!0}function a(n){var o,a,s,l,c=r.get(i.id+"_"+n),p=i.keep;if(c&&(o=c.parentNode,"start"==n?(p?(o=c.firstChild,a=1):a=r.nodeIndex(c),d=u=o,f=m=a):(p?(o=c.firstChild,a=1):a=r.nodeIndex(c),u=o,m=a),!p)){for(l=c.previousSibling,s=c.nextSibling,t.each(t.grep(c.childNodes),function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});c=r.get(i.id+"_"+n);)r.remove(c,1);l&&s&&l.nodeType==s.nodeType&&3==l.nodeType&&!e.opera&&(a=l.nodeValue.length,l.appendData(s.nodeValue),r.remove(s),"start"==n?(d=u=l,f=m=a):(u=l,m=a))}}function s(t){return!r.isBlock(t)||t.innerHTML||e.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t}var l,c,d,u,f,m;if(i)if(i.start){if(l=r.createRng(),c=r.getRoot(),n.tridentSel)return n.tridentSel.moveToBookmark(i);o(!0)&&o()&&n.setRng(l)}else i.id?(a("start"),a("end"),d&&(l=r.createRng(),l.setStart(s(d),f),l.setEnd(s(u),m),n.setRng(l))):i.name?n.select(r.select(i.name)[i.index]):i.rng&&n.setRng(i.rng)}}return n.isBookmarkNode=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},n}),r(D,[m,R,B,x,P,d,c],function(e,n,r,i,o,a,s){function l(e,t,i,a){var s=this;s.dom=e,s.win=t,s.serializer=i,s.editor=a,s.bookmarkManager=new o(s),s.controlSelection=new r(s,a),s.win.getSelection||(s.tridentSel=new n(s))}var c=s.each,d=s.trim,u=a.ie;return l.prototype={setCursorLocation:function(e,t){var n=this,r=n.dom.createRng();e?(r.setStart(e,t),r.setEnd(e,t),n.setRng(r),n.collapse(!1)):(n._moveEndPoint(r,n.editor.getBody(),!0),n.setRng(r))},getContent:function(e){var n,r,i,o=this,a=o.getRng(),s=o.dom.create("body"),l=o.getSel();return e=e||{},n=r="",e.get=!0,e.format=e.format||"html",e.selection=!0,o.editor.fire("BeforeGetContent",e),"text"==e.format?o.isCollapsed()?"":a.text||(l.toString?l.toString():""):(a.cloneContents?(i=a.cloneContents(),i&&s.appendChild(i)):a.item!==t||a.htmlText!==t?(s.innerHTML="<br>"+(a.item?a.item(0).outerHTML:a.htmlText),s.removeChild(s.firstChild)):s.innerHTML=a.toString(),/^\s/.test(s.innerHTML)&&(n=" "),/\s+$/.test(s.innerHTML)&&(r=" "),e.getInner=!0,e.content=o.isCollapsed()?"":n+o.serializer.serialize(s,e)+r,o.editor.fire("GetContent",e),e.content)},setContent:function(e,t){var n,r,i,o=this,a=o.getRng(),s=o.win.document;if(t=t||{format:"html"},t.set=!0,t.selection=!0,e=t.content=e,t.no_events||o.editor.fire("BeforeSetContent",t),e=t.content,a.insertNode){e+='<span id="__caret">_</span>',a.startContainer==s&&a.endContainer==s?s.body.innerHTML=e:(a.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=e:a.createContextualFragment?a.insertNode(a.createContextualFragment(e)):(r=s.createDocumentFragment(),i=s.createElement("div"),r.appendChild(i),i.outerHTML=e,a.insertNode(r))),n=o.dom.get("__caret"),a=s.createRange(),a.setStartBefore(n),a.setEndBefore(n),o.setRng(a),o.dom.remove("__caret");try{o.setRng(a)}catch(e){}}else a.item&&(s.execCommand("Delete",!1,null),a=o.getRng()),/^\s+/.test(e)?(a.pasteHTML('<span id="__mce_tmp">_</span>'+e),o.dom.remove("__mce_tmp")):a.pasteHTML(e);t.no_events||o.editor.fire("SetContent",t)},getStart:function(){var e,t,n,r,i=this,o=i.getRng();if(o.duplicate||o.item){if(o.item)return o.item(0);for(n=o.duplicate(),n.collapse(1),e=n.parentElement(),e.ownerDocument!==i.dom.doc&&(e=i.dom.getRoot()),t=r=o.parentElement();r=r.parentNode;)if(r==e){e=t;break}return e}return e=o.startContainer,1==e.nodeType&&e.hasChildNodes()&&(e=e.childNodes[Math.min(e.childNodes.length-1,o.startOffset)]),e&&3==e.nodeType?e.parentNode:e},getEnd:function(){var e,t,n=this,r=n.getRng();return r.duplicate||r.item?r.item?r.item(0):(r=r.duplicate(),r.collapse(0),e=r.parentElement(),e.ownerDocument!==n.dom.doc&&(e=n.dom.getRoot()),e&&"BODY"==e.nodeName?e.lastChild||e:e):(e=r.endContainer,t=r.endOffset,1==e.nodeType&&e.hasChildNodes()&&(e=e.childNodes[t>0?t-1:t]),e&&3==e.nodeType?e.parentNode:e)},getBookmark:function(e,t){return this.bookmarkManager.getBookmark(e,t)},moveToBookmark:function(e){return this.bookmarkManager.moveToBookmark(e)},select:function(e,t){var n,r=this,i=r.dom,o=i.createRng();if(r.lastFocusBookmark=null,e){if(!t&&r.controlSelection.controlSelect(e))return;n=i.nodeIndex(e),o.setStart(e.parentNode,n),o.setEnd(e.parentNode,n+1),t&&(r._moveEndPoint(o,e,!0),r._moveEndPoint(o,e)),r.setRng(o)}return e},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!(!t||t.item)&&(t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!n||t.collapsed)},collapse:function(e){var t,n=this,r=n.getRng();r.item&&(t=r.item(0),r=n.win.document.body.createTextRange(),r.moveToElementText(t)),r.collapse(!!e),n.setRng(r)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(e){function t(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}}var n,r,i,o,a=this,s=a.win.document;if(!e&&a.lastFocusBookmark){var l=a.lastFocusBookmark;return l.startContainer?(r=s.createRange(),r.setStart(l.startContainer,l.startOffset),r.setEnd(l.endContainer,l.endOffset)):r=l,r}if(e&&a.tridentSel)return a.tridentSel.getRangeAt(0);try{(n=a.getSel())&&(r=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():s.createRange())}catch(e){}if(u&&r&&r.setStart&&s.selection){try{o=s.selection.createRange()}catch(e){}o&&o.item&&(i=o.item(0),r=s.createRange(),r.setStartBefore(i),r.setEndAfter(i))}return r||(r=s.createRange?s.createRange():s.body.createTextRange()),r.setStart&&9===r.startContainer.nodeType&&r.collapsed&&(i=a.dom.getRoot(),r.setStart(i,0),r.setEnd(i,0)),a.selectedRange&&a.explicitRange&&(0===t(r.START_TO_START,r,a.selectedRange)&&0===t(r.END_TO_END,r,a.selectedRange)?r=a.explicitRange:(a.selectedRange=null,a.explicitRange=null)),r},setRng:function(e,t){var n,r=this;if(e.select)try{e.select()}catch(e){}else if(r.tridentSel){if(e.cloneRange)try{return void r.tridentSel.addRange(e)}catch(e){}}else if(n=r.getSel()){r.explicitRange=e;try{n.removeAllRanges(),n.addRange(e)}catch(e){}t===!1&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),r.selectedRange=n.rangeCount>0?n.getRangeAt(0):null}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){function e(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}var t,n=this,r=n.getRng(),i=r.startContainer,o=r.endContainer,a=r.startOffset,s=r.endOffset,l=n.dom.getRoot();return r?r.setStart?(t=r.commonAncestorContainer,!r.collapsed&&(i==o&&2>s-a&&i.hasChildNodes()&&(t=i.childNodes[a]),3===i.nodeType&&3===o.nodeType&&(i=i.length===a?e(i.nextSibling,!0):i.parentNode,o=0===s?e(o.previousSibling,!1):o.parentNode,i&&i===o))?i:t&&3==t.nodeType?t.parentNode:t):(t=r.item?r.item(0):r.parentElement(),t.ownerDocument!==n.win.document&&(t=l),t):l},getSelectedBlocks:function(t,n){var r,i,o=this,a=o.dom,s=[];if(i=a.getRoot(),t=a.getParent(t||o.getStart(),a.isBlock),n=a.getParent(n||o.getEnd(),a.isBlock),t&&t!=i&&s.push(t),t&&n&&t!=n){r=t;for(var l=new e(t,i);(r=l.next())&&r!=n;)a.isBlock(r)&&s.push(r)}return n&&t!=n&&n!=i&&s.push(n),s},isForward:function(){var e,t,n=this.dom,r=this.getSel();return!(r&&r.anchorNode&&r.focusNode)||(e=n.createRng(),e.setStart(r.anchorNode,r.anchorOffset),e.collapse(!0),t=n.createRng(),t.setStart(r.focusNode,r.focusOffset),t.collapse(!0),e.compareBoundaryPoints(e.START_TO_START,t)<=0)},normalize:function(){var e=this,t=e.getRng();return!u&&new i(e.dom).normalize(t)&&e.setRng(t,e.isForward()),t},selectorChanged:function(e,t){var n,r=this;return r.selectorChangedData||(r.selectorChangedData={},n={},r.editor.on("NodeChange",function(e){var t=e.element,i=r.dom,o=i.getParents(t,null,i.getRoot()),a={};c(r.selectorChangedData,function(e,t){c(o,function(r){return i.is(r,t)?(n[t]||(c(e,function(e){e(!0,{node:r,selector:t,parents:o})}),n[t]=e),a[t]=e,!1):void 0})}),c(n,function(e,r){a[r]||(delete n[r],c(e,function(e){e(!1,{node:t,selector:r,parents:o})}))})})),r.selectorChangedData[e]||(r.selectorChangedData[e]=[]),r.selectorChangedData[e].push(t),r},getScrollContainer:function(){for(var e,t=this.dom.getRoot();t&&"BODY"!=t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e){function t(e){for(var t=0,n=0,r=e;r&&r.nodeType;)t+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:t,y:n}}var n,r,i,o,a=this,s=a.dom,l=s.getRoot();if("BODY"!=l.nodeName){var c=a.getScrollContainer();if(c)return n=t(e).y-t(c).y,o=c.clientHeight,i=c.scrollTop,void((i>n||n+25>i+o)&&(c.scrollTop=i>n?n:n-o+25))}r=s.getViewPort(a.editor.getWin()),n=s.getPos(e).y,i=r.y,o=r.h,(n<r.y||n+25>i+o)&&a.editor.getWin().scrollTo(0,i>n?n:n-o+25)},_moveEndPoint:function(t,n,r){var i=n,o=new e(n,i),s=this.dom.schema.getNonEmptyElements();do{if(3==n.nodeType&&0!==d(n.nodeValue).length)return void(r?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(s[n.nodeName])return void(r?t.setStartBefore(n):"BR"==n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(a.ie&&a.ie<11&&this.dom.isBlock(n)&&this.dom.isEmpty(n))return void(r?t.setStart(n,0):t.setEnd(n,0))}while(n=r?o.next():o.prev());"BODY"==i.nodeName&&(r?t.setStart(i,0):t.setEnd(i,i.childNodes.length))},destroy:function(){this.win=null,this.controlSelection.destroy()}},l}),r(M,[P,c],function(e,t){function n(t){this.compare=function(n,i){function o(e){var n={};return r(t.getAttribs(e),function(r){var i=r.nodeName.toLowerCase();0!==i.indexOf("_")&&"style"!==i&&"data-mce-style"!==i&&(n[i]=t.getAttrib(e,i))}),n}function a(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(n=t[r],"undefined"==typeof n)return!1;if(e[r]!=n)return!1;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return!1;return!0}return n.nodeName==i.nodeName&&(!(!a(o(n),o(i))||!a(t.parseStyle(t.getAttrib(n,"style")),t.parseStyle(t.getAttrib(i,"style"))))&&(!e.isBookmarkNode(n)&&!e.isBookmarkNode(i)))}}var r=t.each;return n}),r(L,[c],function(e){function t(e,t){function r(e){return e.replace(/%(\w+)/g,"")}var i,o,a,s,l=e.dom,c="";if(s=e.settings.preview_styles,s===!1)return"";if(s||(s="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),"string"==typeof t){if(t=e.formatter.get(t),!t)return;t=t[0]}return i=t.block||t.inline||"span",o=l.create(i),n(t.styles,function(e,t){e=r(e),e&&l.setStyle(o,t,e)}),n(t.attributes,function(e,t){e=r(e),e&&l.setAttrib(o,t,e)}),n(t.classes,function(e){e=r(e),l.hasClass(o,e)||l.addClass(o,e)}),e.fire("PreviewFormats"),l.setStyles(o,{position:"absolute",left:-65535}),e.getBody().appendChild(o),a=l.getStyle(e.getBody(),"fontSize",!0),a=/px$/.test(a)?parseInt(a,10):0,n(s.split(" "),function(t){var n=l.getStyle(o,t,!0);if(!("background-color"==t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=l.getStyle(e.getBody(),t,!0),"#ffffff"==l.toHex(n).toLowerCase())||"color"==t&&"#000000"==l.toHex(n).toLowerCase())){if("font-size"==t&&/em|%$/.test(n)){if(0===a)return;n=parseFloat(n,10)/(/%$/.test(n)?100:1),n=n*a+"px"}"border"==t&&n&&(c+="padding:0 2px;"),c+=t+":"+n+";"}}),e.fire("AfterPreviewFormats"),l.remove(o),c}var n=e.each;return{getCssText:t}}),r(I,[m,x,P,M,c,L],function(e,t,n,r,i,o){return function(a){function s(e){return e.nodeType&&(e=e.nodeName),!!a.schema.getTextBlockElements()[e.toLowerCase()]}function l(e,t){return q.getParents(e,t,q.getRoot())}function c(e){return 1===e.nodeType&&"_mce_caret"===e.id}function d(){m({valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"}}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1,remove_similar:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1,remove_similar:!0},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"
},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(e,t,n){ie(n,function(t,n){q.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),ie("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){m(e,{block:e,remove:"all"})}),m(a.settings.formats)}function u(){a.addShortcut("ctrl+b","bold_desc","Bold"),a.addShortcut("ctrl+i","italic_desc","Italic"),a.addShortcut("ctrl+u","underline_desc","Underline");for(var e=1;6>=e;e++)a.addShortcut("ctrl+"+e,"",["FormatBlock",!1,"h"+e]);a.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),a.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),a.addShortcut("ctrl+9","",["FormatBlock",!1,"address"])}function f(e){return e?$[e]:$}function m(e,t){e&&("string"!=typeof e?ie(e,function(e,t){m(t,e)}):(t=t.length?t:[t],ie(t,function(e){e.deep===W&&(e.deep=!e.selector),e.split===W&&(e.split=!e.selector||e.inline),e.remove===W&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),$[e]=t))}function p(e){var t;return a.dom.getParent(e,function(e){return t=a.dom.getStyle(e,"text-decoration"),t&&"none"!==t}),t}function h(e){var t;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(t=p(e.parentNode),a.dom.getStyle(e,"color")&&t?a.dom.setStyle(e,"text-decoration",t):a.dom.getStyle(e,"textdecoration")===t&&a.dom.setStyle(e,"text-decoration",null))}function g(t,n,r){function i(e,t){if(t=t||p,e){if(t.onformat&&t.onformat(e,t,n,r),ie(t.styles,function(t,r){q.setStyle(e,r,R(t,n))}),t.styles){var i=q.getAttrib(e,"style");i&&e.setAttribute("data-mce-style",i)}ie(t.attributes,function(t,r){q.setAttrib(e,r,R(t,n))}),ie(t.classes,function(t){t=R(t,n),q.hasClass(e,t)||q.addClass(e,t)})}}function o(){function t(t,n){var i=new e(n);for(r=i.current();r;r=i.prev())if(r.childNodes.length>1||r==t||"BR"==r.tagName)return r}var n=a.selection.getRng(),i=n.startContainer,o=n.endContainer;if(i!=o&&0===n.endOffset){var s=t(i,o),l=3==s.nodeType?s.length:s.childNodes.length;n.setEnd(s,l)}return n}function l(e,r,o){var a,l,d=[],u=!0;a=p.inline||p.block,l=q.create(a),i(l),K.walk(e,function(e){function r(e){var h,g,y,x,C;return C=u,h=e.nodeName.toLowerCase(),g=e.parentNode.nodeName.toLowerCase(),1===e.nodeType&&ne(e)&&(C=u,u="true"===ne(e),x=!0),S(h,"br")?(f=0,void(p.block&&q.remove(e))):p.wrapper&&b(e,t,n)?void(f=0):u&&!x&&p.block&&!p.wrapper&&s(h)&&Y(g,a)?(e=q.rename(e,a),i(e),d.push(e),void(f=0)):p.selector&&(ie(m,function(t){"collapsed"in t&&t.collapsed!==v||q.is(e,t.selector)&&!c(e)&&(i(e,t),y=!0)}),!p.inline||y)?void(f=0):void(!u||x||!Y(a,h)||!Y(g,a)||!o&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||c(e)||p.inline&&G(e)?(f=0,ie(oe(e.childNodes),r),x&&(u=C),f=0):(f||(f=q.clone(l,ee),e.parentNode.insertBefore(f,e),d.push(f)),f.appendChild(e)))}var f;ie(e,r)}),p.wrap_links===!1&&ie(d,function(e){function t(e){var n,r,i;if("A"===e.nodeName){for(r=q.clone(l,ee),d.push(r),i=oe(e.childNodes),n=0;n<i.length;n++)r.appendChild(i[n]);e.appendChild(r)}ie(oe(e.childNodes),t)}t(e)}),ie(d,function(e){function r(e){var t=0;return ie(e.childNodes,function(e){A(e)||re(e)||t++}),t}function o(e){var t,n;return ie(e.childNodes,function(e){return 1!=e.nodeType||re(e)||c(e)?void 0:(t=e,ee)}),t&&!re(t)&&N(t,p)&&(n=q.clone(t,ee),i(n),q.replace(n,e,te),q.remove(t,1)),n||e}var a;if(a=r(e),(d.length>1||!G(e))&&0===a)return void q.remove(e,1);if(p.inline||p.wrapper){if(p.exact||1!==a||(e=o(e)),ie(m,function(t){ie(q.select(t.inline,e),function(e){var r;if(!re(e)){if(t.wrap_links===!1){r=e.parentNode;do if("A"===r.nodeName)return;while(r=r.parentNode)}D(t,n,e,t.exact?e:null)}})}),b(e.parentNode,t,n))return q.remove(e,1),e=0,te;p.merge_with_parents&&q.getParent(e.parentNode,function(r){return b(r,t,n)?(q.remove(e,1),e=0,te):void 0}),e&&p.merge_siblings!==!1&&(e=I(L(e),e),e=I(e,L(e,te)))}})}var d,u,m=f(t),p=m[0],v=!r&&j.isCollapsed();if(p)if(r)r.nodeType?(u=q.createRng(),u.setStartBefore(r),u.setEndAfter(r),l(P(u,m),null,!0)):l(r,null,!0);else if(v&&p.inline&&!q.select("td.mce-item-selected,th.mce-item-selected").length)H("apply",t,n);else{var y=a.selection.getNode();J||!m[0].defaultBlock||q.getParent(y,q.isBlock)||g(m[0].defaultBlock),a.selection.setRng(o()),d=j.getBookmark(),l(P(j.getRng(te),m),d),p.styles&&(p.styles.color||p.styles.textDecoration)&&(ae(y,h,"childNodes"),h(y)),j.moveToBookmark(d),F(j.getRng(te)),a.nodeChanged()}}function v(e,t,n,r){function i(e){var n,r,o,a,s;if(1===e.nodeType&&ne(e)&&(a=y,y="true"===ne(e),s=!0),n=oe(e.childNodes),y&&!s)for(r=0,o=g.length;o>r&&!D(g[r],t,e,e);r++);if(v.deep&&n.length){for(r=0,o=n.length;o>r;r++)i(n[r]);s&&(y=a)}}function o(n){var i;return ie(l(n.parentNode).reverse(),function(n){var o;i||"_start"==n.id||"_end"==n.id||(o=b(n,e,t,r),o&&o.split!==!1&&(i=n))}),i}function s(e,n,r,i){var o,a,s,l,c,d;if(e){for(d=e.parentNode,o=n.parentNode;o&&o!=d;o=o.parentNode){for(a=q.clone(o,ee),c=0;c<g.length;c++)if(D(g[c],t,a,a)){a=0;break}a&&(s&&a.appendChild(s),l||(l=a),s=a)}!i||v.mixed&&G(e)||(n=q.split(e,n)),s&&(r.parentNode.insertBefore(s,r),l.appendChild(r))}return n}function c(e){return s(o(e),e,e,!0)}function d(e){var t=q.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return re(n)&&(n=n[e?"firstChild":"lastChild"]),q.remove(t,!0),n}function u(e){var t,n,r=e.commonAncestorContainer;e=P(e,g,te),v.split&&(t=O(e,te),n=O(e),t!=n?(/^(TR|TH|TD)$/.test(t.nodeName)&&t.firstChild&&(t="TR"==t.nodeName?t.firstChild.firstChild||t:t.firstChild||t),r&&/^T(HEAD|BODY|FOOT|R)$/.test(r.nodeName)&&/^(TH|TD)$/.test(n.nodeName)&&n.firstChild&&(n=n.firstChild||n),t=B(t,"span",{id:"_start","data-mce-type":"bookmark"}),n=B(n,"span",{id:"_end","data-mce-type":"bookmark"}),c(t),c(n),t=d(te),n=d()):t=n=c(t),e.startContainer=t.parentNode,e.startOffset=X(t),e.endContainer=n.parentNode,e.endOffset=X(n)+1),K.walk(e,function(e){ie(e,function(e){i(e),1===e.nodeType&&"underline"===a.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===p(e.parentNode)&&D({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var m,h,g=f(e),v=g[0],y=!0;return n?void(n.nodeType?(h=q.createRng(),h.setStartBefore(n),h.setEndAfter(n),u(h)):u(n)):void(j.isCollapsed()&&v.inline&&!q.select("td.mce-item-selected,th.mce-item-selected").length?H("remove",e,t,r):(m=j.getBookmark(),u(j.getRng(te)),j.moveToBookmark(m),v.inline&&x(e,t,j.getStart())&&F(j.getRng(!0)),a.nodeChanged()))}function y(e,t,n){var r=f(e);!x(e,t,n)||"toggle"in r[0]&&!r[0].toggle?g(e,t,n):v(e,t,n)}function b(e,t,n,r){function i(e,t,i){var o,a,s,l=t[i];if(t.onmatch)return t.onmatch(e,t,i);if(l)if(l.length===W){for(o in l)if(l.hasOwnProperty(o)){if(a="attributes"===i?q.getAttrib(e,o):E(e,o),r&&!a&&!t.exact)return;if((!r||t.exact)&&!S(a,T(R(l[o],n),o)))return}}else for(s=0;s<l.length;s++)if("attributes"===i?q.getAttrib(e,l[s]):E(e,l[s]))return t;return t}var o,a,s,l=f(t);if(l&&e)for(a=0;a<l.length;a++)if(o=l[a],N(e,o)&&i(e,o,"attributes")&&i(e,o,"styles")){if(s=o.classes)for(a=0;a<s.length;a++)if(!q.hasClass(e,s[a]))return;return o}}function x(e,t,n){function r(n){var r=q.getRoot();return n!==r&&(n=q.getParent(n,function(n){return n.parentNode===r||!!b(n,e,t,!0)}),b(n,e,t))}var i;return n?r(n):(n=j.getNode(),r(n)?te:(i=j.getStart(),i!=n&&r(i)?te:ee))}function C(e,t){var n,r=[],i={};return n=j.getStart(),q.getParent(n,function(n){var o,a;for(o=0;o<e.length;o++)a=e[o],!i[a]&&b(n,a,t)&&(i[a]=!0,r.push(a))},q.getRoot()),r}function w(e){var t,n,r,i,o,a=f(e);if(a)for(t=j.getStart(),n=l(t),i=a.length-1;i>=0;i--){if(o=a[i].selector,!o||a[i].defaultBlock)return te;for(r=n.length-1;r>=0;r--)if(q.is(n[r],o))return te}return ee}function _(e,t,n){var r;return z||(z={},r={},a.on("NodeChange",function(e){var t=l(e.element),n={};t=i.grep(t,function(e){return!e.getAttribute("data-mce-bogus")}),ie(z,function(e,i){ie(t,function(o){return b(o,i,{},e.similar)?(r[i]||(ie(e,function(e){e(!0,{node:o,format:i,parents:t})}),r[i]=e),n[i]=e,!1):void 0})}),ie(r,function(i,o){n[o]||(delete r[o],ie(i,function(n){n(!1,{node:e.element,format:o,parents:t})}))})})),ie(e.split(","),function(e){z[e]||(z[e]=[],z[e].similar=n),z[e].push(t)}),this}function k(e){return o.getCssText(a,e)}function N(e,t){return S(e,t.inline)?te:S(e,t.block)?te:t.selector?1==e.nodeType&&q.is(e,t.selector):void 0}function S(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function E(e,t){return T(q.getStyle(e,t),t)}function T(e,t){return("color"==t||"backgroundColor"==t)&&(e=q.toHex(e)),"fontWeight"==t&&700==e&&(e="bold"),"fontFamily"==t&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e}function R(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e}function A(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function B(e,t,n){var r=q.create(t,n);return e.parentNode.insertBefore(r,e),r.appendChild(e),r}function P(t,n,r){function i(e){function t(e){return"BR"==e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling}var r,i,o,a,s;if(r=i=e?g:y,a=e?"previousSibling":"nextSibling",s=q.getRoot(),3==r.nodeType&&!A(r)&&(e?v>0:b<r.nodeValue.length))return r;for(;;){if(!n[0].block_expand&&G(i))return i;for(o=i[a];o;o=o[a])if(!re(o)&&!A(o)&&!t(o))return i;if(i.parentNode==s){r=i;break}i=i.parentNode}return r}function o(e,t){for(t===W&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)e=e.childNodes[t],e&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}}function c(e){for(var t=e;t;){if(1===t.nodeType&&ne(t))return"false"===ne(t)?t:e;t=t.parentNode}return e}function d(t,n,i){function o(e,t){var n,o,a=e.nodeValue;return"undefined"==typeof t&&(t=i?a.length:0),i?(n=a.lastIndexOf(" ",t),o=a.lastIndexOf(" ",t),n=n>o?n:o,-1===n||r||n++):(n=a.indexOf(" ",t),o=a.indexOf(" ",t),n=-1!==n&&(-1===o||o>n)?n:o),n}var s,l,c,d;if(3===t.nodeType){if(c=o(t,n),-1!==c)return{container:t,offset:c};d=t}for(s=new e(t,q.getParent(t,G)||a.getBody());l=s[i?"prev":"next"]();)if(3===l.nodeType){if(d=l,c=o(l),-1!==c)return{container:l,offset:c}}else if(G(l))break;return d?(n=i?0:d.length,{container:d,offset:n}):void 0}function u(e,r){var i,o,a,s;for(3==e.nodeType&&0===e.nodeValue.length&&e[r]&&(e=e[r]),i=l(e),o=0;o<i.length;o++)for(a=0;a<n.length;a++)if(s=n[a],!("collapsed"in s&&s.collapsed!==t.collapsed)&&q.is(i[o],s.selector))return i[o];return e}function f(e,t){var r,i=q.getRoot();if(n[0].wrapper||(r=q.getParent(e,n[0].block,i)),r||(r=q.getParent(3==e.nodeType?e.parentNode:e,function(e){return e!=i&&s(e)})),r&&n[0].wrapper&&(r=l(r,"ul,ol").reverse()[0]||r),!r)for(r=e;r[t]&&!G(r[t])&&(r=r[t],!S(r,"br")););return r||e}var m,p,h,g=t.startContainer,v=t.startOffset,y=t.endContainer,b=t.endOffset;if(1==g.nodeType&&g.hasChildNodes()&&(m=g.childNodes.length-1,g=g.childNodes[v>m?m:v],3==g.nodeType&&(v=0)),1==y.nodeType&&y.hasChildNodes()&&(m=y.childNodes.length-1,y=y.childNodes[b>m?m:b-1],3==y.nodeType&&(b=y.nodeValue.length)),g=c(g),y=c(y),(re(g.parentNode)||re(g))&&(g=re(g)?g:g.parentNode,g=g.nextSibling||g,3==g.nodeType&&(v=0)),(re(y.parentNode)||re(y))&&(y=re(y)?y:y.parentNode,y=y.previousSibling||y,3==y.nodeType&&(b=y.length)),n[0].inline&&(t.collapsed&&(h=d(g,v,!0),h&&(g=h.container,v=h.offset),h=d(y,b),h&&(y=h.container,b=h.offset)),p=o(y,b),p.node)){for(;p.node&&0===p.offset&&p.node.previousSibling;)p=o(p.node.previousSibling);p.node&&p.offset>0&&3===p.node.nodeType&&" "===p.node.nodeValue.charAt(p.offset-1)&&p.offset>1&&(y=p.node,y.splitText(p.offset-1))}return(n[0].inline||n[0].block_expand)&&(n[0].inline&&3==g.nodeType&&0!==v||(g=i(!0)),n[0].inline&&3==y.nodeType&&b!==y.nodeValue.length||(y=i())),n[0].selector&&n[0].expand!==ee&&!n[0].inline&&(g=u(g,"previousSibling"),y=u(y,"nextSibling")),(n[0].block||n[0].selector)&&(g=f(g,"previousSibling"),y=f(y,"nextSibling"),n[0].block&&(G(g)||(g=i(!0)),G(y)||(y=i()))),1==g.nodeType&&(v=X(g),g=g.parentNode),1==y.nodeType&&(b=X(y)+1,y=y.parentNode),{startContainer:g,startOffset:v,endContainer:y,endOffset:b}}function D(e,t,n,r){var i,o,a;if(!N(n,e))return ee;if("all"!=e.remove)for(ie(e.styles,function(i,o){i=T(R(i,t),o),"number"==typeof o&&(o=i,r=0),(e.remove_similar||!r||S(E(r,o),i))&&q.setStyle(n,o,""),a=1}),a&&""===q.getAttrib(n,"style")&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style")),ie(e.attributes,function(e,i){var o;if(e=R(e,t),"number"==typeof i&&(i=e,r=0),!r||S(q.getAttrib(r,i),e)){if("class"==i&&(e=q.getAttrib(n,i),e&&(o="",ie(e.split(/\s+/),function(e){/mce\w+/.test(e)&&(o+=(o?" ":"")+e)}),o)))return void q.setAttrib(n,i,o);"class"==i&&n.removeAttribute("className"),Z.test(i)&&n.removeAttribute("data-mce-"+i),n.removeAttribute(i)}}),ie(e.classes,function(e){e=R(e,t),(!r||q.hasClass(r,e))&&q.removeClass(n,e)}),o=q.getAttribs(n),i=0;i<o.length;i++)if(0!==o[i].nodeName.indexOf("_"))return ee;return"none"!=e.remove?(M(n,e),te):void 0}function M(e,t){function n(e,t,n){return e=L(e,t,n),!e||"BR"==e.nodeName||G(e)}var r,i=e.parentNode;t.block&&(J?i==q.getRoot()&&(t.list_block&&S(e,t.list_block)||ie(oe(e.childNodes),function(e){Y(J,e.nodeName.toLowerCase())?r?r.appendChild(e):(r=B(e,J),q.setAttribs(r,a.settings.forced_root_block_attrs)):r=0})):G(e)&&!G(i)&&(n(e,ee)||n(e.firstChild,te,1)||e.insertBefore(q.create("br"),e.firstChild),n(e,te)||n(e.lastChild,ee,1)||e.appendChild(q.create("br")))),t.selector&&t.inline&&!S(t.inline,e)||q.remove(e,1)}function L(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!A(e))return e}function I(e,t){function n(e,t){for(i=e;i;i=i[t]){if(3==i.nodeType&&0!==i.nodeValue.length)return e;if(1==i.nodeType&&!re(i))return i}return e}var i,o,a=new r(q);if(e&&t&&(e=n(e,"previousSibling"),t=n(t,"nextSibling"),a.compare(e,t))){for(i=e.nextSibling;i&&i!=t;)o=i,i=i.nextSibling,e.appendChild(o);return q.remove(t),ie(oe(t.childNodes),function(t){e.appendChild(t)}),e}return t}function O(t,n){var r,i,o;return r=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],1==r.nodeType&&(o=r.childNodes.length-1,!n&&i&&i--,r=r.childNodes[i>o?o:i]),3===r.nodeType&&n&&i>=r.nodeValue.length&&(r=new e(r,a.getBody()).next()||r),3!==r.nodeType||n||0!==i||(r=new e(r,a.getBody()).prev()||r),r}function H(t,n,r,i){function o(e){var t=q.create("span",{id:y,"data-mce-bogus":!0,style:x?"color:red":""});return e&&t.appendChild(a.getDoc().createTextNode(Q)),t}function l(e,t){for(;e;){if(3===e.nodeType&&e.nodeValue!==Q||e.childNodes.length>1)return!1;t&&1===e.nodeType&&t.push(e),e=e.firstChild}return!0}function c(e){for(;e;){if(e.id===y)return e;e=e.parentNode}}function d(t){var n;if(t)for(n=new e(t,t),t=n.current();t;t=n.next())if(3===t.nodeType)return t}function u(e,t){var n,r;if(e)r=j.getRng(!0),l(e)?(t!==!1&&(r.setStartBefore(e),r.setEndBefore(e)),q.remove(e)):(n=d(e),n.nodeValue.charAt(0)===Q&&(n.deleteData(0,1),r.startContainer==n&&r.startOffset--,r.endContainer==n&&r.endOffset--),q.remove(e,1)),j.setRng(r);else if(e=c(j.getStart()),!e)for(;e=q.get(y);)u(e,!1)}function m(){var e,t,i,a,s,l,u;e=j.getRng(!0),a=e.startOffset,l=e.startContainer,u=l.nodeValue,t=c(j.getStart()),t&&(i=d(t)),u&&a>0&&a<u.length&&/\w/.test(u.charAt(a))&&/\w/.test(u.charAt(a-1))?(s=j.getBookmark(),e.collapse(!0),e=P(e,f(n)),e=K.split(e),g(n,r,e),j.moveToBookmark(s)):(t&&i.nodeValue===Q?g(n,r,t):(t=o(!0),i=t.firstChild,e.insertNode(t),a=1,g(n,r,t)),j.setCursorLocation(i,a))}function p(){var e,t,a,l,c,d,u,m,p=j.getRng(!0),h=[];for(e=p.startContainer,t=p.startOffset,c=e,3==e.nodeType&&(t!=e.nodeValue.length&&(l=!0),c=c.parentNode);c;){if(b(c,n,r,i)){d=c;break}c.nextSibling&&(l=!0),h.push(c),c=c.parentNode}if(d)if(l)a=j.getBookmark(),p.collapse(!0),p=P(p,f(n),!0),p=K.split(p),v(n,r,p),j.moveToBookmark(a);else{for(m=o(),c=m,u=h.length-1;u>=0;u--)c.appendChild(q.clone(h[u],!1)),c=c.firstChild;c.appendChild(q.doc.createTextNode(Q)),c=c.firstChild;var g=q.getParent(d,s);g&&q.isEmpty(g)?d.parentNode.replaceChild(m,d):q.insertAfter(m,d),j.setCursorLocation(c,1),q.isEmpty(d)&&q.remove(d)}}function h(){var e;e=c(j.getStart()),e&&!q.isEmpty(e)&&ae(e,function(e){1!=e.nodeType||e.id===y||q.isEmpty(e)||q.setAttrib(e,"data-mce-bogus",null)},"childNodes")}var y="_mce_caret",x=a.settings.caret_debug;a._hasCaretEvents||(V=function(){var e,t=[];if(l(c(j.getStart()),t))for(e=t.length;e--;)q.setAttrib(t[e],"data-mce-bogus","1")},U=function(e){var t=e.keyCode;u(),(8==t||37==t||39==t)&&u(c(j.getStart())),h()},a.on("SetContent",function(e){e.selection&&h()}),a._hasCaretEvents=!0),"apply"==t?m():p()}function F(t){var n,r,i,o,a,s=t.startContainer,l=t.startOffset;if(3==s.nodeType&&l>=s.nodeValue.length&&(l=X(s),s=s.parentNode,n=!0),1==s.nodeType)for(o=s.childNodes,s=o[Math.min(l,o.length-1)],r=new e(s,q.getParent(s,q.isBlock)),(l>o.length-1||n)&&r.next(),i=r.current();i;i=r.next())if(3==i.nodeType&&!A(i))return a=q.create("a",{"data-mce-bogus":"all"},Q),i.parentNode.insertBefore(a,i),t.setStart(i,0),j.setRng(t),void q.remove(a)}var z,W,U,V,$={},q=a.dom,j=a.selection,K=new t(q),Y=a.schema.isValidChild,G=q.isBlock,J=a.settings.forced_root_block,X=q.nodeIndex,Q="\ufeff",Z=/^(src|href|style)$/,ee=!1,te=!0,ne=q.getContentEditable,re=n.isBookmarkNode,ie=i.each,oe=i.grep,ae=i.walk,se=i.extend;se(this,{get:f,register:m,apply:g,remove:v,toggle:y,match:x,matchAll:C,matchNode:b,canApply:w,formatChanged:_,getCssText:k}),d(),u(),a.on("BeforeGetContent",function(){V&&V()}),a.on("mouseup keydown",function(e){U&&U(e)})}}),r(O,[d,c,k],function(e,t,n){var r,i=t.trim;return r=new RegExp(["<span[^>]+data-mce-bogus[^>]+>[​\ufeff]+<\\/span>",'\\s?data-mce-selected="[^"]+"'].join("|"),"gi"),function(t){function o(){var e,o,a,s,l,c=i(t.getContent({format:"raw",no_events:1})),d=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,u=t.schema;for(c=c.replace(r,""),l=u.getShortEndedElements();s=d.exec(c);)o=d.lastIndex,a=s[0].length,e=l[s[1]]?o:n.findEndTag(u,c,o),c=c.substring(0,o-a)+c.substring(e),d.lastIndex=o-a;return c}function a(e){c.typing=!1,c.add({},e)}var s,l,c=this,d=0,u=[],f=0;return t.on("init",function(){c.add()}),t.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&c.beforeChange()}),t.on("ExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&a(e)}),t.on("ObjectResizeStart",function(){c.beforeChange()}),t.on("SaveContent ObjectResized blur",a),t.on("DragEnd",a),t.on("KeyUp",function(n){var r=n.keyCode;(r>=33&&36>=r||r>=37&&40>=r||45==r||13==r||n.ctrlKey)&&(a(),t.nodeChanged()),(46==r||8==r||e.mac&&(91==r||93==r))&&t.nodeChanged(),l&&c.typing&&(t.isDirty()||(t.isNotDirty=!u[0]||o()==u[0].content,t.isNotDirty||t.fire("change",{level:u[0],lastLevel:null})),t.fire("TypingUndo"),l=!1,t.nodeChanged())}),t.on("KeyDown",function(e){var t=e.keyCode;return t>=33&&36>=t||t>=37&&40>=t||45==t?void(c.typing&&a(e)):void((16>t||t>20)&&224!=t&&91!=t&&!c.typing&&(c.beforeChange(),c.typing=!0,c.add({},e),l=!0))}),t.on("MouseDown",function(e){c.typing&&a(e)}),t.addShortcut("ctrl+z","","Undo"),t.addShortcut("ctrl+y,ctrl+shift+z","","Redo"),t.on("AddUndo Undo Redo ClearUndos",function(e){e.isDefaultPrevented()||t.nodeChanged()}),c={data:u,typing:!1,beforeChange:function(){f||(s=t.selection.getBookmark(2,!0))},add:function(e,n){var r,i,a=t.settings;if(e=e||{},e.content=o(),f||t.removed)return null;if(i=u[d],t.fire("BeforeAddUndo",{level:e,lastLevel:i,originalEvent:n}).isDefaultPrevented())return null;if(i&&i.content==e.content)return null;if(u[d]&&(u[d].beforeBookmark=s),a.custom_undo_redo_levels&&u.length>a.custom_undo_redo_levels){for(r=0;r<u.length-1;r++)u[r]=u[r+1];u.length--,d=u.length}e.bookmark=t.selection.getBookmark(2,!0),d<u.length-1&&(u.length=d+1),u.push(e),d=u.length-1;var l={level:e,lastLevel:i,originalEvent:n};return t.fire("AddUndo",l),d>0&&(t.isNotDirty=!1,t.fire("change",l)),e},undo:function(){var e;return c.typing&&(c.add(),c.typing=!1),d>0&&(e=u[--d],0===d&&(t.isNotDirty=!0),t.setContent(e.content,{format:"raw"}),t.selection.moveToBookmark(e.beforeBookmark),t.fire("undo",{level:e})),e},redo:function(){var e;return d<u.length-1&&(e=u[++d],t.setContent(e.content,{format:"raw"}),t.selection.moveToBookmark(e.bookmark),t.fire("redo",{level:e})),e},clear:function(){u=[],d=0,c.typing=!1,t.fire("ClearUndos")},hasUndo:function(){return d>0||c.typing&&u[0]&&o()!=u[0].content},hasRedo:function(){return d<u.length-1&&!this.typing},transact:function(e){c.beforeChange();try{f++,e()}finally{f--}c.add()}}}}),r(H,[m,x,d],function(e,t,n){var r=n.ie&&n.ie<11;return function(i){function o(o){function f(e){return e&&a.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==a.getContentEditable(e)}function m(e){var t;a.isBlock(e)&&(t=s.getRng(),e.appendChild(a.create("span",null," ")),s.select(e),e.lastChild.outerHTML="",s.setRng(t))}function p(e){var t,n=e,r=[];if(n){for(;n=n.firstChild;){if(a.isBlock(n))return;1!=n.nodeType||u[n.nodeName.toLowerCase()]||r.push(n)}for(t=r.length;t--;)n=r[t],!n.hasChildNodes()||n.firstChild==n.lastChild&&""===n.firstChild.nodeValue?a.remove(n):"A"==n.nodeName&&" "===(n.innerText||n.textContent)&&a.remove(n)}}function h(t){function r(e){for(;e;){if(1==e.nodeType||3==e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}var i,o,l,c,d=t;if(t){if(n.ie&&n.ie<9&&A&&A.firstChild&&A.firstChild==A.lastChild&&"BR"==A.firstChild.tagName&&a.remove(A.firstChild),/^(LI|DT|DD)$/.test(t.nodeName)){var f=r(t.firstChild);f&&/^(UL|OL|DL)$/.test(f.nodeName)&&t.insertBefore(a.doc.createTextNode(" "),t.firstChild)}if(l=a.createRng(),n.ie||t.normalize(),t.hasChildNodes()){for(i=new e(t,t);o=i.current();){if(3==o.nodeType){l.setStart(o,0),l.setEnd(o,0);break}if(u[o.nodeName.toLowerCase()]){l.setStartBefore(o),l.setEndBefore(o);break}d=o,o=i.next()}o||(l.setStart(d,0),l.setEnd(d,0))}else"BR"==t.nodeName?t.nextSibling&&a.isBlock(t.nextSibling)?((!B||9>B)&&(c=a.create("br"),t.parentNode.insertBefore(c,t)),l.setStartBefore(t),l.setEndBefore(t)):(l.setStartAfter(t),l.setEndAfter(t)):(l.setStart(t,0),l.setEnd(t,0));s.setRng(l),a.remove(c),s.scrollIntoView(t)}}function g(e){var t=l.forced_root_block;t&&t.toLowerCase()===e.tagName.toLowerCase()&&a.setAttribs(e,l.forced_root_block_attrs)}function v(e){var t,n,i,o=T,s=d.getTextInlineElements();if(e||"TABLE"==I?(t=a.create(e||H),g(t)):t=A.cloneNode(!1),i=t,l.keep_styles!==!1)do if(s[o.nodeName]){if("_mce_caret"==o.id)continue;n=o.cloneNode(!1),a.setAttrib(n,"id",""),t.hasChildNodes()?(n.appendChild(t.firstChild),t.appendChild(n)):(i=n,t.appendChild(n))}while(o=o.parentNode);return r||(i.innerHTML='<br data-mce-bogus="1">'),t}function y(t){var n,r,i;if(3==T.nodeType&&(t?R>0:R<T.nodeValue.length))return!1;if(T.parentNode==A&&F&&!t)return!0;if(t&&1==T.nodeType&&T==A.firstChild)return!0;if("TABLE"===T.nodeName||T.previousSibling&&"TABLE"==T.previousSibling.nodeName)return F&&!t||!F&&t;for(n=new e(T,A),3==T.nodeType&&(t&&0===R?n.prev():t||R!=T.nodeValue.length||n.next());r=n.current();){if(1===r.nodeType){if(!r.getAttribute("data-mce-bogus")&&(i=r.nodeName.toLowerCase(),u[i]&&"br"!==i))return!1}else if(3===r.nodeType&&!/^[ \t\r\n]*$/.test(r.nodeValue))return!1;t?n.prev():n.next()}return!0}function b(e,t){var n,r,o,s,l,c,u=H||"P";if(r=a.getParent(e,a.isBlock),c=i.getBody().nodeName.toLowerCase(),!r||!f(r)){if(r=r||E,!r.hasChildNodes())return n=a.create(u),g(n),r.appendChild(n),N.setStart(n,0),N.setEnd(n,0),n;for(s=e;s.parentNode!=r;)s=s.parentNode;for(;s&&!a.isBlock(s);)o=s,s=s.previousSibling;if(o&&d.isValidChild(c,u.toLowerCase())){for(n=a.create(u),g(n),o.parentNode.insertBefore(n,o),s=o;s&&!a.isBlock(s);)l=s.nextSibling,n.appendChild(s),s=l;N.setStart(e,t),N.setEnd(e,t)}}return e}function x(){function e(e){for(var t=L[e?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[e?"nextSibling":"previousSibling"];return t===A}function t(){var e=L.parentNode;return/^(LI|DT|DD)$/.test(e.nodeName)?e:L}var n=L.parentNode.nodeName;/^(OL|UL|LI)$/.test(n)&&(H="LI"),D=H?v(H):a.create("BR"),e(!0)&&e()?"LI"==n?a.insertAfter(D,t()):a.replace(D,L):e(!0)?"LI"==n?(a.insertAfter(D,t()),D.appendChild(a.doc.createTextNode(" ")),D.appendChild(L)):L.parentNode.insertBefore(D,L):e()?(a.insertAfter(D,t()),m(D)):(L=t(),S=N.cloneRange(),S.setStartAfter(A),S.setEndAfter(L),M=S.extractContents(),"LI"==H&&"LI"==M.firstChild.nodeName?(D=M.firstChild,a.insertAfter(M,L)):(a.insertAfter(M,L),a.insertAfter(D,L))),a.remove(A),h(D),c.add()}function C(){i.execCommand("InsertLineBreak",!1,o)}function w(e){do 3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)}function _(e){var t,n,r=a.getRoot();for(t=e;t!==r&&"false"!==a.getContentEditable(t);)"true"===a.getContentEditable(t)&&(n=t),t=t.parentNode;return t!==r?n:r}function k(e){var t;r||(e.normalize(),t=e.lastChild,(!t||/^(left|right)$/gi.test(a.getStyle(t,"float",!0)))&&a.add(e,"br"))}var N,S,E,T,R,A,B,P,D,M,L,I,O,H,F;if(N=s.getRng(!0),!o.isDefaultPrevented()){if(!N.collapsed)return void i.execCommand("Delete");if(new t(a).normalize(N),T=N.startContainer,R=N.startOffset,H=(l.force_p_newlines?"p":"")||l.forced_root_block,H=H?H.toUpperCase():"",B=a.doc.documentMode,P=o.shiftKey,1==T.nodeType&&T.hasChildNodes()&&(F=R>T.childNodes.length-1,T=T.childNodes[Math.min(R,T.childNodes.length-1)]||T,R=F&&3==T.nodeType?T.nodeValue.length:0),E=_(T)){if(c.beforeChange(),!a.isBlock(E)&&E!=a.getRoot())return void((!H||P)&&C());if((H&&!P||!H&&P)&&(T=b(T,R)),A=a.getParent(T,a.isBlock),L=A?a.getParent(A.parentNode,a.isBlock):null,I=A?A.nodeName.toUpperCase():"",O=L?L.nodeName.toUpperCase():"","LI"!=O||o.ctrlKey||(A=L,I=O),/^(LI|DT|DD)$/.test(I)){if(!H&&P)return void C();if(a.isEmpty(A))return void x()}if("PRE"==I&&l.br_in_pre!==!1){if(!P)return void C()}else if(!H&&!P&&"LI"!=I||H&&P)return void C();H&&A===i.getBody()||(H=H||"P",y()?(D=/^(H[1-6]|PRE|FIGURE)$/.test(I)&&"HGROUP"!=O?v(H):v(),l.end_container_on_empty_block&&f(L)&&a.isEmpty(A)?D=a.split(L,A):a.insertAfter(D,A),h(D)):y(!0)?(D=A.parentNode.insertBefore(v(),A),m(D),h(A)):(S=N.cloneRange(),S.setEndAfter(A),M=S.extractContents(),w(M),D=M.firstChild,a.insertAfter(M,A),p(D),k(A),h(D)),a.setAttrib(D,"id",""),i.fire("NewBlock",{newBlock:D}),c.add())}}}var a=i.dom,s=i.selection,l=i.settings,c=i.undoManager,d=i.schema,u=d.getNonEmptyElements();i.on("keydown",function(e){13==e.keyCode&&o(e)!==!1&&e.preventDefault()})}}),r(F,[],function(){return function(e){function t(){var t,s,l,c,d,u,f,m,p,h,g,v,y=i.getStart(),b=e.getBody(),x=-16777215;if(v=n.forced_root_block,y&&1===y.nodeType&&v){for(;y&&y!=b;){if(a[y.nodeName])return;y=y.parentNode}if(t=i.getRng(),t.setStart){s=t.startContainer,l=t.startOffset,c=t.endContainer,d=t.endOffset;try{p=e.getDoc().activeElement===b}catch(e){}}else t.item&&(y=t.item(0),t=e.getDoc().body.createTextRange(),t.moveToElementText(y)),p=t.parentElement().ownerDocument===e.getDoc(),h=t.duplicate(),h.collapse(!0),l=-1*h.move("character",x),h.collapsed||(h=t.duplicate(),h.collapse(!1),d=-1*h.move("character",x)-l);for(y=b.firstChild,g=b.nodeName.toLowerCase();y;)if((3===y.nodeType||1==y.nodeType&&!a[y.nodeName])&&o.isValidChild(g,v.toLowerCase())){if(3===y.nodeType&&0===y.nodeValue.length){f=y,y=y.nextSibling,r.remove(f);continue}u||(u=r.create(v,e.settings.forced_root_block_attrs),y.parentNode.insertBefore(u,y),m=!0),f=y,y=y.nextSibling,u.appendChild(f)}else u=null,y=y.nextSibling;if(m&&p){if(t.setStart)t.setStart(s,l),t.setEnd(c,d),i.setRng(t);else try{t=e.getDoc().body.createTextRange(),t.moveToElementText(b),t.collapse(!0),t.moveStart("character",l),d>0&&t.moveEnd("character",d),t.select()}catch(e){}e.nodeChanged()}}}var n=e.settings,r=e.dom,i=e.selection,o=e.schema,a=o.getBlockElements();n.forced_root_block&&e.on("NodeChange",t)}}),r(z,[E,d,c,M,x,m],function(e,n,r,i,o,a){var s=r.each,l=r.extend,c=r.map,d=r.inArray,u=r.explode,f=n.gecko,m=n.ie,p=n.ie&&n.ie<11,h=!0,g=!1;return function(r){function v(e,t,n){var r;return e=e.toLowerCase(),(r=R.exec[e])?(r(e,t,n),h):g}function y(e){var t;return e=e.toLowerCase(),(t=R.state[e])?t(e):-1}function b(e){var t;return e=e.toLowerCase(),(t=R.value[e])?t(e):g}function x(e,t){t=t||"exec",s(e,function(e,n){s(n.toLowerCase().split(","),function(n){R[t][n]=e})})}function C(e,n,i){return n===t&&(n=g),i===t&&(i=null),r.getDoc().execCommand(e,n,i)}function w(e){return B.match(e)}function _(e,n){B.toggle(e,n?{value:n}:t),r.nodeChanged()}function k(e){S=T.getBookmark(e)}function N(){T.moveToBookmark(S)}var S,E=r.dom,T=r.selection,R={state:{},exec:{},value:{}},A=r.settings,B=r.formatter;l(this,{execCommand:v,queryCommandState:y,queryCommandValue:b,addCommands:x}),x({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){r.undoManager.add()},"Cut,Copy,Paste":function(e){var t,i=r.getDoc();try{C(e)}catch(e){t=h}if(t||!i.queryCommandSupported(e)){var o=r.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");n.mac&&(o=o.replace(/Ctrl\+/g,"⌘+")),r.windowManager.alert(o)}},unlink:function(){if(T.isCollapsed()){var e=T.getNode();return void("A"==e.tagName&&r.dom.remove(e,!0))}B.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t=e.substring(7);"full"==t&&(t="justify"),s("left,center,right,justify".split(","),function(e){t!=e&&B.remove("align"+e)}),_("align"+t),v("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;C(e),t=E.getParent(T.getNode(),"ol,ul"),t&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(k(),E.split(n,t),N()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){_(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){_(e,n)},FontSize:function(e,t,n){var r,i;n>=1&&7>=n&&(i=u(A.font_size_style_values),r=u(A.font_size_classes),n=r?r[n-1]||n:i[n-1]||n),_(e,n)},RemoveFormat:function(e){B.remove(e)},mceBlockQuote:function(){_("blockquote")},FormatBlock:function(e,t,n){return _(n||"p")},mceCleanup:function(){var e=T.getBookmark();r.setContent(r.getContent({cleanup:h}),{cleanup:h}),T.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var i=n||T.getNode();i!=r.getBody()&&(k(),r.dom.remove(i,h),N())},mceSelectNodeDepth:function(e,t,n){var i=0;E.getParent(T.getNode(),function(e){return 1==e.nodeType&&i++==n?(T.select(e),g):void 0},r.getBody())},mceSelectNode:function(e,t,n){T.select(n)},mceInsertContent:function(t,n,o){function a(e){function t(e){return r[e]&&3==r[e].nodeType}var n,r,i;return n=T.getRng(!0),r=n.startContainer,i=n.startOffset,3==r.nodeType&&(i>0?e=e.replace(/^&nbsp;/," "):t("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),i<r.length?e=e.replace(/&nbsp;(<br>|)$/," "):t("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e}function l(e){if(w)for(b=e.firstChild;b;b=b.walk(!0))_[b.name]&&b.attr("data-mce-new","true")}function c(){if(w){var e=r.getBody(),t=new i(E);s(E.select("*[data-mce-new]"),function(n){n.removeAttribute("data-mce-new");for(var r=n.parentNode;r&&r!=e;r=r.parentNode)t.compare(r,n)&&E.remove(n,!0)})}}var d,u,f,p,h,g,v,y,b,x,C,w,_=r.schema.getTextInlineElements();"string"!=typeof o&&(w=o.merge,o=o.content),/^ | $/.test(o)&&(o=a(o)),d=r.parser,u=new e({},r.schema),C='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#200B;</span>',g={content:o,format:"html",selection:!0},r.fire("BeforeSetContent",g),o=g.content,-1==o.indexOf("{$caret}")&&(o+="{$caret}"),o=o.replace(/\{\$caret\}/,C),y=T.getRng();var k=y.startContainer||(y.parentElement?y.parentElement():null),N=r.getBody();k===N&&T.isCollapsed()&&E.isBlock(N.firstChild)&&E.isEmpty(N.firstChild)&&(y=E.createRng(),y.setStart(N.firstChild,0),
y.setEnd(N.firstChild,0),T.setRng(y)),T.isCollapsed()||r.getDoc().execCommand("Delete",!1,null),f=T.getNode();var S={context:f.nodeName.toLowerCase()};if(h=d.parse(o,S),l(h),b=h.lastChild,"mce_marker"==b.attr("id"))for(v=b,b=b.prev;b;b=b.walk(!0))if(3==b.type||!E.isBlock(b.name)){b.parent.insert(v,b,"br"===b.name);break}if(S.invalid){for(T.setContent(C),f=T.getNode(),p=r.getBody(),9==f.nodeType?f=b=p:b=f;b!==p;)f=b,b=b.parentNode;o=f==p?p.innerHTML:E.getOuterHTML(f),o=u.serialize(d.parse(o.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return u.serialize(h)}))),f==p?E.setHTML(p,o):E.setOuterHTML(f,o)}else o=u.serialize(h),b=f.firstChild,x=f.lastChild,!b||b===x&&"BR"===b.nodeName?E.setHTML(f,o):T.setContent(o);c(),v=E.get("mce_marker"),T.scrollIntoView(v),y=E.createRng(),b=v.previousSibling,b&&3==b.nodeType?(y.setStart(b,b.nodeValue.length),m||(x=v.nextSibling,x&&3==x.nodeType&&(b.appendData(x.data),x.parentNode.removeChild(x)))):(y.setStartBefore(v),y.setEndBefore(v)),E.remove(v),T.setRng(y),r.fire("SetContent",g),r.addVisual()},mceInsertRawHTML:function(e,t,n){T.setContent("tiny_mce_marker"),r.setContent(r.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){_(n)},mceSetContent:function(e,t,n){r.setContent(n)},"Indent,Outdent":function(e){var t,n,i;t=A.indentation,n=/[a-z%]+$/i.exec(t),t=parseInt(t,10),y("InsertUnorderedList")||y("InsertOrderedList")?C(e):(A.forced_root_block||E.getParent(T.getNode(),E.isBlock)||B.apply("div"),s(T.getSelectedBlocks(),function(o){if("LI"!=o.nodeName){var a=r.getParam("indent_use_margin",!1)?"margin":"padding";a+="rtl"==E.getStyle(o,"direction",!0)?"Right":"Left","outdent"==e?(i=Math.max(0,parseInt(o.style[a]||0,10)-t),E.setStyle(o,a,i?i+n:"")):(i=parseInt(o.style[a]||0,10)+t+n,E.setStyle(o,a,i))}}))},mceRepaint:function(){if(f)try{k(h),T.getSel()&&T.getSel().selectAllChildren(r.getBody()),T.collapse(h),N()}catch(e){}},InsertHorizontalRule:function(){r.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){r.hasVisual=!r.hasVisual,r.addVisual()},mceReplaceContent:function(e,t,n){r.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,T.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var r;"string"==typeof n&&(n={href:n}),r=E.getParent(T.getNode(),"a"),n.href=n.href.replace(" ","%20"),r&&n.href||B.remove("link"),n.href&&B.apply("link",n,r)},selectAll:function(){var e,t=E.getRoot();T.getRng().setStart?(e=E.createRng(),e.setStart(t,0),e.setEnd(t,t.childNodes.length),T.setRng(e)):(e=T.getRng(),e.item||(e.moveToElementText(t),e.select()))},delete:function(){C("Delete");var e=r.getBody();E.isEmpty(e)&&(r.setContent(""),e.firstChild&&E.isBlock(e.firstChild)?r.selection.setCursorLocation(e.firstChild,0):r.selection.setCursorLocation(e,0))},mceNewDocument:function(){r.setContent("")},InsertLineBreak:function(e,t,n){function i(){for(var e,t=new a(m,v),n=r.schema.getNonEmptyElements();e=t.next();)if(n[e.nodeName.toLowerCase()]||e.length>0)return!0}var s,l,c,d=n,u=T.getRng(!0);new o(E).normalize(u);var f=u.startOffset,m=u.startContainer;if(1==m.nodeType&&m.hasChildNodes()){var g=f>m.childNodes.length-1;m=m.childNodes[Math.min(f,m.childNodes.length-1)]||m,f=g&&3==m.nodeType?m.nodeValue.length:0}var v=E.getParent(m,E.isBlock),y=v?v.nodeName.toUpperCase():"",b=v?E.getParent(v.parentNode,E.isBlock):null,x=b?b.nodeName.toUpperCase():"",C=d&&d.ctrlKey;"LI"!=x||C||(v=b,y=x),m&&3==m.nodeType&&f>=m.nodeValue.length&&(p||i()||(s=E.create("br"),u.insertNode(s),u.setStartAfter(s),u.setEndAfter(s),l=!0)),s=E.create("br"),u.insertNode(s);var w=E.doc.documentMode;return p&&"PRE"==y&&(!w||8>w)&&s.parentNode.insertBefore(E.doc.createTextNode("\r"),s),c=E.create("span",{},"&nbsp;"),s.parentNode.insertBefore(c,s),T.scrollIntoView(c),E.remove(c),l?(u.setStartBefore(s),u.setEndBefore(s)):(u.setStartAfter(s),u.setEndAfter(s)),T.setRng(u),r.undoManager.add(),h}}),x({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7),n=T.isCollapsed()?[E.getParent(T.getNode(),E.isBlock)]:T.getSelectedBlocks(),r=c(n,function(e){return!!B.matchNode(e,t)});return-1!==d(r,h)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return w(e)},mceBlockQuote:function(){return w("blockquote")},Outdent:function(){var e;if(A.inline_styles){if((e=E.getParent(T.getStart(),E.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return h;if((e=E.getParent(T.getEnd(),E.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return h}return y("InsertUnorderedList")||y("InsertOrderedList")||!A.inline_styles&&!!E.getParent(T.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=E.getParent(T.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),x({"FontSize,FontName":function(e){var t,n=0;return(t=E.getParent(T.getNode(),"span"))&&(n="fontsize"==e?t.style.fontSize:t.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),n}},"value"),x({Undo:function(){r.undoManager.undo()},Redo:function(){r.undoManager.redo()}})}}),r(W,[c],function(e){function t(e,o){var a,s,l=this;if(e=r(e),o=l.settings=o||{},a=o.base_uri,/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(l.source=e);var c=0===e.indexOf("//");0!==e.indexOf("/")||c||(e=(a?a.protocol||"http":"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(s=o.base_uri?o.base_uri.path:new t(location.href).directory,""===o.base_uri.protocol?e="//mce_host"+l.toAbsPath(s,e):(e=/([^#?]*)([#?]?.*)/.exec(e),e=(a&&a.protocol||"http")+"://mce_host"+l.toAbsPath(s,e[1])+e[2])),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),n(i,function(t,n){var r=e[n];r&&(r=r.replace(/\(mce_at\)/g,"@@")),l[t]=r}),a&&(l.protocol||(l.protocol=a.protocol),l.userInfo||(l.userInfo=a.userInfo),l.port||"mce_host"!==l.host||(l.port=a.port),l.host&&"mce_host"!==l.host||(l.host=a.host),l.source=""),c&&(l.protocol="")}var n=e.each,r=e.trim,i="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),o={ftp:21,http:80,https:443,mailto:25};return t.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var n,r=this;if("./"===e)return e;if(e=new t(e,{base_uri:r}),"mce_host"!=e.host&&r.host!=e.host&&e.host||r.port!=e.port||r.protocol!=e.protocol&&""!==e.protocol)return e.getURI();var i=r.getURI(),o=e.getURI();return i==o||"/"==i.charAt(i.length-1)&&i.substr(0,i.length-1)==o?i:(n=r.toRelPath(r.path,e.path),e.query&&(n+="?"+e.query),e.anchor&&(n+="#"+e.anchor),n)},toAbsolute:function(e,n){return e=new t(e,{base_uri:this}),e.getURI(n&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=o[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,r,i,o=0,a="";if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(r=0,i=e.length;i>r;r++)if(r>=n.length||e[r]!=n[r]){o=r+1;break}if(e.length<n.length)for(r=0,i=n.length;i>r;r++)if(r>=e.length||e[r]!=n[r]){o=r+1;break}if(1===o)return t;for(r=0,i=e.length-(o-1);i>r;r++)a+="../";for(r=o-1,i=n.length;i>r;r++)a+=r!=o-1?"/"+n[r]:n[r];return a},toAbsPath:function(e,t){var r,i,o,a=0,s=[];for(i=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),n(e,function(e){e&&s.push(e)}),e=s,r=t.length-1,s=[];r>=0;r--)0!==t[r].length&&"."!==t[r]&&(".."!==t[r]?a>0?a--:s.push(t[r]):a++);return r=e.length-a,o=0>=r?s.reverse().join("/"):e.slice(0,r).join("/")+"/"+s.reverse().join("/"),0!==o.indexOf("/")&&(o="/"+o),i&&o.lastIndexOf("/")!==o.length-1&&(o+=i),o},getURI:function(e){var t,n=this;return(!n.source||e)&&(t="",e||(t+=n.protocol?n.protocol+"://":"//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},t}),r(U,[c],function(e){function t(){}var n,r,i=e.each,o=e.extend;return t.extend=n=function(e){function t(){var e,t,n,i=this;if(!r&&(i.init&&i.init.apply(i,arguments),t=i.Mixins))for(e=t.length;e--;)n=t[e],n.init&&n.init.apply(i,arguments)}function a(){return this}function s(e,t){return function(){var n,r=this,i=r._super;return r._super=f[e],n=t.apply(r,arguments),r._super=i,n}}var l,c,d,u=this,f=u.prototype;r=!0,l=new u,r=!1,e.Mixins&&(i(e.Mixins,function(t){t=t;for(var n in t)"init"!==n&&(e[n]=t[n])}),f.Mixins&&(e.Mixins=f.Mixins.concat(e.Mixins))),e.Methods&&i(e.Methods.split(","),function(t){e[t]=a}),e.Properties&&i(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){var t,r=this;return e!==t?(r[n]=e,r):r[n]}}),e.Statics&&i(e.Statics,function(e,n){t[n]=e}),e.Defaults&&f.Defaults&&(e.Defaults=o({},f.Defaults,e.Defaults));for(c in e)d=e[c],l[c]="function"==typeof d&&f[c]?s(c,d):d;return t.prototype=l,t.constructor=t,t.extend=n,t},t}),r(V,[c],function(e){function t(e){function t(){return!1}function n(){return!0}function r(r,i){var a,s,c,d;if(r=r.toLowerCase(),i=i||{},i.type=r,i.target||(i.target=l),i.preventDefault||(i.preventDefault=function(){i.isDefaultPrevented=n},i.stopPropagation=function(){i.isPropagationStopped=n},i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=n},i.isDefaultPrevented=t,i.isPropagationStopped=t,i.isImmediatePropagationStopped=t),e.beforeFire&&e.beforeFire(i),a=u[r])for(s=0,c=a.length;c>s;s++){if(a[s]=d=a[s],d.once&&o(r,d),i.isImmediatePropagationStopped())return i.stopPropagation(),i;if(d.call(l,i)===!1)return i.preventDefault(),i}return i}function i(e,n,r){var i,o,a;if(n===!1&&(n=t),n)for(o=e.toLowerCase().split(" "),a=o.length;a--;)e=o[a],i=u[e],i||(i=u[e]=[],c(e,!0)),r?i.unshift(n):i.push(n);return d}function o(e,t){var n,r,i,o,a;if(e)for(o=e.toLowerCase().split(" "),n=o.length;n--;){if(e=o[n],r=u[e],!e){for(i in u)c(i,!1),delete u[i];return d}if(r){if(t)for(a=r.length;a--;)r[a]===t&&(r=r.slice(0,a).concat(r.slice(a+1)),u[e]=r);else r.length=0;r.length||(c(e,!1),delete u[e])}}else{for(e in u)c(e,!1);u={}}return d}function a(e,t,n){return t.once=!0,i(e,t,n)}function s(e){return e=e.toLowerCase(),!(!u[e]||0===u[e].length)}var l,c,d=this,u={};e=e||{},l=e.scope||d,c=e.toggleEvent||t,d.fire=r,d.on=i,d.off=o,d.once=a,d.has=s}var n=e.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate"," ");return t.isNative=function(e){return!!n[e.toLowerCase()]},t}),r($,[U],function(e){function t(e){for(var t,n=[],r=e.length;r--;)t=e[r],t.__checked||(n.push(t),t.__checked=1);for(r=n.length;r--;)delete n[r].__checked;return n}var n,r=/^([\w\\*]+)?(?:#([\w\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,i=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,o=/^\s*|\s*$/g,a=e.extend({init:function(e){function t(e){return e?(e=e.toLowerCase(),function(t){return"*"===e||t.type===e}):void 0}function n(e){return e?function(t){return t._name===e}:void 0}function a(e){return e?(e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.hasClass(e[n]))return!1;return!0}):void 0}function s(e,t,n){return e?function(r){var i=r[e]?r[e]():"";return t?"="===t?i===n:"*="===t?i.indexOf(n)>=0:"~="===t?(" "+i+" ").indexOf(" "+n+" ")>=0:"!="===t?i!=n:"^="===t?0===i.indexOf(n):"$="===t&&i.substr(i.length-n.length)===n:!!n}:void 0}function l(e){var t;return e?(e=/(?:not\((.+)\))|(.+)/i.exec(e),e[1]?(t=d(e[1],[]),function(e){return!u(e,t)}):(e=e[2],function(t,n,r){return"first"===e?0===n:"last"===e?n===r-1:"even"===e?n%2===0:"odd"===e?n%2===1:!!t[e]&&t[e]()})):void 0}function c(e,i,c){function d(e){e&&i.push(e)}var u;return u=r.exec(e.replace(o,"")),d(t(u[1])),d(n(u[2])),d(a(u[3])),d(s(u[4],u[5],u[6])),d(l(u[7])),i.psuedo=!!u[7],i.direct=c,i}function d(e,t){var n,r,o,a=[];do if(i.exec(""),r=i.exec(e),r&&(e=r[3],a.push(r[1]),r[2])){n=r[3];break}while(r);for(n&&d(n,t),e=[],o=0;o<a.length;o++)">"!=a[o]&&e.push(c(a[o],[],">"===a[o-1]));return t.push(e),t}var u=this.match;this._selectors=d(e,[])},match:function(e,t){var n,r,i,o,a,s,l,c,d,u,f,m,p;for(t=t||this._selectors,n=0,r=t.length;r>n;n++){for(a=t[n],o=a.length,p=e,m=0,i=o-1;i>=0;i--)for(c=a[i];p;){if(c.psuedo)for(f=p.parent().items(),d=u=f.length;d--&&f[d]!==p;);for(s=0,l=c.length;l>s;s++)if(!c[s](p,d,u)){s=l+1;break}if(s===l){m++;break}if(i===o-1)break;p=p.parent()}if(m===o)return!0}return!1},find:function(e){function r(e,t,n){var i,o,a,l,c,d=t[n];for(i=0,o=e.length;o>i;i++){for(c=e[i],a=0,l=d.length;l>a;a++)if(!d[a](c,i,o)){a=l+1;break}if(a===l)n==t.length-1?s.push(c):c.items&&r(c.items(),t,n+1);else if(d.direct)return;c.items&&r(c.items(),t,n)}}var i,o,s=[],l=this._selectors;if(e.items){for(i=0,o=l.length;o>i;i++)r(e.items(),l[i],0);o>1&&(s=t(s))}return n||(n=a.Collection),new n(s)}});return a}),r(q,[c,$,U],function(e,t,n){var r,i,o=Array.prototype.push,a=Array.prototype.slice;return i={length:0,init:function(e){e&&this.add(e)},add:function(t){var n=this;return e.isArray(t)?o.apply(n,t):t instanceof r?n.add(t.toArray()):o.call(n,t),n},set:function(e){var t,n=this,r=n.length;for(n.length=0,n.add(e),t=n.length;r>t;t++)delete n[t];return n},filter:function(e){var n,i,o,a,s=this,l=[];for("string"==typeof e?(e=new t(e),a=function(t){return e.match(t)}):a=e,n=0,i=s.length;i>n;n++)o=s[n],a(o)&&l.push(o);return new r(l)},slice:function(){return new r(a.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(t){return e.each(this,t),this},toArray:function(){return e.toArray(this)},indexOf:function(e){for(var t=this,n=t.length;n--&&t[n]!==e;);return n},reverse:function(){return new r(e.toArray(this).reverse())},hasClass:function(e){return!!this[0]&&this[0].hasClass(e)},prop:function(e,t){var n,r,i=this;return t!==n?(i.each(function(n){n[e]&&n[e](t)}),i):(r=i[0],r&&r[e]?r[e]():void 0)},exec:function(t){var n=this,r=e.toArray(arguments).slice(1);return n.each(function(e){e[t]&&e[t].apply(e,r)}),n},remove:function(){for(var e=this.length;e--;)this[e].remove();return this}},e.each("fire on off show hide addClass removeClass append prepend before after reflow".split(" "),function(t){i[t]=function(){var n=e.toArray(arguments);return this.each(function(e){t in e&&e[t].apply(e,n)}),this}}),e.each("text name disabled active selected checked visible parent value data".split(" "),function(e){i[e]=function(t){return this.prop(e,t)}}),r=n.extend(i),t.Collection=r,r}),r(j,[c,v],function(e,t){var n=0;return{id:function(){return"mceu_"+n++},createFragment:function(e){return t.DOM.createFragment(e)},getWindowSize:function(){return t.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var r=e.getBoundingClientRect();t=Math.max(r.width||r.right-r.left,e.offsetWidth),n=Math.max(r.height||r.bottom-r.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,n){return t.DOM.getPos(e,n)},getViewPort:function(e){return t.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,n){return t.DOM.addClass(e,n)},removeClass:function(e,n){return t.DOM.removeClass(e,n)},hasClass:function(e,n){return t.DOM.hasClass(e,n)},toggleClass:function(e,n,r){return t.DOM.toggleClass(e,n,r)},css:function(e,n,r){return t.DOM.setStyle(e,n,r)},on:function(e,n,r,i){return t.DOM.bind(e,n,r,i)},off:function(e,n,r){return t.DOM.unbind(e,n,r)},fire:function(e,n,r){return t.DOM.fire(e,n,r)},innerHtml:function(e,n){t.DOM.setHTML(e,n)}}}),r(K,[U,c,V,q,j],function(e,t,n,r,i){function o(e){return e._eventDispatcher||(e._eventDispatcher=new n({scope:e,toggleEvent:function(t,r){r&&n.isNative(t)&&(e._nativeEvents||(e._nativeEvents={}),e._nativeEvents[t]=!0,e._rendered&&e.bindPendingEvents())}})),e._eventDispatcher}var a={},s="onmousewheel"in document,l=!1,c="mce-",d=e.extend({Statics:{elementIdCache:a,classPrefix:c},isRtl:function(){return d.rtl},classPrefix:c,init:function(e){var n,r,o=this;if(o.settings=e=t.extend({},o.Defaults,e),o._id=e.id||i.id(),o._text=o._name="",o._width=o._height=0,o._aria={role:e.role},n=e.classes)for(n=n.split(" "),n.map={},r=n.length;r--;)n.map[n[r]]=!0;o._classes=n||[],o.visible(!0),t.each("title text width height name classes visible disabled active value".split(" "),function(t){var n,r=e[t];r!==n?o[t](r):o["_"+t]===n&&(o["_"+t]=!1)}),o.on("click",function(){return!o.disabled()&&void 0}),e.classes&&t.each(e.classes.split(" "),function(e){o.addClass(e)}),o.settings=e,o._borderBox=o.parseBox(e.border),o._paddingBox=o.parseBox(e.padding),o._marginBox=o.parseBox(e.margin),e.hidden&&o.hide()},Properties:"parent,title,text,width,height,disabled,active,name,value",Methods:"renderHtml",getContainerElm:function(){return document.body},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},parseBox:function(e){var t,n=10;if(e)return"number"==typeof e?(e=e||0,{top:e,left:e,bottom:e,right:e}):(e=e.split(" "),t=e.length,1===t?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],n)||0,right:parseInt(e[1],n)||0,bottom:parseInt(e[2],n)||0,left:parseInt(e[3],n)||0})},borderBox:function(){return this._borderBox},paddingBox:function(){return this._paddingBox},marginBox:function(){return this._marginBox},measureBox:function(e,t){function n(t){var n=document.defaultView;return n?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),n.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle[t]}function r(e){var t=parseFloat(n(e),10);return isNaN(t)?0:t}return{top:r(t+"TopWidth"),right:r(t+"RightWidth"),bottom:r(t+"BottomWidth"),left:r(t+"LeftWidth")}},initLayoutRect:function(){var e,t,n,r,o,a,s,l,c,d,u=this,f=u.settings,m=u.getEl();e=u._borderBox=u._borderBox||u.measureBox(m,"border"),u._paddingBox=u._paddingBox||u.measureBox(m,"padding"),u._marginBox=u._marginBox||u.measureBox(m,"margin"),d=i.getSize(m),l=f.minWidth,c=f.minHeight,o=l||d.width,a=c||d.height,n=f.width,r=f.height,s=f.autoResize,s="undefined"!=typeof s?s:!n&&!r,n=n||o,r=r||a;var p=e.left+e.right,h=e.top+e.bottom,g=f.maxWidth||65535,v=f.maxHeight||65535;return u._layoutRect=t={x:f.x||0,y:f.y||0,w:n,h:r,deltaW:p,deltaH:h,contentW:n-p,contentH:r-h,innerW:n-p,innerH:r-h,startMinWidth:l||0,startMinHeight:c||0,minW:Math.min(o,g),minH:Math.min(a,v),maxW:g,maxH:v,autoResize:s,scrollW:0},u._lastLayoutRect={},t},layoutRect:function(e){var t,n,r,i,o,a,s=this,l=s._layoutRect;return l||(l=s.initLayoutRect()),e?(r=l.deltaW,i=l.deltaH,e.x!==o&&(l.x=e.x),e.y!==o&&(l.y=e.y),e.minW!==o&&(l.minW=e.minW),e.minH!==o&&(l.minH=e.minH),n=e.w,n!==o&&(n=n<l.minW?l.minW:n,n=n>l.maxW?l.maxW:n,l.w=n,l.innerW=n-r),n=e.h,n!==o&&(n=n<l.minH?l.minH:n,n=n>l.maxH?l.maxH:n,l.h=n,l.innerH=n-i),n=e.innerW,n!==o&&(n=n<l.minW-r?l.minW-r:n,n=n>l.maxW-r?l.maxW-r:n,l.innerW=n,l.w=n+r),n=e.innerH,n!==o&&(n=n<l.minH-i?l.minH-i:n,n=n>l.maxH-i?l.maxH-i:n,l.innerH=n,l.h=n+i),e.contentW!==o&&(l.contentW=e.contentW),e.contentH!==o&&(l.contentH=e.contentH),t=s._lastLayoutRect,(t.x!==l.x||t.y!==l.y||t.w!==l.w||t.h!==l.h)&&(a=d.repaintControls,a&&a.map&&!a.map[s._id]&&(a.push(s),a.map[s._id]=!0),t.x=l.x,t.y=l.y,t.w=l.w,t.h=l.h),s):l},repaint:function(){var e,t,n,r,i,o,a=this,s=0,l=0;o=document.createRange?function(e){return e}:Math.round,e=a.getEl().style,n=a._layoutRect,i=a._lastRepaintRect||{},r=a._borderBox,s=r.left+r.right,l=r.top+r.bottom,n.x!==i.x&&(e.left=o(n.x)+"px",i.x=n.x),n.y!==i.y&&(e.top=o(n.y)+"px",i.y=n.y),n.w!==i.w&&(e.width=o(n.w-s)+"px",i.w=n.w),n.h!==i.h&&(e.height=o(n.h-l)+"px",i.h=n.h),a._hasBody&&n.innerW!==i.innerW&&(t=a.getEl("body").style,t.width=o(n.innerW)+"px",i.innerW=n.innerW),a._hasBody&&n.innerH!==i.innerH&&(t=t||a.getEl("body").style,t.height=o(n.innerH)+"px",i.innerH=n.innerH),a._lastRepaintRect=i,a.fire("repaint",{},!1)},on:function(e,t){function n(e){var t,n;return"string"!=typeof e?e:function(i){return t||r.parentsAndSelf().each(function(r){var i=r.settings.callbacks;return i&&(t=i[e])?(n=r,!1):void 0}),t.call(n,i)}}var r=this;return o(r).on(e,n(t)),r},off:function(e,t){return o(this).off(e,t),this},fire:function(e,t,n){var r=this;if(t=t||{},t.control||(t.control=r),t=o(r).fire(e,t),n!==!1&&r.parent)for(var i=r.parent();i&&!t.isPropagationStopped();)i.fire(e,t,!1),i=i.parent();return t},hasEventListeners:function(e){return o(this).has(e)},parents:function(e){var t,n=this,i=new r;for(t=n.parent();t;t=t.parent())i.add(t);return e&&(i=i.filter(e)),i},parentsAndSelf:function(e){return new r(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},findCommonAncestor:function(e,t){for(var n;e;){for(n=t;n&&e!=n;)n=n.parent();if(e==n)break;e=e.parent()}return e},hasClass:function(e,t){var n=this._classes[t||"control"];return e=this.classPrefix+e,n&&!!n.map[e]},addClass:function(e,t){var n,r,i=this;return e=this.classPrefix+e,n=i._classes[t||"control"],n||(n=[],n.map={},i._classes[t||"control"]=n),n.map[e]||(n.map[e]=e,n.push(e),i._rendered&&(r=i.getEl(t),r&&(r.className=n.join(" ")))),i},removeClass:function(e,t){var n,r,i,o=this;if(e=this.classPrefix+e,n=o._classes[t||"control"],n&&n.map[e])for(delete n.map[e],r=n.length;r--;)n[r]===e&&n.splice(r,1);return o._rendered&&(i=o.getEl(t),i&&(i.className=n.join(" "))),o},toggleClass:function(e,t,n){var r=this;return t?r.addClass(e,n):r.removeClass(e,n),r},classes:function(e){var t=this._classes[e||"control"];return t?t.join(" "):""},innerHtml:function(e){return i.innerHtml(this.getEl(),e),this},getEl:function(e,t){var n,r=e?this._id+"-"+e:this._id;return n=a[r]=(t===!0?null:a[r])||i.get(r)},visible:function(e){var t,n=this;return"undefined"!=typeof e?(n._visible!==e&&(n._rendered&&(n.getEl().style.display=e?"":"none"),n._visible=e,t=n.parent(),t&&(t._lastRect=null),n.fire(e?"show":"hide")),n):n._visible},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,r=n.getEl(n.ariaTarget);return"undefined"==typeof t?n._aria[e]:(n._aria[e]=t,n._rendered&&r.setAttribute("role"==e?e:"aria-"+e,t),n)},encode:function(e,t){return t!==!1&&(e=this.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return d.translate?d.translate(e):e},before:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t),!0),t},after:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t)),t},remove:function(){var e,t,n=this,r=n.getEl(),o=n.parent();if(n.items){var s=n.items().toArray();for(t=s.length;t--;)s[t].remove()}o&&o.items&&(e=[],o.items().each(function(t){t!==n&&e.push(t)}),o.items().set(e),o._lastRect=null),n._eventsRoot&&n._eventsRoot==n&&i.off(r);var l=n.getRoot().controlIdLookup;if(l&&delete l[n._id],delete a[n._id],r&&r.parentNode){var c=r.getElementsByTagName("*");for(t=c.length;t--;)delete a[c[t].id];r.parentNode.removeChild(r)}return n._rendered=!1,n},renderBefore:function(e){var t=this;return e.parentNode.insertBefore(i.createFragment(t.renderHtml()),e),t.postRender(),t},renderTo:function(e){var t=this;return e=e||t.getContainerElm(),e.appendChild(i.createFragment(t.renderHtml())),t.postRender(),t},postRender:function(){var e,t,n,r,o,a=this,s=a.settings;for(r in s)0===r.indexOf("on")&&a.on(r.substr(2),s[r]);if(a._eventsRoot){for(n=a.parent();!o&&n;n=n.parent())o=n._eventsRoot;if(o)for(r in o._nativeEvents)a._nativeEvents[r]=!0}a.bindPendingEvents(),s.style&&(e=a.getEl(),e&&(e.setAttribute("style",s.style),e.style.cssText=s.style)),a._visible||i.css(a.getEl(),"display","none"),a.settings.border&&(t=a.borderBox(),i.css(a.getEl(),{"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left}));var l=a.getRoot();l.controlIdLookup||(l.controlIdLookup={}),l.controlIdLookup[a._id]=a;for(var c in a._aria)a.aria(c,a._aria[c]);a.fire("postrender",{},!1)},scrollIntoView:function(e){function t(e,t){var n,r,i=e;for(n=r=0;i&&i!=t&&i.nodeType;)n+=i.offsetLeft||0,r+=i.offsetTop||0,i=i.offsetParent;return{x:n,y:r}}var n,r,i,o,a,s,l=this.getEl(),c=l.parentNode,d=t(l,c);return n=d.x,r=d.y,i=l.offsetWidth,o=l.offsetHeight,a=c.clientWidth,s=c.clientHeight,"end"==e?(n-=a-i,r-=s-o):"center"==e&&(n-=a/2-i/2,r-=s/2-o/2),c.scrollLeft=n,c.scrollTop=r,this},bindPendingEvents:function(){function e(e){var t=m.getParentCtrl(e.target);t&&t.fire(e.type,e)}function t(){var e=d._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),d._lastHoverCtrl=null)}function n(e){var t,n,r,i=m.getParentCtrl(e.target),o=d._lastHoverCtrl,a=0;if(i!==o){if(d._lastHoverCtrl=i,n=i.parents().toArray().reverse(),n.push(i),o){for(r=o.parents().toArray().reverse(),r.push(o),a=0;a<r.length&&n[a]===r[a];a++);for(t=r.length-1;t>=a;t--)o=r[t],o.fire("mouseleave",{target:o.getEl()})}for(t=a;t<n.length;t++)i=n[t],i.fire("mouseenter",{target:i.getEl()})}}function r(e){e.preventDefault(),"mousewheel"==e.type?(e.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(e.deltaX=-.025*e.wheelDeltaX)):(e.deltaX=0,e.deltaY=e.detail),e=m.fire("wheel",e)}var o,a,c,d,u,f,m=this;if(m._rendered=!0,u=m._nativeEvents){for(c=m.parents().toArray(),c.unshift(m),o=0,a=c.length;!d&&a>o;o++)d=c[o]._eventsRoot;for(d||(d=c[c.length-1]||m),m._eventsRoot=d,a=o,o=0;a>o;o++)c[o]._eventsRoot=d;var p=d._delegates;p||(p=d._delegates={});for(f in u){if(!u)return!1;"wheel"!==f||l?("mouseenter"===f||"mouseleave"===f?d._hasMouseEnter||(i.on(d.getEl(),"mouseleave",t),i.on(d.getEl(),"mouseover",n),d._hasMouseEnter=1):p[f]||(i.on(d.getEl(),f,e),p[f]=!0),u[f]=!1):s?i.on(m.getEl(),"mousewheel",r):i.on(m.getEl(),"DOMMouseScroll",r)}}},getRoot:function(){for(var e,t=this,n=[];t;){if(t.rootControl){e=t.rootControl;break}n.push(t),e=t,t=t.parent()}e||(e=this);for(var r=n.length;r--;)n[r].rootControl=e;return e},reflow:function(){return this.repaint(),this}});return d}),r(Y,[],function(){var e,t={};return{add:function(e,n){t[e.toLowerCase()]=n},has:function(e){return!!t[e.toLowerCase()]},create:function(n,r){var i,o,a;if(!e){a=tinymce.ui;for(o in a)t[o.toLowerCase()]=a[o];e=!0}if("string"==typeof n?(r=r||{},r.type=n):(r=n,n=r.type),n=n.toLowerCase(),i=t[n],!i)throw new Error("Could not find control by type: "+n);return i=new i(r),i.type=n,i}}}),r(G,[],function(){return function(e){function t(e){return e=e||y,e&&e.getAttribute("role")}function n(e){for(var n,r=e||y;r=r.parentNode;)if(n=t(r))return n}function r(e){var t=y;return t?t.getAttribute("aria-"+e):void 0}function i(e){var t=e.tagName.toUpperCase();return"INPUT"==t||"TEXTAREA"==t}function o(e){return!(!i(e)||e.hidden)||!!/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell)$/.test(t(e))}function a(e){function t(e){if(1==e.nodeType&&"none"!=e.style.display){o(e)&&n.push(e);for(var r=0;r<e.childNodes.length;r++)t(e.childNodes[r])}}var n=[];return t(e||x.getEl()),n}function s(e){var t,n;e=e||b,n=e.parents().toArray(),n.unshift(e);for(var r=0;r<n.length&&(t=n[r],!t.settings.ariaRoot);r++);return t}function l(e){var t=s(e),n=a(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?c(t.lastAriaIndex,n):c(0,n)}function c(e,t){return 0>e?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function d(e,t){var n=-1,r=s();t=t||a(r.getEl());for(var i=0;i<t.length;i++)t[i]===y&&(n=i);n+=e,r.lastAriaIndex=c(n,t)}function u(){var e=n();"tablist"==e?d(-1,a(y.parentNode)):b.parent().submenu?g():d(-1)}function f(){var e=t(),i=n();"tablist"==i?d(1,a(y.parentNode)):"menuitem"==e&&"menu"==i&&r("haspopup")?v():d(1)}function m(){d(-1)}function p(){var e=t(),i=n();"menuitem"==e&&"menubar"==i?v():"button"==e&&r("haspopup")?v({key:"down"}):d(1)}function h(e){var t=n();if("tablist"==t){var r=a(b.getEl("body"))[0];r&&r.focus()}else d(e.shiftKey?-1:1)}function g(){b.fire("cancel")}function v(e){e=e||{},b.fire("click",{target:y,aria:e})}var y,b,x=e.root;try{y=document.activeElement}catch(e){y=document.body}return b=x.getParentCtrl(y),x.on("keydown",function(e){function t(e,t){i(y)||t(e)!==!1&&e.preventDefault()}if(!e.isDefaultPrevented())switch(e.keyCode){case 37:t(e,u);break;case 39:t(e,f);break;case 38:t(e,m);break;case 40:t(e,p);break;case 27:g();break;case 14:case 13:case 32:t(e,v);break;case 9:h(e)!==!1&&e.preventDefault()}}),x.on("focusin",function(e){y=e.target,b=e.control}),{focusFirst:l}}}),r(J,[K,q,$,Y,G,c,j],function(e,t,n,r,i,o,a){var s={};return e.extend({layout:"",innerClass:"container-inner",init:function(e){var n=this;n._super(e),e=n.settings,n._fixed=e.fixed,n._items=new t,n.isRtl()&&n.addClass("rtl"),n.addClass("container"),n.addClass("container-body","body"),e.containerCls&&n.addClass(e.containerCls),n._layout=r.create((e.layout||n.layout)+"layout"),n.settings.items&&n.add(n.settings.items),n._hasBody=!0},items:function(){return this._items},find:function(e){return e=s[e]=s[e]||new n(e),e.find(this)},add:function(e){var t=this;return t.items().add(t.create(e)).parent(t),t},focus:function(e){var t,n,r,i=this;return e&&(n=i.keyboardNav||i.parents().eq(-1)[0].keyboardNav)?void n.focusFirst(i):(r=i.find("*"),i.statusbar&&r.add(i.statusbar.items()),r.each(function(e){return e.settings.autofocus?(t=null,!1):void(e.canFocus&&(t=t||e))}),t&&t.focus(),i)},replace:function(e,t){for(var n,r=this.items(),i=r.length;i--;)if(r[i]===e){r[i]=t;break}i>=0&&(n=t.getEl(),n&&n.parentNode.removeChild(n),n=e.getEl(),n&&n.parentNode.removeChild(n)),t.parent(this)},create:function(t){var n,i=this,a=[];return o.isArray(t)||(t=[t]),o.each(t,function(t){t&&(t instanceof e||("string"==typeof t&&(t={type:t}),n=o.extend({},i.settings.defaults,t),t.type=n.type=n.type||t.type||i.settings.defaultType||(n.defaults?n.defaults.type:null),t=r.create(n)),a.push(t))}),a},renderNew:function(){var e=this;return e.items().each(function(t,n){var r,i;t.parent(e),t._rendered||(r=e.getEl("body"),i=a.createFragment(t.renderHtml()),r.hasChildNodes()&&n<=r.childNodes.length-1?r.insertBefore(i,r.childNodes[n]):r.appendChild(i),t.postRender())}),e._layout.applyClasses(e),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;return t.items().set(t.create(e).concat(t.items().toArray())),t.renderNew()},insert:function(e,t,n){var r,i,o,a=this;return e=a.create(e),r=a.items(),!n&&t<r.length-1&&(t+=1),t>=0&&t<r.length&&(i=r.slice(0,t).toArray(),o=r.slice(t).toArray(),r.set(i.concat(e,o))),a.renderNew()},fromJSON:function(e){var t=this;for(var n in e)t.find("#"+n).value(e[n]);return t},toJSON:function(){var e=this,t={};return e.find("*").each(function(e){var n=e.name(),r=e.value();n&&"undefined"!=typeof r&&(t[n]=r)}),t},preRender:function(){},renderHtml:function(){var e=this,t=e._layout,n=this.settings.role;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'"'+(n?' role="'+this.settings.role+'"':"")+'><div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"},postRender:function(){var e,t=this;return t.items().exec("postRender"),t._super(),t._layout.postRender(t),t._rendered=!0,t.settings.style&&a.css(t.getEl(),t.settings.style),t.settings.border&&(e=t.borderBox(),a.css(t.getEl(),{"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left})),t.parent()||(t.keyboardNav=new i({
root:t})),t},initLayoutRect:function(){var e=this,t=e._super();return e._layout.recalc(e),t},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;return n&&n.w==t.w&&n.h==t.h?void 0:(e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0)},reflow:function(){var t;if(this.visible()){for(e.repaintControls=[],e.repaintControls.map={},this.recalc(),t=e.repaintControls.length;t--;)e.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),e.repaintControls=[]}return this}})}),r(X,[j],function(e){function t(){var e,t,n,r,i,o,a,s,l=document,c=Math.max;return e=l.documentElement,t=l.body,n=c(e.scrollWidth,t.scrollWidth),r=c(e.clientWidth,t.clientWidth),i=c(e.offsetWidth,t.offsetWidth),o=c(e.scrollHeight,t.scrollHeight),a=c(e.clientHeight,t.clientHeight),s=c(e.offsetHeight,t.offsetHeight),{width:i>n?r:n,height:s>o?a:o}}return function(n,r){function i(){return f.getElementById(r.handle||n)}var o,a,s,l,c,d,u,f=document;r=r||{},s=function(n){var s,m,p=t();n.preventDefault(),a=n.button,s=i(),d=n.screenX,u=n.screenY,m=window.getComputedStyle?window.getComputedStyle(s,null).getPropertyValue("cursor"):s.runtimeStyle.cursor,o=f.createElement("div"),e.css(o,{position:"absolute",top:0,left:0,width:p.width,height:p.height,zIndex:2147483647,opacity:1e-4,cursor:m}),f.body.appendChild(o),e.on(f,"mousemove",c),e.on(f,"mouseup",l),r.start(n)},c=function(e){return e.button!==a?l(e):(e.deltaX=e.screenX-d,e.deltaY=e.screenY-u,e.preventDefault(),void r.drag(e))},l=function(t){e.off(f,"mousemove",c),e.off(f,"mouseup",l),o.parentNode.removeChild(o),r.stop&&r.stop(t)},this.destroy=function(){e.off(i())},e.on(i(),"mousedown",s)}}),r(Q,[j,X],function(e,t){return{init:function(){var e=this;e.on("repaint",e.renderScroll)},renderScroll:function(){function n(){function t(t,a,s,l,c,d){var u,f,m,p,h,g,v,y,b;if(f=i.getEl("scroll"+t)){if(y=a.toLowerCase(),b=s.toLowerCase(),i.getEl("absend")&&e.css(i.getEl("absend"),y,i.layoutRect()[l]-1),!c)return void e.css(f,"display","none");e.css(f,"display","block"),u=i.getEl("body"),m=i.getEl("scroll"+t+"t"),p=u["client"+s]-2*o,p-=n&&r?f["client"+d]:0,h=u["scroll"+s],g=p/h,v={},v[y]=u["offset"+a]+o,v[b]=p,e.css(f,v),v={},v[y]=u["scroll"+a]*g,v[b]=p*g,e.css(m,v)}}var n,r,a;a=i.getEl("body"),n=a.scrollWidth>a.clientWidth,r=a.scrollHeight>a.clientHeight,t("h","Left","Width","contentW",n,"Height"),t("v","Top","Height","contentH",r,"Width")}function r(){function n(n,r,a,s,l){var c,d=i._id+"-scroll"+n,u=i.classPrefix;i.getEl().appendChild(e.createFragment('<div id="'+d+'" class="'+u+"scrollbar "+u+"scrollbar-"+n+'"><div id="'+d+'t" class="'+u+'scrollbar-thumb"></div></div>')),i.draghelper=new t(d+"t",{start:function(){c=i.getEl("body")["scroll"+r],e.addClass(e.get(d),u+"active")},drag:function(e){var t,d,u,f,m=i.layoutRect();d=m.contentW>m.innerW,u=m.contentH>m.innerH,f=i.getEl("body")["client"+a]-2*o,f-=d&&u?i.getEl("scroll"+n)["client"+l]:0,t=f/i.getEl("body")["scroll"+a],i.getEl("body")["scroll"+r]=c+e["delta"+s]/t},stop:function(){e.removeClass(e.get(d),u+"active")}})}i.addClass("scroll"),n("v","Top","Height","Y","Width"),n("h","Left","Width","X","Height")}var i=this,o=2;i.settings.autoScroll&&(i._hasScroll||(i._hasScroll=!0,r(),i.on("wheel",function(e){var t=i.getEl("body");t.scrollLeft+=10*(e.deltaX||0),t.scrollTop+=10*e.deltaY,n()}),e.on(i.getEl("body"),"scroll",n)),n())}}}),r(Z,[J,Q],function(e,t){return e.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[t],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),"undefined"==typeof n?n='<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}})}),r(ee,[j],function(e){function t(t,n,r){var i,o,a,s,l,c,d,u,f,m;return f=e.getViewPort(),o=e.getPos(n),a=o.x,s=o.y,t._fixed&&(a-=f.x,s-=f.y),i=t.getEl(),m=e.getSize(i),l=m.width,c=m.height,m=e.getSize(n),d=m.width,u=m.height,r=(r||"").split(""),"b"===r[0]&&(s+=u),"r"===r[1]&&(a+=d),"c"===r[0]&&(s+=Math.round(u/2)),"c"===r[1]&&(a+=Math.round(d/2)),"b"===r[3]&&(s-=c),"r"===r[4]&&(a-=l),"c"===r[3]&&(s-=Math.round(c/2)),"c"===r[4]&&(a-=Math.round(l/2)),{x:a,y:s,w:l,h:c}}return{testMoveRel:function(n,r){for(var i=e.getViewPort(),o=0;o<r.length;o++){var a=t(this,n,r[o]);if(this._fixed){if(a.x>0&&a.x+a.w<i.w&&a.y>0&&a.y+a.h<i.h)return r[o]}else if(a.x>i.x&&a.x+a.w<i.w+i.x&&a.y>i.y&&a.y+a.h<i.h+i.y)return r[o]}return r[0]},moveRel:function(e,n){"string"!=typeof n&&(n=this.testMoveRel(e,n));var r=t(this,e,n);return this.moveTo(r.x,r.y)},moveBy:function(e,t){var n=this,r=n.layoutRect();return n.moveTo(r.x+e,r.y+t),n},moveTo:function(t,n){function r(e,t,n){return 0>e?0:e+n>t?(e=t-n,0>e?0:e):e}var i=this;if(i.settings.constrainToViewport){var o=e.getViewPort(window),a=i.layoutRect();t=r(t,o.w+o.x,a.w),n=r(n,o.h+o.y,a.h)}return i._rendered?i.layoutRect({x:t,y:n}).repaint():(i.settings.x=t,i.settings.y=n),i.fire("move",{x:t,y:n}),i}}}),r(te,[j],function(e){return{resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(t,n){if(1>=t||1>=n){var r=e.getWindowSize();t=1>=t?t*r.w:t,n=1>=n?n*r.h:n}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:n,w:t,h:n}).reflow()},resizeBy:function(e,t){var n=this,r=n.layoutRect();return n.resizeTo(r.w+e,r.h+t)}}}),r(ne,[Z,ee,te,j],function(e,t,n,r){function i(){function e(e,t){for(;e;){if(e==t)return!0;e=e.parent()}}c||(c=function(t){if(2!=t.button)for(var n=m.length;n--;){var r=m[n],i=r.getParentCtrl(t.target);if(r.settings.autohide){if(i&&(e(i,r)||r.parent()===i))continue;t=r.fire("autohide",{target:t.target}),t.isDefaultPrevented()||r.hide()}}},r.on(document,"click",c))}function o(){d||(d=function(){var e;for(e=m.length;e--;)s(m[e])},r.on(window,"scroll",d))}function a(){u||(u=function(){h.hideAll()},r.on(window,"resize",u))}function s(e){function t(t,n){for(var r,i=0;i<m.length;i++)if(m[i]!=e)for(r=m[i].parent();r&&(r=r.parent());)r==e&&m[i].fixed(t).moveBy(0,n).repaint()}var n=r.getViewPort().y;e.settings.autofix&&(e._fixed?e._autoFixY>n&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),t(!1,e._autoFixY-n)):(e._autoFixY=e.layoutRect().y,e._autoFixY<n&&(e.fixed(!0).layoutRect({y:0}).repaint(),t(!0,n-e._autoFixY))))}function l(e){var t;for(t=m.length;t--;)m[t]===e&&m.splice(t,1);for(t=p.length;t--;)p[t]===e&&p.splice(t,1)}var c,d,u,f,m=[],p=[],h=e.extend({Mixins:[t,n],init:function(e){function t(){var e,t,i=h.zIndex||65535;if(p.length)for(e=0;e<p.length;e++)p[e].modal&&(i++,t=p[e]),p[e].getEl().style.zIndex=i,p[e].zIndex=i,i++;var o=document.getElementById(n.classPrefix+"modal-block");t?r.css(o,"z-index",t.zIndex-1):o&&(o.parentNode.removeChild(o),f=!1),h.currentZIndex=i}var n=this;n._super(e),n._eventsRoot=n,n.addClass("floatpanel"),e.autohide&&(i(),a(),m.push(n)),e.autofix&&(o(),n.on("move",function(){s(this)})),n.on("postrender show",function(e){if(e.control==n){var i,o=n.classPrefix;n.modal&&!f&&(i=r.createFragment('<div id="'+o+'modal-block" class="'+o+"reset "+o+'fade"></div>'),i=i.firstChild,n.getContainerElm().appendChild(i),setTimeout(function(){r.addClass(i,o+"in"),r.addClass(n.getEl(),o+"in")},0),f=!0),p.push(n),t()}}),n.on("close hide",function(e){if(e.control==n){for(var r=p.length;r--;)p[r]===n&&p.splice(r,1);t()}}),n.on("show",function(){n.parents().each(function(e){return e._fixed?(n.fixed(!0),!1):void 0})}),e.popover&&(n._preBodyHtml='<div class="'+n.classPrefix+'arrow"></div>',n.addClass("popover").addClass("bottom").addClass(n.isRtl()?"end":"start"))},fixed:function(e){var t=this;if(t._fixed!=e){if(t._rendered){var n=r.getViewPort();e?t.layoutRect().y-=n.y:t.layoutRect().y+=n.y}t.toggleClass("fixed",e),t._fixed=e}return t},show:function(){var e,t=this,n=t._super();for(e=m.length;e--&&m[e]!==t;);return-1===e&&m.push(t),n},hide:function(){return l(this),this._super()},hideAll:function(){h.hideAll()},close:function(){var e=this;return e.fire("close"),e.remove()},remove:function(){l(this),this._super()},postRender:function(){var e=this;return e.settings.bodyRole&&this.getEl("body").setAttribute("role",e.settings.bodyRole),e._super()}});return h.hideAll=function(){for(var e=m.length;e--;){var t=m[e];t&&t.settings.autohide&&(t.hide(),m.splice(e,1))}},h}),r(re,[ne,Z,j,X],function(e,t,n,r){var i=e.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var n=this;n._super(e),n.isRtl()&&n.addClass("rtl"),n.addClass("window"),n._fixed=!0,e.buttons&&(n.statusbar=new t({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:n.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),n.statusbar.addClass("foot"),n.statusbar.parent(n)),n.on("click",function(e){-1!=e.target.className.indexOf(n.classPrefix+"close")&&n.close()}),n.on("cancel",function(){n.close()}),n.aria("describedby",n.describedBy||n._id+"-none"),n.aria("label",e.title),n._fullscreen=!1},recalc:function(){var e,t,r,i,o=this,a=o.statusbar;o._fullscreen&&(o.layoutRect(n.getWindowSize()),o.layoutRect().contentH=o.layoutRect().innerH),o._super(),e=o.layoutRect(),o.settings.title&&!o._fullscreen&&(t=e.headerW,t>e.w&&(r=e.x-Math.max(0,t/2),o.layoutRect({w:t,x:r}),i=!0)),a&&(a.layoutRect({w:o.layoutRect().innerW}).recalc(),t=a.layoutRect().minW+e.deltaW,t>e.w&&(r=e.x-Math.max(0,t-e.w),o.layoutRect({w:t,x:r}),i=!0)),i&&o.recalc()},initLayoutRect:function(){var e,t=this,r=t._super(),i=0;if(t.settings.title&&!t._fullscreen){e=t.getEl("head");var o=n.getSize(e);r.headerW=o.width,r.headerH=o.height,i+=r.headerH}t.statusbar&&(i+=t.statusbar.layoutRect().h),r.deltaH+=i,r.minH+=i,r.h+=i;var a=n.getWindowSize();return r.x=Math.max(0,a.w/2-r.w/2),r.y=Math.max(0,a.h/2-r.h/2),r},renderHtml:function(){var e=this,t=e._layout,n=e._id,r=e.classPrefix,i=e.settings,o="",a="",s=i.html;return e.preRender(),t.preRender(e),i.title&&(o='<div id="'+n+'-head" class="'+r+'window-head"><div id="'+n+'-title" class="'+r+'title">'+e.encode(i.title)+'</div><button type="button" class="'+r+'close" aria-hidden="true">×</button><div id="'+n+'-dragh" class="'+r+'dragh"></div></div>'),i.url&&(s='<iframe src="'+i.url+'" tabindex="-1"></iframe>'),"undefined"==typeof s&&(s=t.renderHtml(e)),e.statusbar&&(a=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes()+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+o+'<div id="'+n+'-body" class="'+e.classes("body")+'">'+s+"</div>"+a+"</div></div>"},fullscreen:function(e){var t,r,i=this,o=document.documentElement,a=i.classPrefix;if(e!=i._fullscreen)if(n.on(window,"resize",function(){var e;if(i._fullscreen)if(t)i._timer||(i._timer=setTimeout(function(){var e=n.getWindowSize();i.moveTo(0,0).resizeTo(e.w,e.h),i._timer=0},50));else{e=(new Date).getTime();var r=n.getWindowSize();i.moveTo(0,0).resizeTo(r.w,r.h),(new Date).getTime()-e>50&&(t=!0)}}),r=i.layoutRect(),i._fullscreen=e,e){i._initial={x:r.x,y:r.y,w:r.w,h:r.h},i._borderBox=i.parseBox("0"),i.getEl("head").style.display="none",r.deltaH-=r.headerH+2,n.addClass(o,a+"fullscreen"),n.addClass(document.body,a+"fullscreen"),i.addClass("fullscreen");var s=n.getWindowSize();i.moveTo(0,0).resizeTo(s.w,s.h)}else i._borderBox=i.parseBox(i.settings.border),i.getEl("head").style.display="",r.deltaH+=r.headerH,n.removeClass(o,a+"fullscreen"),n.removeClass(document.body,a+"fullscreen"),i.removeClass("fullscreen"),i.moveTo(i._initial.x,i._initial.y).resizeTo(i._initial.w,i._initial.h);return i.reflow()},postRender:function(){var e,t=this;setTimeout(function(){t.addClass("in")},0),t._super(),t.statusbar&&t.statusbar.postRender(),t.focus(),this.dragHelper=new r(t._id+"-dragh",{start:function(){e={x:t.layoutRect().x,y:t.layoutRect().y}},drag:function(n){t.moveTo(e.x+n.deltaX,e.y+n.deltaY)}}),t.on("submit",function(e){e.isDefaultPrevented()||t.close()})},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e=this,t=e.classPrefix;e.dragHelper.destroy(),e._super(),e.statusbar&&this.statusbar.remove(),e._fullscreen&&(n.removeClass(document.documentElement,t+"fullscreen"),n.removeClass(document.body,t+"fullscreen"))},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});return i}),r(ie,[re],function(e){var t=e.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(n){var r,i=n.callback||function(){};switch(n.buttons){case t.OK_CANCEL:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close(),i(!0)}},{type:"button",text:"Cancel",onClick:function(e){e.control.parents()[1].close(),i(!1)}}];break;case t.YES_NO:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close(),i(!0)}}];break;case t.YES_NO_CANCEL:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close()}}];break;default:r=[{type:"button",text:"Ok",subtype:"primary",onClick:function(e){e.control.parents()[1].close(),i(!0)}}]}return new e({padding:20,x:n.x,y:n.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:r,title:n.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:n.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:n.onClose,onCancel:function(){i(!1)}}).renderTo(document.body).reflow()},alert:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,t.msgBox(e)},confirm:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,e.buttons=t.OK_CANCEL,t.msgBox(e)}}});return t}),r(oe,[re,ie],function(e,t){return function(n){function r(){return o.length?o[o.length-1]:void 0}var i=this,o=[];i.windows=o,i.open=function(t,r){var i;return n.editorManager.activeEditor=n,t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){i.find("form")[0].submit()}},{text:"Cancel",onclick:function(){i.close()}}]),i=new e(t),o.push(i),i.on("close",function(){for(var e=o.length;e--;)o[e]===i&&o.splice(e,1);n.focus()}),t.data&&i.on("postRender",function(){this.find("*").each(function(e){var n=e.name();n in t.data&&e.value(t.data[n])})}),i.features=t||{},i.params=r||{},n.nodeChanged(),i.renderTo().reflow()},i.alert=function(e,r,i){t.alert(e,function(){r?r.call(i||this):n.focus()})},i.confirm=function(e,n,r){t.confirm(e,function(e){n.call(r||this,e)})},i.close=function(){r()&&r().close()},i.getParams=function(){return r()?r().params:null},i.setParams=function(e){r()&&(r().params=e)},i.getWindows=function(){return o}}}),r(ae,[A,x,w,h,d,c],function(e,t,n,r,i,o){return function(a){function s(e,t){try{a.getDoc().execCommand(e,!1,t)}catch(e){}}function l(){var e=a.getDoc().documentMode;return e?e:6}function c(e){return e.isDefaultPrevented()}function d(){function t(e){var t=new l(function(){});o.each(a.getBody().getElementsByTagName("*"),function(e){"SPAN"==e.tagName&&e.setAttribute("mce-data-marked",1),!e.hasAttribute("data-mce-style")&&e.hasAttribute("style")&&a.dom.setAttrib(e,"style",e.getAttribute("style"))}),t.observe(a.getDoc(),{childList:!0,attributes:!0,subtree:!0,attributeFilter:["style"]}),a.getDoc().execCommand(e?"ForwardDelete":"Delete",!1,null);var n=a.selection.getRng(),r=n.startContainer.parentNode;o.each(t.takeRecords(),function(e){if(q.isChildOf(e.target,a.getBody())){if("style"==e.attributeName){var t=e.target.getAttribute("data-mce-style");t?e.target.setAttribute("style",t):e.target.removeAttribute("style")}o.each(e.addedNodes,function(e){if("SPAN"==e.nodeName&&!e.getAttribute("mce-data-marked")){var t,i;e==r&&(t=n.startOffset,i=e.firstChild),q.remove(e,!0),i&&(n.setStart(i,t),n.setEnd(i,t),a.selection.setRng(n))}})}}),t.disconnect(),o.each(a.dom.select("span[mce-data-marked]"),function(e){e.removeAttribute("mce-data-marked")})}var n,r,i=a.getDoc(),s="data:text/mce-internal,",l=window.MutationObserver;l||(n=!0,l=function(){function e(e){var t=e.relatedNode||e.target;r.push({target:t,addedNodes:[t]})}function t(e){var t=e.relatedNode||e.target;r.push({target:t,attributeName:e.attrName})}var n,r=[];this.observe=function(r){n=r,n.addEventListener("DOMSubtreeModified",e,!1),n.addEventListener("DOMNodeInsertedIntoDocument",e,!1),n.addEventListener("DOMNodeInserted",e,!1),n.addEventListener("DOMAttrModified",t,!1)},this.disconnect=function(){n.removeEventListener("DOMSubtreeModified",e,!1),n.removeEventListener("DOMNodeInsertedIntoDocument",e,!1),n.removeEventListener("DOMNodeInserted",e,!1),n.removeEventListener("DOMAttrModified",t,!1)},this.takeRecords=function(){return r}}),a.on("keydown",function(n){var r=n.keyCode==$,i=e.metaKeyPressed(n);if(!c(n)&&(r||n.keyCode==V)){var o=a.selection.getRng(),s=o.startContainer,l=o.startOffset;if(!i&&o.collapsed&&3==s.nodeType&&(r?l<s.data.length:l>0))return;n.preventDefault(),i&&a.selection.getSel().modify("extend",r?"forward":"backward","word"),t(r)}}),a.on("keypress",function(n){c(n)||j.isCollapsed()||!n.charCode||e.metaKeyPressed(n)||(n.preventDefault(),t(!0),a.selection.setContent(String.fromCharCode(n.charCode)))}),a.addCommand("Delete",function(){t()}),a.addCommand("ForwardDelete",function(){t(!0)}),n||(a.on("dragstart",function(e){var t;a.selection.isCollapsed()&&"IMG"==e.target.tagName&&j.select(e.target),r=j.getRng(),t=a.selection.getContent(),t.length>0&&e.dataTransfer.setData("URL","data:text/mce-internal,"+escape(t))}),a.on("drop",function(e){if(!c(e)){var n=e.dataTransfer.getData("URL");if(!n||-1==n.indexOf(s)||!i.caretRangeFromPoint)return;n=unescape(n.substr(s.length)),i.caretRangeFromPoint&&(e.preventDefault(),window.setTimeout(function(){var o=i.caretRangeFromPoint(e.x,e.y);r&&(j.setRng(r),r=null),t(),j.setRng(o),a.insertContent(n)},0))}}),a.on("cut",function(e){!c(e)&&e.clipboardData&&(e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/html",a.selection.getContent()),e.clipboardData.setData("text/plain",a.selection.getContent({format:"text"})),t(!0))}))}function u(){function e(e){var t=q.create("body"),n=e.cloneContents();return t.appendChild(n),j.serializer.serialize(t,{format:"html"})}function n(n){if(!n.setStart){if(n.item)return!1;var r=n.duplicate();return r.moveToElementText(a.getBody()),t.compareRanges(n,r)}var i=e(n),o=q.createRng();o.selectNode(a.getBody());var s=e(o);return i===s}a.on("keydown",function(e){var t,r,i=e.keyCode;if(!c(e)&&(i==$||i==V)){if(t=a.selection.isCollapsed(),r=a.getBody(),t&&!q.isEmpty(r))return;if(!t&&!n(a.selection.getRng()))return;e.preventDefault(),a.setContent(""),r.firstChild&&q.isBlock(r.firstChild)?a.selection.setCursorLocation(r.firstChild,0):a.selection.setCursorLocation(r,0),a.nodeChanged()}})}function f(){a.on("keydown",function(t){!c(t)&&65==t.keyCode&&e.metaKeyPressed(t)&&(t.preventDefault(),a.execCommand("SelectAll"))})}function m(){a.settings.content_editable||(q.bind(a.getDoc(),"focusin",function(){j.setRng(j.getRng())}),q.bind(a.getDoc(),"mousedown",function(e){e.target==a.getDoc().documentElement&&(a.getBody().focus(),j.setRng(j.getRng()))}))}function p(){a.on("keydown",function(e){if(!c(e)&&e.keyCode===V){if(!a.getBody().getElementsByTagName("hr").length)return;if(j.isCollapsed()&&0===j.getRng(!0).startOffset){var t=j.getNode(),n=t.previousSibling;if("HR"==t.nodeName)return q.remove(t),void e.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(q.remove(n),e.preventDefault())}}})}function h(){window.Range.prototype.getClientRects||a.on("mousedown",function(e){if(!c(e)&&"HTML"===e.target.nodeName){var t=a.getBody();t.blur(),setTimeout(function(){t.focus()},0)}})}function g(){a.on("click",function(e){e=e.target,/^(IMG|HR)$/.test(e.nodeName)&&j.getSel().setBaseAndExtent(e,0,e,1),"A"==e.nodeName&&q.hasClass(e,"mce-item-anchor")&&j.select(e)})}function v(){function e(){var e=q.getAttribs(j.getStart().cloneNode(!1));return function(){var t=j.getStart();t!==a.getBody()&&(q.setAttrib(t,"style",null),U(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}}function t(){return!j.isCollapsed()&&q.getParent(j.getStart(),q.isBlock)!=q.getParent(j.getEnd(),q.isBlock)}a.on("keypress",function(n){var r;return c(n)||8!=n.keyCode&&46!=n.keyCode||!t()?void 0:(r=e(),a.getDoc().execCommand("delete",!1,null),r(),n.preventDefault(),!1)}),q.bind(a.getDoc(),"cut",function(n){var r;!c(n)&&t()&&(r=e(),setTimeout(function(){r()},0))})}function y(){var e,n;a.on("selectionchange",function(){n&&(clearTimeout(n),n=0),n=window.setTimeout(function(){if(!a.removed){var n=j.getRng();e&&t.compareRanges(n,e)||(a.nodeChanged(),e=n)}},50)})}function b(){document.body.setAttribute("role","application")}function x(){a.on("keydown",function(e){if(!c(e)&&e.keyCode===V&&j.isCollapsed()&&0===j.getRng(!0).startOffset){var t=j.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})}function C(){l()>7||(s("RespectVisibilityInDesign",!0),a.contentStyles.push(".mceHideBrInPre pre br {display: none}"),q.addClass(a.getBody(),"mceHideBrInPre"),Y.addNodeFilter("pre",function(e){for(var t,r,i,o,a=e.length;a--;)for(t=e[a].getAll("br"),r=t.length;r--;)i=t[r],o=i.prev,o&&3===o.type&&"\n"!=o.value.charAt(o.value-1)?o.value+="\n":i.parent.insert(new n("#text",3),i,!0).value="\n"}),G.addNodeFilter("pre",function(e){for(var t,n,r,i,o=e.length;o--;)for(t=e[o].getAll("br"),n=t.length;n--;)r=t[n],i=r.prev,i&&3==i.type&&(i.value=i.value.replace(/\r?\n$/,""))}))}function w(){q.bind(a.getBody(),"mouseup",function(){var e,t=j.getNode();"IMG"==t.nodeName&&((e=q.getStyle(t,"width"))&&(q.setAttrib(t,"width",e.replace(/[^0-9%]+/g,"")),q.setStyle(t,"width","")),(e=q.getStyle(t,"height"))&&(q.setAttrib(t,"height",e.replace(/[^0-9%]+/g,"")),q.setStyle(t,"height","")))})}function _(){a.on("keydown",function(t){var n,r,i,o,s;if(!c(t)&&t.keyCode==e.BACKSPACE&&(n=j.getRng(),r=n.startContainer,i=n.startOffset,o=q.getRoot(),s=r,n.collapsed&&0===i)){for(;s&&s.parentNode&&s.parentNode.firstChild==s&&s.parentNode!=o;)s=s.parentNode;"BLOCKQUOTE"===s.tagName&&(a.formatter.toggle("blockquote",null,s),n=q.createRng(),n.setStart(r,0),n.setEnd(r,0),j.setRng(n))}})}function k(){function e(){a._refreshContentEditable(),s("StyleWithCSS",!1),s("enableInlineTableEditing",!1),K.object_resizing||s("enableObjectResizing",!1)}K.readonly||a.on("BeforeExecCommand MouseDown",e)}function N(){function e(){U(q.select("a"),function(e){var t=e.parentNode,n=q.getRoot();if(t.lastChild===e){for(;t&&!q.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}q.add(t,"br",{"data-mce-bogus":1})}})}a.on("SetContent ExecCommand",function(t){("setcontent"==t.type||"mceInsertLink"===t.command)&&e()})}function S(){K.forced_root_block&&a.on("init",function(){s("DefaultParagraphSeparator",K.forced_root_block)})}function E(){a.on("Undo Redo SetContent",function(e){e.initial||a.execCommand("mceRepaint")})}function T(){a.on("keydown",function(e){var t;c(e)||e.keyCode!=V||(t=a.getDoc().selection.createRange(),t&&t.item&&(e.preventDefault(),a.undoManager.beforeChange(),q.remove(t.item(0)),a.undoManager.add()))})}function R(){var e;l()>=10&&(e="",U("p div h1 h2 h3 h4 h5 h6".split(" "),function(t,n){e+=(n>0?",":"")+t+":empty"}),a.contentStyles.push(e+"{padding-right: 1px !important}"))}function A(){l()<9&&(Y.addNodeFilter("noscript",function(e){for(var t,n,r=e.length;r--;)t=e[r],n=t.firstChild,n&&t.attr("data-mce-innertext",n.value)}),G.addNodeFilter("noscript",function(e){for(var t,i,o,a=e.length;a--;)t=e[a],i=e[a].firstChild,i?i.value=r.decode(i.value):(o=t.attributes.map["data-mce-innertext"],o&&(t.attr("data-mce-innertext",null),i=new n("#text",3),i.value=o,i.raw=!0,t.append(i)))}))}function B(){function e(e,t){var n=s.createTextRange();try{n.moveToPoint(e,t)}catch(e){n=null}return n}function t(t){var r;t.button?(r=e(t.x,t.y),r&&(r.compareEndPoints("StartToStart",i)>0?r.setEndPoint("StartToStart",i):r.setEndPoint("EndToEnd",i),r.select())):n()}function n(){var e=a.selection.createRange();i&&!e.item&&0===e.compareEndPoints("StartToEnd",e)&&i.select(),q.unbind(a,"mouseup",n),q.unbind(a,"mousemove",t),i=r=0}var r,i,o,a=q.doc,s=a.body;a.documentElement.unselectable=!0,q.bind(a,"mousedown contextmenu",function(s){if("HTML"===s.target.nodeName){if(r&&n(),o=a.documentElement,o.scrollHeight>o.clientHeight)return;r=1,i=e(s.x,s.y),i&&(q.bind(a,"mouseup",n),q.bind(a,"mousemove",t),q.getRoot().focus(),i.select())}})}function P(){a.on("keyup focusin mouseup",function(t){65==t.keyCode&&e.metaKeyPressed(t)||j.normalize()},!0)}function D(){a.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}function M(){a.inline||a.on("keydown",function(){document.activeElement==document.body&&a.getWin().focus()})}function L(){a.inline||(a.contentStyles.push("body {min-height: 150px}"),a.on("click",function(e){"HTML"==e.target.nodeName&&(a.getBody().focus(),a.selection.normalize(),a.nodeChanged())}))}function I(){i.mac&&a.on("keydown",function(t){!e.metaKeyPressed(t)||37!=t.keyCode&&39!=t.keyCode||(t.preventDefault(),a.selection.getSel().modify("move",37==t.keyCode?"backward":"forward","word"))})}function O(){s("AutoUrlDetect",!1)}function H(){a.inline||a.on("focus blur beforegetcontent",function(){var e=a.dom.create("br");a.getBody().appendChild(e),e.parentNode.removeChild(e)},!0)}function F(){a.on("click",function(e){var t=e.target;do if("A"===t.tagName)return void e.preventDefault();while(t=t.parentNode)}),a.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}function z(){a.on("init",function(){a.dom.bind(a.getBody(),"submit",function(e){e.preventDefault()})})}function W(){Y.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"==e[t].attr("class")&&e[t].remove()})}var U=o.each,V=e.BACKSPACE,$=e.DELETE,q=a.dom,j=a.selection,K=a.settings,Y=a.parser,G=a.serializer,J=i.gecko,X=i.ie,Q=i.webkit;_(),u(),P(),Q&&(d(),m(),g(),S(),z(),x(),W(),i.iOS?(y(),M(),L(),F()):f()),X&&i.ie<11&&(p(),b(),C(),w(),T(),R(),A(),B()),i.ie>=11&&(L(),H(),x()),i.ie&&(f(),O()),J&&(p(),h(),v(),k(),N(),E(),D(),I(),x())}}),r(se,[V],function(e){function t(t){return t._eventDispatcher||(t._eventDispatcher=new e({scope:t,toggleEvent:function(n,r){e.isNative(n)&&t.toggleNativeEvent&&t.toggleNativeEvent(n,r)}})),t._eventDispatcher}return{fire:function(e,n,r){var i=this;if(i.removed&&"remove"!==e)return n;if(n=t(i).fire(e,n,r),r!==!1&&i.parent)for(var o=i.parent();o&&!n.isPropagationStopped();)o.fire(e,n,!1),o=o.parent();return n},on:function(e,n,r){return t(this).on(e,n,r)},off:function(e,n){return t(this).off(e,n)},once:function(e,n){return t(this).once(e,n)},hasEventListeners:function(e){return t(this).has(e)}}}),r(le,[se,v,c],function(e,t,n){function r(e,t){return"selectionchange"==t?e.getDoc():!e.inline&&/^mouse|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc():e.getBody()}function i(e,t){var n=e.settings.event_root,i=e.editorManager,a=i.eventRootElm||r(e,t);if(n){if(i.rootEvents||(i.rootEvents={},i.on("RemoveEditor",function(){i.activeEditor||(o.unbind(a),delete i.rootEvents)})),i.rootEvents[t])return;a==e.getBody()&&(a=o.select(n)[0],i.eventRootElm=a),i.rootEvents[t]=!0,o.bind(a,t,function(e){for(var n=e.target,r=i.editors,a=r.length;a--;){var s=r[a].getBody();(s===n||o.isChildOf(n,s))&&(r[a].hidden||r[a].fire(t,e))}})}else e.dom.bind(a,t,function(n){e.hidden||e.fire(t,n)})}var o=t.DOM,a={bindPendingEventDelegates:function(){var e=this;n.each(e._pendingNativeEvents,function(t){i(e,t)})},toggleNativeEvent:function(e,t){var n=this;n.settings.readonly||"focus"!=e&&"blur"!=e&&(t?n.initialized?i(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.dom.unbind(r(n,e),e))}};return a=n.extend({},e,a)}),r(ce,[c,d],function(e,t){var n=e.each,r=e.explode,i={f9:120,f10:121,f11:122};return function(o){var a=this,s={};o.on("keyup keypress keydown",function(e){(e.altKey||e.ctrlKey||e.metaKey)&&n(s,function(n){var r=t.mac?e.metaKey:e.ctrlKey;if(n.ctrl==r&&n.alt==e.altKey&&n.shift==e.shiftKey)return e.keyCode==n.keyCode||e.charCode&&e.charCode==n.charCode?(e.preventDefault(),"keydown"==e.type&&n.func.call(n.scope),!0):void 0})}),a.add=function(t,a,l,c){var d;return d=l,"string"==typeof l?l=function(){o.execCommand(d,!1,null)}:e.isArray(d)&&(l=function(){o.execCommand(d[0],d[1],d[2])}),n(r(t.toLowerCase()),function(e){var t={func:l,scope:c||o,desc:o.translate(a),alt:!1,ctrl:!1,shift:!1};n(r(e,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":t[e]=!0;break;default:/^[0-9]{2,}$/.test(e)?t.keyCode=parseInt(e,10):(t.charCode=e.charCodeAt(0),t.keyCode=i[e]||e.toUpperCase().charCodeAt(0))}}),s[(t.ctrl?"ctrl":"")+","+(t.alt?"alt":"")+","+(t.shift?"shift":"")+","+t.keyCode]=t}),!0}}}),r(de,[v,u,b,C,w,T,E,D,I,O,H,F,z,W,y,s,oe,_,N,ae,d,c,le,ce],function(e,n,r,i,o,a,s,l,c,d,u,f,m,p,h,g,v,y,b,x,C,w,_,k){function N(e,t,i){var o,a,s=this;o=s.documentBaseUrl=i.documentBaseURL,a=i.baseURI,s.settings=t=R({id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:o,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:s.convertURL,url_converter_scope:s,ie7_compat:!0},t),r.language=t.language||"en",r.languageLoad=t.language_load,r.baseURL=i.baseURL,s.id=t.id=e,s.isNotDirty=!0,s.plugins={},s.documentBaseURI=new p(t.document_base_url||o,{base_uri:a}),s.baseURI=a,s.contentCSS=[],s.contentStyles=[],s.shortcuts=new k(s),s.execCommands={},s.queryStateCommands={},s.queryValueCommands={},s.loadedCSS={},s.suffix=i.suffix,s.editorManager=i,s.inline=t.inline,i.fire("SetupEditor",s),s.execCallback("setup",s),s.$=n.overrideDefaults(function(){return{context:s.inline?s.getBody():s.getDoc(),element:s.getBody()}})}var S=e.DOM,E=r.ThemeManager,T=r.PluginManager,R=w.extend,A=w.each,B=w.explode,P=w.inArray,D=w.trim,M=w.resolve,L=g.Event,I=C.gecko,O=C.ie;return N.prototype={render:function(){function e(){S.unbind(window,"ready",e),n.render()}function t(){var e=h.ScriptLoader;if(r.language&&"en"!=r.language&&!r.language_url&&(r.language_url=n.editorManager.baseURL+"/langs/"+r.language+".js"),r.language_url&&e.add(r.language_url),r.theme&&"function"!=typeof r.theme&&"-"!=r.theme.charAt(0)&&!E.urls[r.theme]){var t=r.theme_url;t=t?n.documentBaseURI.toAbsolute(t):"themes/"+r.theme+"/theme"+o+".js",E.load(r.theme,t)}w.isArray(r.plugins)&&(r.plugins=r.plugins.join(" ")),A(r.external_plugins,function(e,t){T.load(t,e),r.plugins+=" "+t}),A(r.plugins.split(/[ ,]/),function(e){if(e=D(e),e&&!T.urls[e])if("-"==e.charAt(0)){e=e.substr(1,e.length);var t=T.dependencies(e);
A(t,function(e){var t={prefix:"plugins/",resource:e,suffix:"/plugin"+o+".js"};e=T.createUrl(t,e),T.load(e.resource,e)})}else T.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+o+".js"})}),e.loadQueue(function(){n.removed||n.init()})}var n=this,r=n.settings,i=n.id,o=n.suffix;if(!L.domLoaded)return void S.bind(window,"ready",e);if(n.getElement()&&C.contentEditable){r.inline?n.inline=!0:(n.orgVisibility=n.getElement().style.visibility,n.getElement().style.visibility="hidden");var a=n.getElement().form||S.getParent(i,"form");a&&(n.formElement=a,r.hidden_input&&!/TEXTAREA|INPUT/i.test(n.getElement().nodeName)&&(S.insertAfter(S.create("input",{type:"hidden",name:i}),i),n.hasHiddenInput=!0),n.formEventDelegate=function(e){n.fire(e.type,e)},S.bind(a,"submit reset",n.formEventDelegate),n.on("reset",function(){n.setContent(n.startContent,{format:"raw"})}),!r.submit_patch||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=function(){return n.editorManager.triggerSave(),n.isNotDirty=!0,a._mceOldSubmit(a)})),n.windowManager=new v(n),"xml"==r.encoding&&n.on("GetContent",function(e){e.save&&(e.content=S.encode(e.content))}),r.add_form_submit_trigger&&n.on("submit",function(){n.initialized&&n.save()}),r.add_unload_trigger&&(n._beforeUnload=function(){!n.initialized||n.destroyed||n.isHidden()||n.save({format:"raw",no_events:!0,set_dirty:!1})},n.editorManager.on("BeforeUnload",n._beforeUnload)),t()}},init:function(){function e(t){var n,r,i=T.get(t);n=T.urls[t]||f.documentBaseUrl.replace(/\/$/,""),t=D(t),i&&-1===P(h,t)&&(A(T.dependencies(t),function(t){e(t)}),r=new i(f,n,f.$),f.plugins[t]=r,r.init&&(r.init(f,n),h.push(t)))}var t,n,r,i,o,a,s,l,c,d,u,f=this,m=f.settings,p=f.getElement(),h=[];if(f.rtl=this.editorManager.i18n.rtl,f.editorManager.add(f),m.aria_label=m.aria_label||S.getAttrib(p,"aria-label",f.getLang("aria.rich_text_area")),m.theme&&("function"!=typeof m.theme?(m.theme=m.theme.replace(/-/,""),a=E.get(m.theme),f.theme=new a(f,E.urls[m.theme]),f.theme.init&&f.theme.init(f,E.urls[m.theme]||f.documentBaseUrl.replace(/\/$/,""),f.$)):f.theme=m.theme),A(m.plugins.replace(/\-/g,"").split(/[ ,]/),e),m.render_ui&&f.theme&&(f.orgDisplay=p.style.display,"function"!=typeof m.theme?(t=m.width||p.style.width||p.offsetWidth,n=m.height||p.style.height||p.offsetHeight,r=m.min_height||100,d=/^[0-9\.]+(|px)$/i,d.test(""+t)&&(t=Math.max(parseInt(t,10),100)),d.test(""+n)&&(n=Math.max(parseInt(n,10),r)),o=f.theme.renderUI({targetNode:p,width:t,height:n,deltaWidth:m.delta_width,deltaHeight:m.delta_height}),m.content_editable||(n=(o.iframeHeight||n)+("number"==typeof n?o.deltaHeight||0:""),r>n&&(n=r))):(o=m.theme(f,p),o.editorContainer.nodeType&&(o.editorContainer=o.editorContainer.id=o.editorContainer.id||f.id+"_parent"),o.iframeContainer.nodeType&&(o.iframeContainer=o.iframeContainer.id=o.iframeContainer.id||f.id+"_iframecontainer"),n=o.iframeHeight||p.offsetHeight),f.editorContainer=o.editorContainer),m.content_css&&A(B(m.content_css),function(e){f.contentCSS.push(f.documentBaseURI.toAbsolute(e))}),m.content_style&&f.contentStyles.push(m.content_style),m.content_editable)return p=i=o=null,f.initContentBody();for(f.iframeHTML=m.doctype+"<html><head>",m.document_base_url!=f.documentBaseUrl&&(f.iframeHTML+='<base href="'+f.documentBaseURI.getURI()+'" />'),!C.caretAfter&&m.ie7_compat&&(f.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'),f.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',u=0;u<f.contentCSS.length;u++){var g=f.contentCSS[u];f.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+g+'" />',f.loadedCSS[g]=!0}l=m.body_id||"tinymce",-1!=l.indexOf("=")&&(l=f.getParam("body_id","","hash"),l=l[f.id]||l),c=m.body_class||"",-1!=c.indexOf("=")&&(c=f.getParam("body_class","","hash"),c=c[f.id]||""),f.iframeHTML+='</head><body id="'+l+'" class="mce-content-body '+c+'" onload="window.parent.tinymce.get(\''+f.id+"').fire('load');\"><br></body></html>";var v='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+f.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody(true);})()';if(document.domain!=location.hostname&&(s=v),i=S.add(o.iframeContainer,"iframe",{id:f.id+"_ifr",src:s||'javascript:""',frameBorder:"0",allowTransparency:"true",title:f.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:n,display:"block"}}),O)try{f.getDoc()}catch(e){i.src=s=v}f.contentAreaContainer=o.iframeContainer,o.editorContainer&&(S.get(o.editorContainer).style.display=f.orgDisplay),S.get(f.id).style.display="none",S.setAttrib(f.id,"aria-hidden",!0),s||f.initContentBody(),p=i=o=null},initContentBody:function(t){var n,r,s=this,p=s.settings,h=S.get(s.id),g=s.getDoc();p.inline||(s.getElement().style.visibility=s.orgVisibility),t||p.content_editable||(g.open(),g.write(s.iframeHTML),g.close()),p.content_editable&&(s.on("remove",function(){var e=this.getBody();S.removeClass(e,"mce-content-body"),S.removeClass(e,"mce-edit-focus"),S.setAttrib(e,"contentEditable",null)}),S.addClass(h,"mce-content-body"),s.contentDocument=g=p.content_document||document,s.contentWindow=p.content_window||window,s.bodyElement=h,p.content_document=p.content_window=null,p.root_name=h.nodeName.toLowerCase()),n=s.getBody(),n.disabled=!0,p.readonly||(s.inline&&"static"==S.getStyle(n,"position",!0)&&(n.style.position="relative"),n.contentEditable=s.getParam("content_editable_state",!0)),n.disabled=!1,s.schema=new y(p),s.dom=new e(g,{keep_values:!0,url_converter:s.convertURL,url_converter_scope:s,hex_colors:p.force_hex_style_colors,class_filter:p.class_filter,update_styles:!0,root_element:p.content_editable?s.id:null,collect:p.content_editable,schema:s.schema,onSetAttrib:function(e){s.fire("SetAttrib",e)}}),s.parser=new b(p,s.schema),s.parser.addAttributeFilter("src,href,style,tabindex",function(e,t){for(var n,r,i,o=e.length,a=s.dom;o--;)n=e[o],r=n.attr(t),i="data-mce-"+t,n.attributes.map[i]||("style"===t?(r=a.serializeStyle(a.parseStyle(r),n.name),r.length||(r=null),n.attr(i,r),n.attr(t,r)):"tabindex"===t?(n.attr(i,r),n.attr(t,null)):n.attr(i,s.convertURL(r,t,n.name)))}),s.parser.addNodeFilter("script",function(e){for(var t,n=e.length;n--;)t=e[n],t.attr("type","mce-"+(t.attr("type")||"no/type"))}),s.parser.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)t=e[n],t.type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),s.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var t,n=e.length,r=s.schema.getNonEmptyElements();n--;)t=e[n],t.isEmpty(r)&&(t.append(new o("br",1)).shortEnded=!0)}),s.serializer=new a(p,s),s.selection=new l(s.dom,s.getWin(),s.serializer,s),s.formatter=new c(s),s.undoManager=new d(s),s.forceBlocks=new f(s),s.enterKey=new u(s),s.editorCommands=new m(s),s._nodeChangeDispatcher=new i(s),s.fire("PreInit"),p.browser_spellcheck||p.gecko_spellcheck||(g.body.spellcheck=!1,S.setAttrib(n,"spellcheck","false")),s.fire("PostRender"),s.quirks=new x(s),p.directionality&&(n.dir=p.directionality),p.nowrap&&(n.style.whiteSpace="nowrap"),p.protect&&s.on("BeforeSetContent",function(e){A(p.protect,function(t){e.content=e.content.replace(t,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),s.on("SetContent",function(){s.addVisual(s.getBody())}),p.padd_empty_editor&&s.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),s.load({initial:!0,format:"html"}),s.startContent=s.getContent({format:"raw"}),s.initialized=!0,s.bindPendingEventDelegates(),s.fire("init"),s.focus(!0),s.nodeChanged({initial:!0}),s.execCallback("init_instance_callback",s),s.contentStyles.length>0&&(r="",A(s.contentStyles,function(e){r+=e+"\r\n"}),s.dom.addStyle(r)),A(s.contentCSS,function(e){s.loadedCSS[e]||(s.dom.loadCSS(e),s.loadedCSS[e]=!0)}),p.auto_focus&&setTimeout(function(){var e=s.editorManager.get(p.auto_focus);e.selection.select(e.getBody(),1),e.selection.collapse(1),e.getBody().focus(),e.getWin().focus()},100),h=g=n=null},focus:function(e){var t,n,r,i,o=this,a=o.selection,s=o.settings.content_editable,l=o.getDoc();if(!e){if(n=a.getRng(),n.item&&(r=n.item(0)),o._refreshContentEditable(),s||(C.opera||o.getBody().focus(),o.getWin().focus()),I||s){if(i=o.getBody(),i.setActive)try{i.setActive()}catch(e){i.focus()}else i.focus();s&&a.normalize()}r&&r.ownerDocument==l&&(n=l.body.createControlRange(),n.addElement(r),n.select())}o.editorManager.activeEditor!=o&&((t=o.editorManager.activeEditor)&&t.fire("deactivate",{relatedTarget:o}),o.fire("activate",{relatedTarget:t})),o.editorManager.activeEditor=o},execCallback:function(e){var t,n=this,r=n.settings[e];if(r)return n.callbackLookup&&(t=n.callbackLookup[e])&&(r=t.func,t=t.scope),"string"==typeof r&&(t=r.replace(/\.\w+$/,""),t=t?M(t):0,r=M(r),n.callbackLookup=n.callbackLookup||{},n.callbackLookup[e]={func:r,scope:t}),r.apply(t||n,Array.prototype.slice.call(arguments,1))},translate:function(e){var t=this.settings.language||"en",n=this.editorManager.i18n;return e?n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,r){return n.data[t+"."+r]||"{#"+r+"}"}):""},getLang:function(e,n){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(n!==t?n:"{#"+e+"}")},getParam:function(e,t,n){var r,i=e in this.settings?this.settings[e]:t;return"hash"===n?(r={},"string"==typeof i?A(i.split(i.indexOf("=")>0?/[;,](?![^=;,]*(?:[;,]|$))/:","),function(e){e=e.split("="),r[D(e[0])]=D(e.length>1?e[1]:e)}):r=i,r):i},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.text||t.icon||(t.icon=e),n.buttons=n.buttons||{},t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems||{},n.menuItems[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){var i,o=this,a=0;if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)||r&&r.skip_focus||o.focus(),r=R({},r),r=o.fire("BeforeExecCommand",{command:e,ui:t,value:n}),r.isDefaultPrevented())return!1;if((i=o.execCommands[e])&&i.func.call(i.scope,t,n)!==!0)return o.fire("ExecCommand",{command:e,ui:t,value:n}),!0;if(A(o.plugins,function(r){return r.execCommand&&r.execCommand(e,t,n)?(o.fire("ExecCommand",{command:e,ui:t,value:n}),a=!0,!1):void 0}),a)return a;if(o.theme&&o.theme.execCommand&&o.theme.execCommand(e,t,n))return o.fire("ExecCommand",{command:e,ui:t,value:n}),!0;if(o.editorCommands.execCommand(e,t,n))return o.fire("ExecCommand",{command:e,ui:t,value:n}),!0;try{a=o.getDoc().execCommand(e,t,n)}catch(e){}return!!a&&(o.fire("ExecCommand",{command:e,ui:t,value:n}),!0)},queryCommandState:function(e){var t,n,r=this;if(!r._isHidden()){if((t=r.queryStateCommands[e])&&(n=t.func.call(t.scope),n===!0||n===!1))return n;if(n=r.editorCommands.queryCommandState(e),-1!==n)return n;try{return r.getDoc().queryCommandState(e)}catch(e){}}},queryCommandValue:function(e){var n,r,i=this;if(!i._isHidden()){if((n=i.queryValueCommands[e])&&(r=n.func.call(n.scope),r!==!0))return r;if(r=i.editorCommands.queryCommandValue(e),r!==t)return r;try{return i.getDoc().queryCommandValue(e)}catch(e){}}},show:function(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable=!0:(S.show(e.getContainer()),S.hide(e.id)),e.load(),e.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(O&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e==e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(S.hide(e.getContainer()),S.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var n,r=this,i=r.getElement();return i?(e=e||{},e.load=!0,n=r.setContent(i.value!==t?i.value:i.innerHTML,e),e.element=i,e.no_events||r.fire("LoadContent",e),e.element=i=null,n):void 0},save:function(e){var t,n,r=this,i=r.getElement();if(i&&r.initialized)return e=e||{},e.save=!0,e.element=i,t=e.content=r.getContent(e),e.no_events||r.fire("SaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(i.nodeName)?i.value=t:(r.inline||(i.innerHTML=t),(n=S.getParent(r.id,"form"))&&A(n.elements,function(e){return e.name==r.id?(e.value=t,!1):void 0})),e.element=i=null,e.set_dirty!==!1&&(r.isNotDirty=!0),t},setContent:function(e,t){var n,r=this,i=r.getBody();return t=t||{},t.format=t.format||"html",t.set=!0,t.content=e,t.no_events||r.fire("BeforeSetContent",t),e=t.content,0===e.length||/^\s+$/.test(e)?(n=r.settings.forced_root_block,n&&r.schema.isValidChild(i.nodeName.toLowerCase(),n.toLowerCase())?(e=O&&11>O?"":'<br data-mce-bogus="1">',e=r.dom.createHTML(n,r.settings.forced_root_block_attrs,e)):O||(e='<br data-mce-bogus="1">'),r.dom.setHTML(i,e),r.fire("SetContent",t)):("raw"!==t.format&&(e=new s({},r.schema).serialize(r.parser.parse(e,{isRootContent:!0}))),t.content=D(e),r.dom.setHTML(i,t.content),t.no_events||r.fire("SetContent",t)),t.content},getContent:function(e){var t,n=this,r=n.getBody();return e=e||{},e.format=e.format||"html",e.get=!0,e.getInner=!0,e.no_events||n.fire("BeforeGetContent",e),t="raw"==e.format?r.innerHTML:"text"==e.format?r.innerText||r.textContent:n.serializer.serialize(r,e),e.content="text"!=e.format?D(t):t,e.no_events||n.fire("GetContent",e),e.content},insertContent:function(e,t){t&&(e=R({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},getContainer:function(){var e=this;return e.container||(e.container=S.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return S.get(this.settings.content_element||this.id)},getWin:function(){var e,t=this;return t.contentWindow||(e=S.get(t.id+"_ifr"),e&&(t.contentWindow=e.contentWindow)),t.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin(),e&&(t.contentDocument=e.document)),t.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var r=this,i=r.settings;return i.urlconverter_callback?r.execCallback("urlconverter_callback",e,n,!0,t):!i.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")||0===e.length?e:i.relative_urls?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,i.remove_script_host)},addVisual:function(e){var n,r=this,i=r.settings,o=r.dom;e=e||r.getBody(),r.hasVisual===t&&(r.hasVisual=i.visual),A(o.select("table,a",e),function(e){var t;switch(e.nodeName){case"TABLE":return n=i.visual_table_class||"mce-item-table",t=o.getAttrib(e,"border"),void(t&&"0"!=t||!r.hasVisual?o.removeClass(e,n):o.addClass(e,n));case"A":return void(o.getAttrib(e,"href",!1)||(t=o.getAttrib(e,"name")||e.id,n=i.visual_anchor_class||"mce-item-anchor",t&&r.hasVisual?o.addClass(e,n):o.removeClass(e,n)))}}),r.fire("VisualAid",{element:e,hasVisual:r.hasVisual})},remove:function(){var e=this;if(!e.removed){e.save(),e.removed=1,e.hasHiddenInput&&S.remove(e.getElement().nextSibling),e.inline||(O&&10>O&&e.getDoc().execCommand("SelectAll",!1,null),S.setStyle(e.id,"display",e.orgDisplay),e.getBody().onload=null,L.unbind(e.getWin()),L.unbind(e.getDoc()));var t=e.getContainer();L.unbind(e.getBody()),L.unbind(t),e.fire("remove"),e.editorManager.remove(e),S.remove(t),e.destroy()}},destroy:function(e){var t,n=this;if(!n.destroyed){if(!e&&!n.removed)return void n.remove();e&&I&&(L.unbind(n.getDoc()),L.unbind(n.getWin()),L.unbind(n.getBody())),e||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),n.selection.destroy(),n.dom.destroy()),t=n.formElement,t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),S.unbind(t,"submit reset",n.formEventDelegate)),n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.settings.content_element=n.bodyElement=n.contentDocument=n.contentWindow=null,n.selection&&(n.selection=n.selection.win=n.selection.dom=n.selection.dom.doc=null),n.destroyed=1}},_refreshContentEditable:function(){var e,t,n=this;n._isHidden()&&(e=n.getBody(),t=e.parentNode,t.removeChild(e),t.appendChild(e),e.focus())},_isHidden:function(){var e;return I?(e=this.selection.getSel(),!e||!e.rangeCount||0===e.rangeCount):0}},R(N.prototype,_),N}),r(ue,[],function(){var e={};return{rtl:!1,add:function(t,n){for(var r in n)e[r]=n[r];this.rtl=this.rtl||"rtl"===e._dir},translate:function(t){if("undefined"==typeof t)return t;if("string"!=typeof t&&t.raw)return t.raw;if(t.push){var n=t.slice(1);t=(e[t[0]]||t[0]).replace(/\{([^\}]+)\}/g,function(e,t){return n[t]})}return e[t]||t},data:e}}),r(fe,[v,d],function(e,t){function n(e){function s(){try{return document.activeElement}catch(e){return document.body}}function l(e,t){if(t&&t.startContainer){if(!e.isChildOf(t.startContainer,e.getRoot())||!e.isChildOf(t.endContainer,e.getRoot()))return;return{startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset}}return t}function c(e,t){var n;return t.startContainer?(n=e.getDoc().createRange(),n.setStart(t.startContainer,t.startOffset),n.setEnd(t.endContainer,t.endOffset)):n=t,n}function d(e){return!!a.getParent(e,n.isEditorUIElement)}function u(n){var u=n.editor;u.on("init",function(){(u.inline||t.ie)&&("onbeforedeactivate"in document&&t.ie<9?u.dom.bind(u.getBody(),"beforedeactivate",function(){try{u.lastRng=u.selection.getRng()}catch(e){}}):u.on("nodechange mouseup keyup",function(e){var t=s();"nodechange"==e.type&&e.selectionChange||(t&&t.id==u.id+"_ifr"&&(t=u.getBody()),u.dom.isChildOf(t,u.getBody())&&(u.lastRng=u.selection.getRng()))}),t.webkit&&!r&&(r=function(){var t=e.activeEditor;if(t&&t.selection){var n=t.selection.getRng();n&&!n.collapsed&&(u.lastRng=n)}},a.bind(document,"selectionchange",r)))}),u.on("setcontent",function(){u.lastRng=null}),u.on("mousedown",function(){u.selection.lastFocusBookmark=null}),u.on("focusin",function(){var t=e.focusedEditor;u.selection.lastFocusBookmark&&(u.selection.setRng(c(u,u.selection.lastFocusBookmark)),u.selection.lastFocusBookmark=null),t!=u&&(t&&t.fire("blur",{focusedEditor:u}),e.activeEditor=u,e.focusedEditor=u,u.fire("focus",{blurredEditor:t}),u.focus(!0)),u.lastRng=null}),u.on("focusout",function(){window.setTimeout(function(){var t=e.focusedEditor;d(s())||t!=u||(u.fire("blur",{focusedEditor:null}),e.focusedEditor=null,u.selection&&(u.selection.lastFocusBookmark=null))},0)}),i||(i=function(t){var n=e.activeEditor;n&&t.target.ownerDocument==document&&(n.selection&&t.target!=n.getBody()&&(n.selection.lastFocusBookmark=l(n.dom,n.lastRng)),d(t.target)||e.focusedEditor!=n||(n.fire("blur",{focusedEditor:null}),e.focusedEditor=null))},a.bind(document,"focusin",i)),u.inline&&!o&&(o=function(t){var n=e.activeEditor;if(n.inline&&!n.dom.isChildOf(t.target,n.getBody())){var r=n.selection.getRng();r.collapsed||(n.lastRng=r)}},a.bind(document,"mouseup",o))}function f(t){e.focusedEditor==t.editor&&(e.focusedEditor=null),e.activeEditor||(a.unbind(document,"selectionchange",r),a.unbind(document,"focusin",i),a.unbind(document,"mouseup",o),r=i=o=null)}e.on("AddEditor",u),e.on("RemoveEditor",f)}var r,i,o,a=e.DOM;return n.isEditorUIElement=function(e){return-1!==e.className.toString().indexOf("mce-")},n}),r(me,[de,u,v,W,d,c,se,ue,fe],function(e,t,n,r,i,o,a,s,l){function c(e){var t,n=f.editors;delete n[e.id];for(var r=0;r<n.length;r++)if(n[r]==e){n.splice(r,1),t=!0;break}return f.activeEditor==e&&(f.activeEditor=n[0]),f.focusedEditor==e&&(f.focusedEditor=null),t}function d(e){return e&&!(e.getContainer()||e.getBody()).parentNode&&(c(e),e.destroy(!0),e=null),e}var u,f,m=n.DOM,p=o.explode,h=o.each,g=o.extend,v=0;return f={$:t,majorVersion:"4",minorVersion:"1.1",releaseDate:"2014-07-08",editors:[],i18n:s,activeEditor:null,setup:function(){var e,t,n,i,o=this,a="";if(t=document.location.href,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),n=window.tinymce||window.tinyMCEPreInit)e=n.base||n.baseURL,a=n.suffix;else{for(var s=document.getElementsByTagName("script"),c=0;c<s.length;c++)if(i=s[c].src,/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(i)){-1!=i.indexOf(".min")&&(a=".min"),e=i.substring(0,i.lastIndexOf("/"));break}!e&&document.currentScript&&(i=document.currentScript.src,-1!=i.indexOf(".min")&&(a=".min"),e=i.substring(0,i.lastIndexOf("/")))}o.baseURL=new r(t).toAbsolute(e),o.documentBaseURL=t,o.baseURI=new r(o.baseURL),o.suffix=a,o.focusManager=new l(o)},init:function(t){function n(e){var t=e.id;return t||(t=e.name,t=t&&!m.get(t)?e.name:m.uniqueId(),e.setAttribute("id",t)),t}function r(t,n){if(!d(l.get(t))){var r=new e(t,n,l);c.push(r),r.render()}}function i(e,t,n){var r=e[t];if(r)return r.apply(n||this,Array.prototype.slice.call(arguments,2))}function o(e,t){return t.constructor===RegExp?t.test(e.className):m.hasClass(e,t)}function a(){var d,u;if(m.unbind(window,"ready",a),i(t,"onpageload"),t.types)return void h(t.types,function(e){h(m.select(e.selector),function(i){r(n(i),g({},t,e))})});if(t.selector)return void h(m.select(t.selector),function(e){r(n(e),t)});switch(t.mode){case"exact":d=t.elements||"",d.length>0&&h(p(d),function(n){m.get(n)?(s=new e(n,t,l),c.push(s),s.render()):h(document.forms,function(e){h(e.elements,function(e){e.name===n&&(n="mce_editor_"+v++,m.setAttrib(e,"id",n),r(n,t))})})});break;case"textareas":case"specific_textareas":h(m.select("textarea"),function(e){t.editor_deselector&&o(e,t.editor_deselector)||(!t.editor_selector||o(e,t.editor_selector))&&r(n(e),t)})}t.oninit&&(d=u=0,h(c,function(e){u++,e.initialized?d++:e.on("init",function(){d++,d==u&&i(t,"oninit")}),d==u&&i(t,"oninit")}))}var s,l=this,c=[];l.settings=t,m.bind(window,"ready",a)},get:function(e){return arguments.length?e in this.editors?this.editors[e]:null:this.editors},add:function(e){var t=this,n=t.editors;return n[e.id]=e,n.push(e),t.activeEditor=e,t.fire("AddEditor",{editor:e}),u||(u=function(){t.fire("BeforeUnload")},m.bind(window,"beforeunload",u)),e},createEditor:function(t,n){return this.add(new e(t,n,this))},remove:function(e){var t,n,r=this,i=r.editors;if(e)return"string"==typeof e?(e=e.selector||e,void h(m.select(e),function(e){r.remove(i[e.id])})):(n=e,i[n.id]?(c(n)&&r.fire("RemoveEditor",{editor:n}),i.length||m.unbind(window,"beforeunload",u),n.remove(),n):null);for(t=i.length-1;t>=0;t--)r.remove(i[t])},execCommand:function(t,n,r){var i=this,o=i.get(r);switch(t){case"mceAddEditor":return i.get(r)||new e(r,i.settings,i).render(),!0;case"mceRemoveEditor":return o&&o.remove(),!0;case"mceToggleEditor":return o?(o.isHidden()?o.show():o.hide(),!0):(i.execCommand("mceAddEditor",0,r),!0)}return!!i.activeEditor&&i.activeEditor.execCommand(t,n,r)},triggerSave:function(){h(this.editors,function(e){e.save()})},addI18n:function(e,t){s.add(e,t)},translate:function(e){return s.translate(e)}},g(f,a),f.setup(),window.tinymce=window.tinyMCE=f,f}),r(pe,[me,c],function(e,t){var n=t.each,r=t.explode;e.on("AddEditor",function(e){var t=e.editor;t.on("preInit",function(){function e(e,t){n(t,function(t,n){t&&s.setStyle(e,n,t)}),s.rename(e,"span")}function i(e){s=t.dom,l.convert_fonts_to_spans&&n(s.select("font,u,strike",e.node),function(e){o[e.nodeName.toLowerCase()](s,e)})}var o,a,s,l=t.settings;l.inline_styles&&(a=r(l.font_size_legacy_values),o={font:function(t,n){e(n,{backgroundColor:n.style.backgroundColor,color:n.color,fontFamily:n.face,fontSize:a[parseInt(n.size,10)-1]})},u:function(t,n){e(n,{textDecoration:"underline"})},strike:function(t,n){e(n,{textDecoration:"line-through"})}},t.on("PreProcess SetContent",i))})})}),r(he,[],function(){return{send:function(e){function t(){!e.async||4==n.readyState||r++>1e4?(e.success&&1e4>r&&200==n.status?e.success.call(e.success_scope,""+n.responseText,n,e):e.error&&e.error.call(e.error_scope,r>1e4?"TIMED_OUT":"GENERAL",n,e),n=null):setTimeout(t,10)}var n,r=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async!==!1,e.data=e.data||"",n=new XMLHttpRequest){if(n.overrideMimeType&&n.overrideMimeType(e.content_type),n.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(n.withCredentials=!0),e.content_type&&n.setRequestHeader("Content-Type",e.content_type),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(e.data),!e.async)return t();setTimeout(t,10)}}}}),r(ge,[],function(){function e(t,n){var r,i,o,a;if(n=n||'"',null===t)return"null";if(o=typeof t,"string"==o)return i="\bb\tt\nn\ff\rr\"\"''\\\\",n+t.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return'"'===n&&"'"===e?e:(r=i.indexOf(t),r+1?"\\"+i.charAt(r+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e))})+n;if("object"==o){if(t.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(t)){for(r=0,i="[";r<t.length;r++)i+=(r>0?",":"")+e(t[r],n);return i+"]"}i="{";for(a in t)t.hasOwnProperty(a)&&(i+="function"!=typeof t[a]?(i.length>1?","+n:n)+a+n+":"+e(t[a],n):"");return i+"}"}return""+t}return{serialize:e,parse:function(e){try{return window[String.fromCharCode(101)+"val"]("("+e+")")}catch(e){}}}}),r(ve,[ge,he,c],function(e,t,n){function r(e){this.settings=i({},e),this.count=0}var i=n.extend;return r.sendRPC=function(e){return(new r).send(e)},r.prototype={send:function(n){var r=n.error,o=n.success;n=i(this.settings,n),n.success=function(t,i){t=e.parse(t),"undefined"==typeof t&&(t={error:"JSON Parse error."}),t.error?r.call(n.error_scope||n.scope,t.error,i):o.call(n.success_scope||n.scope,t.result)},n.error=function(e,t){r&&r.call(n.error_scope||n.scope,e,t)},n.data=e.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",t.send(n)}},r}),r(ye,[v],function(e){return{callbacks:{},count:0,send:function(n){var r=this,i=e.DOM,o=n.count!==t?n.count:r.count,a="tinymce_jsonp_"+o;r.callbacks[o]=function(e){i.remove(a),delete r.callbacks[o],n.callback(e)},i.add(i.doc.body,"script",{id:a,src:n.url,type:"text/javascript"}),r.count++}}}),r(be,[],function(){function e(){s=[];for(var e in a)s.push(e);i.length=s.length}function n(){function n(e){var n,r;return r=e!==t?d+e:i.indexOf(",",d),-1===r||r>i.length?null:(n=i.substring(d,r),d=r+1,n)}var r,i,s,d=0;if(a={},c){o.load(l),i=o.getAttribute(l)||"";do{var u=n();if(null===u)break;if(r=n(parseInt(u,32)||0),null!==r){if(u=n(),null===u)break;s=n(parseInt(u,32)||0),r&&(a[r]=s)}}while(null!==r);e()}}function r(){var t,n="";if(c){for(var r in a)t=a[r],n+=(n?",":"")+r.length.toString(32)+","+r+","+t.length.toString(32)+","+t;o.setAttribute(l,n);try{o.save(l)}catch(e){}e()}}var i,o,a,s,l,c;try{if(window.localStorage)return localStorage}catch(e){}return l="tinymce",o=document.documentElement,c=!!o.addBehavior,c&&o.addBehavior("#default#userData"),i={key:function(e){return s[e]},getItem:function(e){return e in a?a[e]:null},setItem:function(e,t){a[e]=""+t,r()},removeItem:function(e){delete a[e],r()},clear:function(){a={},r()}},n(),i}),r(xe,[v,s,y,b,c,d],function(e,t,n,r,i,o){var a=window.tinymce;return a.DOM=e.DOM,a.ScriptLoader=n.ScriptLoader,a.PluginManager=r.PluginManager,a.ThemeManager=r.ThemeManager,a.dom=a.dom||{},a.dom.Event=t.Event,i.each(i,function(e,t){a[t]=e}),i.each("isOpera isWebKit isIE isGecko isMac".split(" "),function(e){a[e]=o[e.substr(2).toLowerCase()]}),{}}),r(Ce,[U,c],function(e,t){return e.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=t.extend({},this.Defaults,e)},preRender:function(e){e.addClass(this.settings.containerClass,"body")},applyClasses:function(e){var t,n,r,i=this,o=i.settings;t=e.items().filter(":visible"),n=o.firstControlClass,r=o.lastControlClass,t.each(function(e){e.removeClass(n).removeClass(r),o.controlClass&&e.addClass(o.controlClass)}),t.eq(0).addClass(n),t.eq(-1).addClass(r)},renderHtml:function(e){var t,n=this,r=n.settings,i="";return t=e.items(),t.eq(0).addClass(r.firstControlClass),t.eq(-1).addClass(r.lastControlClass),t.each(function(e){r.controlClass&&e.addClass(r.controlClass),i+=e.renderHtml()}),i},recalc:function(){},postRender:function(){}})}),r(we,[Ce],function(e){return e.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}})}),r(_e,[K,ee],function(e,t){return e.extend({Mixins:[t],Defaults:{classes:"widget tooltip tooltip-n"},text:function(e){var t=this;return"undefined"!=typeof e?(t._value=e,t._rendered&&(t.getEl().lastChild.innerHTML=t.encode(e)),t):t._value},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes()+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+e.encode(e._text)+"</div></div>"},repaint:function(){var e,t,n=this;e=n.getEl().style,t=n._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=131070}})}),r(ke,[K,_e],function(e,t){var n,r=e.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.canFocus=!0,e.tooltip&&r.tooltips!==!1&&(t.on("mouseenter",function(n){var r=t.tooltip().moveTo(-65535);if(n.control==t){var i=r.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);r.toggleClass("tooltip-n","bc-tc"==i),r.toggleClass("tooltip-nw","bc-tl"==i),r.toggleClass("tooltip-ne","bc-tr"==i),r.moveRel(t.getEl(),i)}else r.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().hide()})),t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){return n||(n=new t({type:"tooltip"}),n.renderTo()),n},active:function(e){var t,n=this;return e!==t&&(n.aria("pressed",e),n.toggleClass("active",e)),n._super(e)},disabled:function(e){var t,n=this;return e!==t&&(n.aria("disabled",e),n.toggleClass("disabled",e)),n._super(e)},postRender:function(){var e=this,t=e.settings;e._rendered=!0,e._super(),e.parent()||!t.width&&!t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&e.focus()},remove:function(){this._super(),n&&(n.remove(),n=null)}});return r}),r(Ne,[ke],function(e){return e.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n.on("click mousedown",function(e){e.preventDefault()}),n._super(e),t=e.size,e.subtype&&n.addClass(e.subtype),t&&n.addClass("btn-"+t)},icon:function(e){var t=this,n=t.classPrefix;if("undefined"==typeof e)return t.settings.icon;if(t.settings.icon=e,e=e?n+"ico "+n+"i-"+t.settings.icon:"",t._rendered){var r=t.getEl().firstChild,i=r.getElementsByTagName("i")[0];e?(i&&i==r.firstChild||(i=document.createElement("i"),r.insertBefore(i,r.firstChild)),i.className=e):i&&r.removeChild(i),t.text(t._text)}return t},repaint:function(){var e=this.getEl().firstChild.style;e.width=e.height="100%",this._super()},text:function(e){var t=this;if(t._rendered){var n=t.getEl().lastChild.lastChild;n&&(n.data=t.translate(e))}return t._super(e)},renderHtml:function(){var e,t=this,n=t._id,r=t.classPrefix,i=t.settings.icon;return e=t.settings.image,e?(i="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",i=t.settings.icon?r+"ico "+r+"i-"+i:"",'<div id="'+n+'" class="'+t.classes()+'" tabindex="-1" aria-labelledby="'+n+'"><button role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+e+"></i>":"")+(t._text?(i?" ":"")+t.encode(t._text):"")+"</button></div>"}})}),
r(Se,[J],function(e){return e.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;return e.addClass("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'"><div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),r(Ee,[ke],function(e){return e.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){var t=this;return"undefined"!=typeof e?(e?t.addClass("checked"):t.removeClass("checked"),t._checked=e,t.aria("checked",e),t):t._checked},value:function(e){return this.checked(e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes()+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+n+"ico "+n+'i-checkbox"></i><span id="'+t+'-al" class="'+n+'label">'+e.encode(e._text)+"</span></div>"}})}),r(Te,[ke,Y,j],function(e,t,n){return e.extend({init:function(e){var t=this;t._super(e),t.addClass("combobox"),t.subinput=!0,t.ariaTarget="inp",e=t.settings,e.menu=e.menu||e.values,e.menu&&(e.icon="caret"),t.on("click",function(n){for(var r=n.target,i=t.getEl();r&&r!=i;)r.id&&-1!=r.id.indexOf("-open")&&(t.fire("action"),e.menu&&(t.showMenu(),n.aria&&t.menu.items()[0].focus())),r=r.parentNode}),t.on("keydown",function(e){"INPUT"==e.target.nodeName&&13==e.keyCode&&t.parents().reverse().each(function(n){return e.preventDefault(),t.fire("change"),n.hasEventListeners("submit")&&n.toJSON?(n.fire("submit",{data:n.toJSON()}),!1):void 0})}),e.placeholder&&(t.addClass("placeholder"),t.on("focusin",function(){t._hasOnChange||(n.on(t.getEl("inp"),"change",function(){t.fire("change")}),t._hasOnChange=!0),t.hasClass("placeholder")&&(t.getEl("inp").value="",t.removeClass("placeholder"))}),t.on("focusout",function(){0===t.value().length&&(t.getEl("inp").value=e.placeholder,t.addClass("placeholder"))}))},showMenu:function(){var e,n=this,r=n.settings;n.menu||(e=r.menu||[],e.length?e={type:"menu",items:e}:e.type=e.type||"menu",n.menu=t.create(e).parent(n).renderTo(n.getContainerElm()),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(e){e.control===n.menu&&n.focus()}),n.menu.on("show hide",function(e){e.control.items().each(function(e){e.active(e.value()==n.value())})}).fire("show"),n.menu.on("select",function(e){n.value(e.control.value())}),n.on("focusin",function(e){"INPUT"==e.target.tagName.toUpperCase()&&n.menu.hide()}),n.aria("expanded",!0)),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},value:function(e){var t=this;return"undefined"!=typeof e?(t._value=e,t.removeClass("placeholder"),t._rendered&&(t.getEl("inp").value=e),t):t._rendered?(e=t.getEl("inp").value,e!=t.settings.placeholder?e:""):t._value},disabled:function(e){var t=this;return t._rendered&&"undefined"!=typeof e&&(t.getEl("inp").disabled=e),t._super(e)},focus:function(){this.getEl("inp").focus()},repaint:function(){var e,t,r=this,i=r.getEl(),o=r.getEl("open"),a=r.layoutRect();e=o?a.w-n.getSize(o).width-10:a.w-10;var s=document;return s.all&&(!s.documentMode||s.documentMode<=8)&&(t=r.layoutRect().h-2+"px"),n.css(i.firstChild,{width:e,lineHeight:t}),r._super(),r},postRender:function(){var e=this;return n.on(this.getEl("inp"),"change",function(){e.fire("change")}),e._super()},remove:function(){n.off(this.getEl("inp")),this._super()},renderHtml:function(){var e,t,n=this,r=n._id,i=n.settings,o=n.classPrefix,a=i.value||i.placeholder||"",s="",l="";return"spellcheck"in i&&(l+=' spellcheck="'+i.spellcheck+'"'),i.maxLength&&(l+=' maxlength="'+i.maxLength+'"'),i.size&&(l+=' size="'+i.size+'"'),i.subtype&&(l+=' type="'+i.subtype+'"'),n.disabled()&&(l+=' disabled="disabled"'),e=i.icon,e&&"caret"!=e&&(e=o+"ico "+o+"i-"+i.icon),t=n._text,(e||t)&&(s='<div id="'+r+'-open" class="'+o+"btn "+o+'open" tabIndex="-1" role="button"><button id="'+r+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!=e?'<i class="'+e+'"></i>':'<i class="'+o+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>",n.addClass("has-open")),'<div id="'+r+'" class="'+n.classes()+'"><input id="'+r+'-inp" class="'+o+"textbox "+o+'placeholder" value="'+a+'" hidefocus="1"'+l+" />"+s+"</div>"}})}),r(Re,[Te],function(e){return e.extend({init:function(e){var t=this;e.spellcheck=!1,e.icon="none",t._super(e),t.addClass("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){this.getEl().getElementsByTagName("i")[0].style.background=e},value:function(e){var t=this;return"undefined"!=typeof e&&t._rendered&&t.repaintColor(e),t._super(e)}})}),r(Ae,[Ne,ne],function(e,t){return e.extend({showPanel:function(){var e=this,n=e.settings;if(e.active(!0),e.panel)e.panel.show();else{var r=n.panel;r.type&&(r={layout:"grid",items:r}),r.role=r.role||"dialog",r.popover=!0,r.autohide=!0,r.ariaRoot=!0,e.panel=new t(r).on("hide",function(){e.active(!1)}).on("cancel",function(t){t.stopPropagation(),e.focus(),e.hidePanel()}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}e.panel.moveRel(e.getEl(),n.popoverAlign||(e.isRtl()?["bc-tr","bc-tc"]:["bc-tl","bc-tc"]))},hidePanel:function(){var e=this;e.panel&&e.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))}),e._super()}})}),r(Be,[Ae,v],function(e,t){var n=t.DOM;return e.extend({init:function(e){this._super(e),this.addClass("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",i=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"";return'<div id="'+t+'" class="'+e.classes()+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+i+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+(e._text?(r?" ":"")+e._text:"")+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(r){r.aria&&"down"==r.aria.key||r.control!=e||n.getParent(r.target,"."+e.classPrefix+"open")||(r.stopImmediatePropagation(),t.call(e,r))}),delete e.settings.onclick,e._super()}})}),r(Pe,[],function(){function e(e){function i(e,i,o){var a,s,l,c,d,u;return a=0,s=0,l=0,e/=255,i/=255,o/=255,d=t(e,t(i,o)),u=n(e,n(i,o)),d==u?(l=d,{h:0,s:0,v:100*l}):(c=e==d?i-o:o==d?e-i:o-e,a=e==d?3:o==d?1:5,a=60*(a-c/(u-d)),s=(u-d)/u,l=u,{h:r(a),s:r(100*s),v:r(100*l)})}function o(e,i,o){var a,s,l,c;if(e=(parseInt(e,10)||0)%360,i=parseInt(i,10)/100,o=parseInt(o,10)/100,i=n(0,t(i,1)),o=n(0,t(o,1)),0===i)return void(u=f=m=r(255*o));switch(a=e/60,s=o*i,l=s*(1-Math.abs(a%2-1)),c=o-s,Math.floor(a)){case 0:u=s,f=l,m=0;break;case 1:u=l,f=s,m=0;break;case 2:u=0,f=s,m=l;break;case 3:u=0,f=l,m=s;break;case 4:u=l,f=0,m=s;break;case 5:u=s,f=0,m=l;break;default:u=f=m=0}u=r(255*(u+c)),f=r(255*(f+c)),m=r(255*(m+c))}function a(){function e(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+e(u)+e(f)+e(m)}function s(){return{r:u,g:f,b:m}}function l(){return i(u,f,m)}function c(e){var t;return"object"==typeof e?"r"in e?(u=e.r,f=e.g,m=e.b):"v"in e&&o(e.h,e.s,e.v):(t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(u=parseInt(t[1],10),f=parseInt(t[2],10),m=parseInt(t[3],10)):(t=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(u=parseInt(t[1],16),f=parseInt(t[2],16),m=parseInt(t[3],16)):(t=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(u=parseInt(t[1]+t[1],16),f=parseInt(t[2]+t[2],16),m=parseInt(t[3]+t[3],16)),u=0>u?0:u>255?255:u,f=0>f?0:f>255?255:f,m=0>m?0:m>255?255:m,d}var d=this,u=0,f=0,m=0;e&&c(e),d.toRgb=s,d.toHsv=l,d.toHex=a,d.parse=c}var t=Math.min,n=Math.max,r=Math.round;return e}),r(De,[ke,X,j,Pe],function(e,t,n,r){return e.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){function e(e,t){var r,i,o=n.getPos(e);return r=t.pageX-o.x,i=t.pageY-o.y,r=Math.max(0,Math.min(r/e.clientWidth,1)),i=Math.max(0,Math.min(i/e.clientHeight,1)),{x:r,y:i}}function i(e,t){var i=(360-e.h)/360;n.css(c,{top:100*i+"%"}),t||n.css(u,{left:e.s+"%",top:100-e.v+"%"}),d.style.background=new r({s:100,v:100,h:e.h}).toHex(),f.color().parse({s:e.s,v:e.v,h:e.h})}function o(t){var n;n=e(d,t),s.s=100*n.x,s.v=100*(1-n.y),i(s),f.fire("change")}function a(t){var n;n=e(l,t),s=m.toHsv(),s.h=360*(1-n.y),i(s,!0),f.fire("change")}var s,l,c,d,u,f=this,m=f.color();l=f.getEl("h"),c=f.getEl("hp"),d=f.getEl("sv"),u=f.getEl("svp"),f._repaint=function(){s=m.toHsv(),i(s)},f._super(),f._svdraghelper=new t(f._id+"-sv",{start:o,drag:o}),f._hdraghelper=new t(f._id+"-h",{start:a,drag:a}),f._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){var t=this;return arguments.length?(t.color().parse(e),void(t._rendered&&t._repaint())):t.color().toHex()},color:function(){return this._color||(this._color=new r),this._color},renderHtml:function(){function e(){var e,t,n,r,a="";for(n="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",r=o.split(","),e=0,t=r.length-1;t>e;e++)a+='<div class="'+i+'colorpicker-h-chunk" style="height:'+100/t+"%;"+n+r[e]+",endColorstr="+r[e+1]+");-ms-"+n+r[e]+",endColorstr="+r[e+1]+')"></div>';return a}var t,n=this,r=n._id,i=n.classPrefix,o="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000",a="background: -ms-linear-gradient(top,"+o+");background: linear-gradient(to bottom,"+o+");";return t='<div id="'+r+'-h" class="'+i+'colorpicker-h" style="'+a+'">'+e()+'<div id="'+r+'-hp" class="'+i+'colorpicker-h-marker"></div></div>','<div id="'+r+'" class="'+n.classes()+'"><div id="'+r+'-sv" class="'+i+'colorpicker-sv"><div class="'+i+'colorpicker-overlay1"><div class="'+i+'colorpicker-overlay2"><div id="'+r+'-svp" class="'+i+'colorpicker-selector1"><div class="'+i+'colorpicker-selector2"></div></div></div></div></div>'+t+"</div>"}})}),r(Me,[ke],function(e){return e.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="»"),t._super(e),t.addClass("path"),t.canFocus=!0,t.on("click",function(e){var n,r=e.target;(n=r.getAttribute("data-index"))&&t.fire("select",{value:t.data()[n],index:n})})},focus:function(){var e=this;return e.getEl().firstChild.focus(),e},data:function(e){var t=this;return"undefined"!=typeof e?(t._data=e,t.update(),t):t._data},update:function(){this.innerHtml(this._getPathHtml())},postRender:function(){var e=this;e._super(),e.data(e.settings.data)},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classes()+'">'+e._getPathHtml()+"</div>"},_getPathHtml:function(){var e,t,n=this,r=n._data||[],i="",o=n.classPrefix;for(e=0,t=r.length;t>e;e++)i+=(e>0?'<div class="'+o+'divider" aria-hidden="true"> '+n.settings.delimiter+" </div>":"")+'<div role="button" class="'+o+"path-item"+(e==t-1?" "+o+"last":"")+'" data-index="'+e+'" tabindex="-1" id="'+n._id+"-"+e+'" aria-level="'+e+'">'+r[e].name+"</div>";return i||(i='<div class="'+o+'path-item"> </div>'),i}})}),r(Le,[Me,me],function(e,t){return e.extend({postRender:function(){function e(e){if(1===e.nodeType){if("BR"==e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}var n=this,r=t.activeEditor;return n.on("select",function(e){r.focus(),r.selection.select(this.data()[e.index].element),r.nodeChanged()}),r.on("nodeChange",function(t){for(var i=[],o=t.parents,a=o.length;a--;)if(1==o[a].nodeType&&!e(o[a])){var s=r.fire("ResolveName",{name:o[a].nodeName.toLowerCase(),target:o[a]});if(s.isDefaultPrevented()||i.push({name:s.name,element:o[a]}),s.isPropagationStopped())break}n.data(i)}),n._super()}})}),r(Ie,[J],function(e){return e.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.addClass("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),r(Oe,[J,Ie,c],function(e,t,n){return e.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,r=e.items();e.settings.formItemDefaults||(e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),r.each(function(r){var i,o=r.settings.label;o&&(i=new t(n.extend({items:{type:"label",id:r._id+"-l",text:o,flex:0,forId:r._id,disabled:r.disabled()}},e.settings.formItemDefaults)),i.type="formitem",r.aria("labelledby",r._id+"-l"),"undefined"==typeof r.settings.flex&&(r.settings.flex=1),e.replace(r,i),i.add(r))})},recalcLabels:function(){var e,t,n,r=this,i=0,o=[];if(r.settings.labelGapCalc!==!1)for(n="children"==r.settings.labelGapCalc?r.find("formitem"):r.items(),n.filter("formitem").each(function(e){var t=e.items()[0],n=t.getEl().clientWidth;i=n>i?n:i,o.push(t)}),t=r.settings.labelGap||0,e=o.length;e--;)o[e].settings.minWidth=i+t},visible:function(e){var t=this._super(e);return e===!0&&this._rendered&&this.recalcLabels(),t},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super(),e.recalcLabels(),e.fromJSON(e.settings.data)}})}),r(He,[Oe],function(e){return e.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}})}),r(Fe,[Te,c],function(e,t){return e.extend({init:function(e){var n,r,i,o=this,a=tinymce.activeEditor,s=a.settings;e.spellcheck=!1,i=s.file_picker_types||s.file_browser_callback_types,i&&(i=t.makeMap(i,/[, ]/)),(!i||i[e.filetype])&&(r=s.file_picker_callback,!r||i&&!i[e.filetype]?(r=s.file_browser_callback,!r||i&&!i[e.filetype]||(n=function(){r(o.getEl("inp").id,o.value(),e.filetype,window)})):n=function(){var n=o.fire("beforecall").meta;n=t.extend({filetype:e.filetype},n),r.call(a,function(e,t){o.value(e).fire("change",{meta:t})},o.value(),n)}),n&&(e.icon="browse",e.onaction=n),o._super(e)}})}),r(ze,[we],function(e){return e.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox();e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}})}),r(We,[we],function(e){return e.extend({recalc:function(e){var t,n,r,i,o,a,s,l,c,d,u,f,m,p,h,g,v,y,b,x,C,w,_,k,N,S,E,T,R,A,B,P,D,M,L,I,O,H,F=[],z=Math.max,W=Math.min;for(r=e.items().filter(":visible"),i=e.layoutRect(),o=e._paddingBox,a=e.settings,f=e.isRtl()?a.direction||"row-reversed":a.direction,s=a.align,l=e.isRtl()?a.pack||"end":a.pack,c=a.spacing||0,("row-reversed"==f||"column-reverse"==f)&&(r=r.set(r.toArray().reverse()),f=f.split("-")[0]),"column"==f?(N="y",_="h",k="minH",S="maxH",T="innerH",E="top",R="deltaH",A="contentH",L="left",D="w",B="x",P="innerW",M="minW",I="right",O="deltaW",H="contentW"):(N="x",_="w",k="minW",S="maxW",T="innerW",E="left",R="deltaW",A="contentW",L="top",D="h",B="y",P="innerH",M="minH",I="bottom",O="deltaH",H="contentH"),u=i[T]-o[E]-o[E],w=d=0,t=0,n=r.length;n>t;t++)m=r[t],p=m.layoutRect(),h=m.settings,g=h.flex,u-=n-1>t?c:0,g>0&&(d+=g,p[S]&&F.push(m),p.flex=g),u-=p[k],v=o[L]+p[M]+o[I],v>w&&(w=v);if(x={},x[k]=0>u?i[k]-u+i[R]:i[T]-u+i[R],x[M]=w+i[O],x[A]=i[T]-u,x[H]=w,x.minW=W(x.minW,i.maxW),x.minH=W(x.minH,i.maxH),x.minW=z(x.minW,i.startMinWidth),x.minH=z(x.minH,i.startMinHeight),!i.autoResize||x.minW==i.minW&&x.minH==i.minH){for(b=u/d,t=0,n=F.length;n>t;t++)m=F[t],p=m.layoutRect(),y=p[S],v=p[k]+p.flex*b,v>y?(u-=p[S]-p[k],d-=p.flex,p.flex=0,p.maxFlexSize=y):p.maxFlexSize=0;for(b=u/d,C=o[E],x={},0===d&&("end"==l?C=u+o[E]:"center"==l?(C=Math.round(i[T]/2-(i[T]-u)/2)+o[E],0>C&&(C=o[E])):"justify"==l&&(C=o[E],c=Math.floor(u/(r.length-1)))),x[B]=o[L],t=0,n=r.length;n>t;t++)m=r[t],p=m.layoutRect(),v=p.maxFlexSize||p[k],"center"===s?x[B]=Math.round(i[P]/2-p[D]/2):"stretch"===s?(x[D]=z(p[M]||0,i[P]-o[L]-o[I]),x[B]=o[L]):"end"===s&&(x[B]=i[P]-p[D]-o.top),p.flex>0&&(v+=p.flex*b),x[_]=v,x[N]=C,m.layoutRect(x),m.recalc&&m.recalc(),C+=v+c}else if(x.w=x.minW,x.h=x.minH,e.layoutRect(x),this.recalc(e),null===e._lastRect){var U=e.parent();U&&(U._lastRect=null,U.recalc())}}})}),r(Ue,[Ce],function(e){return e.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})}})}),r(Ve,[K,ke,ne,c,me,d],function(e,t,n,r,i,o){function a(e){function t(t,n){return function(){var r=this;e.on("nodeChange",function(i){var o=e.formatter,a=null;s(i.parents,function(e){return s(t,function(t){return n?o.matchNode(e,n,{value:t.value})&&(a=t.value):o.matchNode(e,t.value)&&(a=t.value),!a&&void 0}),!a&&void 0}),r.value(a)})}}function r(e){e=e.replace(/;$/,"").split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e}function i(){function t(e){var n=[];if(e)return s(e,function(e){var o={text:e.title,icon:e.icon};if(e.items)o.menu=t(e.items);else{var a=e.format||"custom"+r++;e.format||(e.name=a,i.push(e)),o.format=a,o.cmd=e.cmd}n.push(o)}),n}function n(){var n;return n=t(e.settings.style_formats_merge?e.settings.style_formats?o.concat(e.settings.style_formats):o:e.settings.style_formats||o)}var r=0,i=[],o=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];return e.on("init",function(){s(i,function(t){e.formatter.register(t.name,t)})}),{type:"menu",items:n(),onPostRender:function(t){e.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){return this.settings.format?e.formatter.getCssText(this.settings.format):void 0},onPostRender:function(){var t=this;t.parent().on("show",function(){var n,r;n=t.settings.format,n&&(t.disabled(!e.formatter.canApply(n)),t.active(e.formatter.match(n))),r=t.settings.cmd,r&&t.active(e.queryCommandState(r))})},onclick:function(){this.settings.format&&l(this.settings.format),this.settings.cmd&&e.execCommand(this.settings.cmd)}}}}function o(t){return function(){function n(){return!!e.undoManager&&e.undoManager[t]()}var r=this;t="redo"==t?"hasRedo":"hasUndo",r.disabled(!n()),e.on("Undo Redo AddUndo TypingUndo ClearUndos",function(){r.disabled(!n())})}}function a(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}function l(t){t.control&&(t=t.control.value()),t&&e.execCommand("mceToggleFormat",!1,t)}var c;c=i(),s({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(t,n){e.addButton(n,{tooltip:t,onPostRender:function(){var t=this;e.formatter?e.formatter.formatChanged(n,function(e){t.active(e)}):e.on("init",function(){e.formatter.formatChanged(n,function(e){t.active(e)})})},onclick:function(){l(n)}})}),s({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],hr:["Insert horizontal rule","InsertHorizontalRule"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1]})}),s({blockquote:["Blockquote","mceBlockQuote"],numlist:["Numbered list","InsertOrderedList"],bullist:["Bullet list","InsertUnorderedList"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1],onPostRender:function(){var t=this;e.formatter?e.formatter.formatChanged(n,function(e){t.active(e)}):e.on("init",function(){e.formatter.formatChanged(n,function(e){t.active(e)})})}})}),e.addButton("undo",{tooltip:"Undo",onPostRender:o("undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:o("redo"),cmd:"redo"}),e.addMenuItem("newdocument",{text:"New document",shortcut:"Ctrl+N",icon:"newdocument",cmd:"mceNewDocument"}),e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Ctrl+Z",onPostRender:o("undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Ctrl+Y",onPostRender:o("redo"),cmd:"redo"}),e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:a,cmd:"mceToggleVisualAid"}),s({cut:["Cut","Cut","Ctrl+X"],copy:["Copy","Copy","Ctrl+C"],paste:["Paste","Paste","Ctrl+V"],selectall:["Select all","SelectAll","Ctrl+A"],bold:["Bold","Bold","Ctrl+B"],italic:["Italic","Italic","Ctrl+I"],underline:["Underline","Underline"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},function(t,n){e.addMenuItem(n,{text:t[0],icon:n,shortcut:t[2],cmd:t[1]})}),e.on("mousedown",function(){n.hideAll()}),e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:c}),e.addButton("formatselect",function(){var n=[],i=r(e.settings.block_formats||"Paragraph=p;Address=address;Pre=pre;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6");return s(i,function(t){n.push({text:t[0],value:t[1],textStyle:function(){return e.formatter.getCssText(t[1])}})}),{type:"listbox",text:i[0][0],values:n,fixedWidth:!0,onselect:l,onPostRender:t(n)}}),e.addButton("fontselect",function(){var n="Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",i=[],o=r(e.settings.font_formats||n);return s(o,function(e){i.push({text:{raw:e[0]},value:e[1],textStyle:-1==e[1].indexOf("dings")?"font-family:"+e[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:i,fixedWidth:!0,onPostRender:t(i,"fontname"),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}}),e.addButton("fontsizeselect",function(){var n=[],r="8pt 10pt 12pt 14pt 18pt 24pt 36pt",i=e.settings.fontsize_formats||r;return s(i.split(" "),function(e){var t=e,r=e,i=e.split("=");i.length>1&&(t=i[0],r=i[1]),n.push({text:t,value:r})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:n,fixedWidth:!0,onPostRender:t(n,"fontsize"),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}}),e.addMenuItem("formats",{text:"Formats",menu:c})}var s=r.each;i.on("AddEditor",function(t){t.editor.rtl&&(e.rtl=!0),a(t.editor)}),e.translate=function(e){return i.translate(e)},t.tooltips=!o.iOS}),r($e,[we],function(e){return e.extend({recalc:function(e){var t,n,r,i,o,a,s,l,c,d,u,f,m,p,h,g,v,y,b,x,C,w,_,k,N,S,E,T,R=e.settings,A=[],B=[];R=e.settings,r=e.items().filter(":visible"),i=e.layoutRect(),n=R.columns||Math.ceil(Math.sqrt(r.length)),t=Math.ceil(r.length/n),v=R.spacingH||R.spacing||0,y=R.spacingV||R.spacing||0,b=R.alignH||R.align,x=R.alignV||R.align,h=e._paddingBox,E="reverseRows"in R?R.reverseRows:e.isRtl(),b&&"string"==typeof b&&(b=[b]),x&&"string"==typeof x&&(x=[x]);for(d=0;n>d;d++)A.push(0);for(u=0;t>u;u++)B.push(0);for(u=0;t>u;u++)for(d=0;n>d&&(c=r[u*n+d]);d++)l=c.layoutRect(),_=l.minW,k=l.minH,A[d]=_>A[d]?_:A[d],B[u]=k>B[u]?k:B[u];for(N=i.innerW-h.left-h.right,C=0,d=0;n>d;d++)C+=A[d]+(d>0?v:0),N-=(d>0?v:0)+A[d];for(S=i.innerH-h.top-h.bottom,w=0,u=0;t>u;u++)w+=B[u]+(u>0?y:0),S-=(u>0?y:0)+B[u];if(C+=h.left+h.right,w+=h.top+h.bottom,s={},s.minW=C+(i.w-i.innerW),s.minH=w+(i.h-i.innerH),s.contentW=s.minW-i.deltaW,s.contentH=s.minH-i.deltaH,s.minW=Math.min(s.minW,i.maxW),s.minH=Math.min(s.minH,i.maxH),s.minW=Math.max(s.minW,i.startMinWidth),s.minH=Math.max(s.minH,i.startMinHeight),!i.autoResize||s.minW==i.minW&&s.minH==i.minH){i.autoResize&&(s=e.layoutRect(s),s.contentW=s.minW-i.deltaW,s.contentH=s.minH-i.deltaH);var P;P="start"==R.packV?0:S>0?Math.floor(S/t):0;var D=0,M=R.flexWidths;if(M)for(d=0;d<M.length;d++)D+=M[d];else D=n;var L=N/D;for(d=0;n>d;d++)A[d]+=M?M[d]*L:L;for(m=h.top,u=0;t>u;u++){for(f=h.left,a=B[u]+P,d=0;n>d&&(T=E?u*n+n-1-d:u*n+d,c=r[T]);d++)p=c.settings,l=c.layoutRect(),o=Math.max(A[d],l.startMinWidth),l.x=f,l.y=m,g=p.alignH||(b?b[d]||b[0]:null),"center"==g?l.x=f+o/2-l.w/2:"right"==g?l.x=f+o-l.w:"stretch"==g&&(l.w=o),g=p.alignV||(x?x[d]||x[0]:null),"center"==g?l.y=m+a/2-l.h/2:"bottom"==g?l.y=m+a-l.h:"stretch"==g&&(l.h=a),c.layoutRect(l),f+=o+v,c.recalc&&c.recalc();m+=a+y}}else if(s.w=s.minW,s.h=s.minH,e.layoutRect(s),this.recalc(e),null===e._lastRect){var I=e.parent();I&&(I._lastRect=null,I.recalc())}}})}),r(qe,[ke],function(e){return e.extend({renderHtml:function(){var e=this;return e.addClass("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes()+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var n=this,r=this.getEl().contentWindow.document.body;return r?(r.innerHTML=e,t&&t()):setTimeout(function(){n.html(e)},0),this}})}),r(je,[ke,j],function(e,t){return e.extend({init:function(e){var t=this;t._super(e),t.addClass("widget"),t.addClass("label"),t.canFocus=!1,e.multiline&&t.addClass("autoscroll"),e.strong&&t.addClass("strong")},initLayoutRect:function(){var e=this,n=e._super();if(e.settings.multiline){var r=t.getSize(e.getEl());r.width>n.maxW&&(n.minW=n.maxW,e.addClass("multiline")),e.getEl().style.width=n.minW+"px",n.startMinH=n.h=n.minH=Math.min(n.maxH,t.getSize(e.getEl()).height)}return n},repaint:function(){var e=this;return e.settings.multiline||(e.getEl().style.lineHeight=e.layoutRect().h+"px"),e._super()},text:function(e){var t=this;return t._rendered&&e&&this.innerHtml(t.encode(e)),t._super(e)},renderHtml:function(){var e=this,t=e.settings.forId;return'<label id="'+e._id+'" class="'+e.classes()+'"'+(t?' for="'+t+'"':"")+">"+e.encode(e._text)+"</label>"}})}),r(Ke,[J],function(e){return e.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){var t=this;t._super(e),t.addClass("toolbar")},postRender:function(){var e=this;return e.items().addClass("toolbar-item"),e._super()}})}),r(Ye,[Ke],function(e){return e.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}})}),r(Ge,[Ne,Y,Ye],function(e,t,n){function r(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}var i=e.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),t.addClass("menubtn"),e.fixedWidth&&t.addClass("fixed-width"),t.aria("haspopup",!0),t.hasPopup=!0},showMenu:function(){var e,n=this,r=n.settings;return n.menu&&n.menu.visible()?n.hideMenu():(n.menu||(e=r.menu||[],e.length?e={type:"menu",items:e}:e.type=e.type||"menu",n.menu=t.create(e).parent(n).renderTo(),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()}),n.menu.on("show hide",function(e){e.control==n.menu&&n.activeMenu("show"==e.type),n.aria("expanded","show"==e.type)}).fire("show")),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),void n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]))},hideMenu:function(){var e=this;e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide())},activeMenu:function(e){this.toggleClass("active",e)},renderHtml:function(){var e=this,t=e._id,r=e.classPrefix,i=e.settings.icon?r+"ico "+r+"i-"+e.settings.icon:"";return e.aria("role",e.parent()instanceof n?"menuitem":"button"),'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1" aria-labelledby="'+t+'"><button id="'+t+'-open" role="presentation" type="button" tabindex="-1">'+(i?'<i class="'+i+'"></i>':"")+"<span>"+(e._text?(i?" ":"")+e.encode(e._text):"")+'</span> <i class="'+r+'caret"></i></button></div>'},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&r(t.target,e.getEl())&&(e.showMenu(),t.aria&&e.menu.items()[0].focus())}),e.on("mouseenter",function(t){var n,r=t.control,o=e.parent();r&&o&&r instanceof i&&r.parent()==o&&(o.items().filter("MenuButton").each(function(e){e.hideMenu&&e!=r&&(e.menu&&e.menu.visible()&&(n=!0),e.hideMenu())}),n&&(r.focus(),r.showMenu()))}),e._super()},text:function(e){var t,n,r=this;if(r._rendered)for(n=r.getEl("open").getElementsByTagName("span"),t=0;t<n.length;t++)n[t].innerHTML=(r.settings.icon&&e?" ":"")+r.encode(e);return this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}});return i}),r(Je,[Ge],function(e){return e.extend({init:function(e){function t(n){for(var o=0;o<n.length;o++){if(r=n[o].selected||e.value===n[o].value){i=i||n[o].text,a._value=n[o].value;break}n[o].menu&&t(n[o].menu)}}var n,r,i,o,a=this;a._values=n=e.values,n&&("undefined"!=typeof e.value&&t(n),!r&&n.length>0&&(i=n[0].text,a._value=n[0].value),e.menu=n),e.text=e.text||i||n[0].text,a._super(e),a.addClass("listbox"),a.on("select",function(t){var n=t.control;o&&(t.lastControl=o),e.multiple?n.active(!n.active()):a.value(t.control.settings.value),o=n})},value:function(e){function t(e,n){e.items().each(function(e){r=e.value()===n,r&&(i=i||e.text()),e.active(r),e.menu&&t(e.menu,n)})}function n(t){for(var o=0;o<t.length;o++)r=t[o].value==e,r&&(i=i||t[o].text),t[o].active=r,t[o].menu&&n(t[o].menu)}var r,i,o,a=this;return"undefined"!=typeof e&&(a.menu?t(a.menu,e):(o=a.settings.menu,n(o)),a.text(i||this.settings.text)),a._super(e)}})}),r(Xe,[ke,Y,d],function(e,t,n){return e.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t=this;t.hasPopup=!0,t._super(e),e=t.settings,t.addClass("menu-item"),
e.menu&&t.addClass("menu-item-expand"),e.preview&&t.addClass("menu-item-preview"),("-"===t._text||"|"===t._text)&&(t.addClass("menu-item-sep"),t.aria("role","separator"),t._text="-"),e.selectable&&(t.aria("role","menuitemcheckbox"),t.addClass("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||t.addClass("menu-item-normal"),t.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu&&t.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e,n=this,r=n.settings,i=n.parent();if(i.items().each(function(e){e!==n&&e.hideMenu()}),r.menu){e=n.menu,e?e.show():(e=r.menu,e.length?e={type:"menu",items:e}:e.type=e.type||"menu",i.settings.itemDefaults&&(e.itemDefaults=i.settings.itemDefaults),e=n.menu=t.create(e).parent(n).renderTo(),e.reflow(),e.on("cancel",function(t){t.stopPropagation(),n.focus(),e.hide()}),e.on("show hide",function(e){e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),e.on("hide",function(t){t.control===e&&n.removeClass("selected")}),e.submenu=!0),e._parentMenu=i,e.addClass("menu-sub");var o=e.testMoveRel(n.getEl(),n.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);e.moveRel(n.getEl(),o),e.rel=o,o="menu-sub-"+o,e.removeClass(e._lastRel),e.addClass(o),e._lastRel=o,n.addClass("selected"),n.aria("expanded",!0)}},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){var e=this,t=e._id,r=e.settings,i=e.classPrefix,o=e.encode(e._text),a=e.settings.icon,s="",l=r.shortcut;return a&&e.parent().addClass("menu-has-icons"),r.image&&(a="none",s=" style=\"background-image: url('"+r.image+"')\""),l&&n.mac&&(l=l.replace(/ctrl\+alt\+/i,"&#x2325;&#x2318;"),l=l.replace(/ctrl\+/i,"&#x2318;"),l=l.replace(/alt\+/i,"&#x2325;"),l=l.replace(/shift\+/i,"&#x21E7;")),a=i+"ico "+i+"i-"+(e.settings.icon||"none"),'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1">'+("-"!==o?'<i class="'+a+'"'+s+"></i> ":"")+("-"!==o?'<span id="'+t+'-text" class="'+i+'text">'+o+"</span>":"")+(l?'<div id="'+t+'-shortcut" class="'+i+'menu-shortcut">'+l+"</div>":"")+(r.menu?'<div class="'+i+'caret"></div>':"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var r=e.getEl("text");r&&r.setAttribute("style",n)}return e.on("mouseenter click",function(n){n.control===e&&(t.menu||"click"!==n.type?(e.showMenu(),n.aria&&e.menu.focus(!0)):(e.fire("select"),e.parent().hideAll()))}),e._super(),e},active:function(e){return"undefined"!=typeof e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}})}),r(Qe,[ne,Xe,c],function(e,t,n){var r=e.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){var t=this;if(e.autohide=!0,e.constrainToViewport=!0,e.itemDefaults)for(var r=e.items,i=r.length;i--;)r[i]=n.extend({},e.itemDefaults,r[i]);t._super(e),t.addClass("menu")},repaint:function(){return this.toggleClass("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var e=this;e.hideAll(),e.fire("select")},hideAll:function(){var e=this;return this.find("menuitem").exec("hideMenu"),e._super()},preRender:function(){var e=this;return e.items().each(function(t){var n=t.settings;return n.icon||n.selectable?(e._hasIcons=!0,!1):void 0}),e._super()}});return r}),r(Ze,[Ee],function(e){return e.extend({Defaults:{classes:"radio",role:"radio"}})}),r(et,[ke,X],function(e,t){return e.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.addClass("resizehandle"),"both"==e.settings.direction&&e.addClass("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes()+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new t(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!=e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}})}),r(tt,[ke],function(e){return e.extend({renderHtml:function(){var e=this;return e.addClass("spacer"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes()+'"></div>'}})}),r(nt,[Ge,j],function(e,t){return e.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,n,r=this,i=r.getEl(),o=r.layoutRect();return r._super(),e=i.firstChild,n=i.lastChild,t.css(e,{width:o.w-t.getSize(n).width,height:o.h-2}),t.css(n,{height:o.h-2}),r},activeMenu:function(e){var n=this;t.toggleClass(n.getEl().lastChild,n.classPrefix+"active",e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,r=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"";return'<div id="'+t+'" class="'+e.classes()+'" role="button" tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(r?'<i class="'+r+'"></i>':"")+(e._text?(r?" ":"")+e._text:"")+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1">'+(e._menuBtnText?(r?" ":"")+e._menuBtnText:"")+' <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(e){var n=e.target;if(e.control==this)for(;n;){if(e.aria&&"down"!=e.aria.key||"BUTTON"==n.nodeName&&-1==n.className.indexOf("open"))return e.stopImmediatePropagation(),void t.call(this,e);n=n.parentNode}}),delete e.settings.onclick,e._super()}})}),r(rt,[Ue],function(e){return e.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"}})}),r(it,[Z,j],function(e,t){return e.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var n;this.activeTabId&&(n=this.getEl(this.activeTabId),t.removeClass(n,this.classPrefix+"active"),n.setAttribute("aria-selected","false")),this.activeTabId="t"+e,n=this.getEl("t"+e),n.setAttribute("aria-selected","true"),t.addClass(n,this.classPrefix+"active"),this.items()[e].show().fire("showtab"),this.reflow(),this.items().each(function(t,n){e!=n&&t.hide()})},renderHtml:function(){var e=this,t=e._layout,n="",r=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,i){var o=e._id+"-t"+i;t.aria("role","tabpanel"),t.aria("labelledby",o),n+='<div id="'+o+'" class="'+r+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1"><div id="'+e._id+'-head" class="'+r+'tabs" role="tablist">'+n+'</div><div id="'+e._id+'-body" class="'+e.classes("body")+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=t.target.parentNode;if(t.target.parentNode.id==e._id+"-head")for(var r=n.childNodes.length;r--;)n.childNodes[r]==t.target&&e.activateTab(r)})},initLayoutRect:function(){var e,n,r,i=this;n=t.getSize(i.getEl("head")).width,n=0>n?0:n,r=0,i.items().each(function(e){n=Math.max(n,e.layoutRect().minW),r=Math.max(r,e.layoutRect().minH)}),i.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=n,e.settings.h=r,e.layoutRect({x:0,y:0,w:n,h:r})});var o=t.getSize(i.getEl("head")).height;return i.settings.minWidth=n,i.settings.minHeight=r+o,e=i._super(),e.deltaH+=o,e.innerH=e.h-e.deltaH,e}})}),r(ot,[ke,j],function(e,t){return e.extend({init:function(e){var t=this;t._super(e),t._value=e.value||"",t.addClass("textbox"),e.multiline?t.addClass("multiline"):t.on("keydown",function(e){13==e.keyCode&&t.parents().reverse().each(function(t){return e.preventDefault(),t.hasEventListeners("submit")&&t.toJSON?(t.fire("submit",{data:t.toJSON()}),!1):void 0})})},disabled:function(e){var t=this;return t._rendered&&"undefined"!=typeof e&&(t.getEl().disabled=e),t._super(e)},value:function(e){var t=this;return"undefined"!=typeof e?(t._value=e,t._rendered&&(t.getEl().value=e),t):t._rendered?t.getEl().value:t._value},repaint:function(){var e,t,n,r,i=this,o=0,a=0;e=i.getEl().style,t=i._layoutRect,r=i._lastRepaintRect||{};var s=document;return!i.settings.multiline&&s.all&&(!s.documentMode||s.documentMode<=8)&&(e.lineHeight=t.h-a+"px"),n=i._borderBox,o=n.left+n.right+8,a=n.top+n.bottom+(i.settings.multiline?8:0),t.x!==r.x&&(e.left=t.x+"px",r.x=t.x),t.y!==r.y&&(e.top=t.y+"px",r.y=t.y),t.w!==r.w&&(e.width=t.w-o+"px",r.w=t.w),t.h!==r.h&&(e.height=t.h-a+"px",r.h=t.h),i._lastRepaintRect=r,i.fire("repaint",{},!1),i},renderHtml:function(){var e=this,t=e._id,n=e.settings,r=e.encode(e._value,!1),i="";return"spellcheck"in n&&(i+=' spellcheck="'+n.spellcheck+'"'),n.maxLength&&(i+=' maxlength="'+n.maxLength+'"'),n.size&&(i+=' size="'+n.size+'"'),n.subtype&&(i+=' type="'+n.subtype+'"'),e.disabled()&&(i+=' disabled="disabled"'),n.multiline?'<textarea id="'+t+'" class="'+e.classes()+'" '+(n.rows?' rows="'+n.rows+'"':"")+' hidefocus="1"'+i+">"+r+"</textarea>":'<input id="'+t+'" class="'+e.classes()+'" value="'+r+'" hidefocus="1"'+i+" />"},postRender:function(){var e=this;return t.on(e.getEl(),"change",function(t){e.fire("change",t)}),e._super()},remove:function(){t.off(this.getEl()),this._super()}})}),r(at,[j,K],function(e,t){return function(n,r){var i,o=this,a=t.classPrefix;o.show=function(t){return o.hide(),i=!0,window.setTimeout(function(){i&&n.appendChild(e.createFragment('<div class="'+a+"throbber"+(r?" "+a+"throbber-inline":"")+'"></div>'))},t||0),o},o.hide=function(){var e=n.lastChild;return e&&-1!=e.className.indexOf("throbber")&&e.parentNode.removeChild(e),i=!1,o}}}),o([s,l,c,d,u,f,m,p,h,v,y,b,w,_,k,N,S,E,T,R,A,B,P,D,M,I,O,H,F,z,W,U,V,$,q,j,K,Y,G,J,X,Q,Z,ee,te,ne,re,ie,oe,ae,se,le,ce,de,ue,fe,me,pe,he,ge,ve,ye,be,xe,Ce,we,_e,ke,Ne,Se,Ee,Te,Re,Ae,Be,Pe,De,Me,Le,Ie,Oe,He,Fe,ze,We,Ue,Ve,$e,qe,je,Ke,Ye,Ge,Je,Xe,Qe,Ze,et,tt,nt,rt,it,ot,at])}(this),tinymce.PluginManager.add("advlist",function(e){function t(e,t){var n=[];return tinymce.each(t.split(/[ ,]/),function(e){n.push({text:e.replace(/\-/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()}),data:"default"==e?"":e})}),n}function n(t,n){var r,i=e.dom,o=e.selection;r=i.getParent(o.getNode(),"ol,ul"),r&&r.nodeName==t&&n!==!1||e.execCommand("UL"==t?"InsertUnorderedList":"InsertOrderedList"),n=n===!1?a[t]:n,a[t]=n,r=i.getParent(o.getNode(),"ol,ul"),r&&n&&(i.setStyle(r,"listStyleType",n),r.removeAttribute("data-mce-style")),e.focus()}function r(t){var n=e.dom.getStyle(e.dom.getParent(e.selection.getNode(),"ol,ul"),"listStyleType")||"";t.control.items().each(function(e){e.active(e.settings.data===n)})}var i,o,a={};i=t("OL",e.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman")),o=t("UL",e.getParam("advlist_bullet_styles","default,circle,disc,square")),e.addButton("numlist",{type:"splitbutton",tooltip:"Numbered list",menu:i,onshow:r,onselect:function(e){n("OL",e.control.settings.data)},onclick:function(){n("OL",!1)}}),e.addButton("bullist",{type:"splitbutton",tooltip:"Bullet list",menu:o,onshow:r,onselect:function(e){n("UL",e.control.settings.data)},onclick:function(){n("UL",!1)}})}),tinymce.PluginManager.add("anchor",function(e){function t(){var t=e.selection.getNode(),n="";"A"==t.tagName&&(n=t.name||t.id||""),e.windowManager.open({title:"Anchor",body:{type:"textbox",name:"name",size:40,label:"Name",value:n},onsubmit:function(t){e.execCommand("mceInsertContent",!1,e.dom.createHTML("a",{id:t.data.name}))}})}e.addButton("anchor",{icon:"anchor",tooltip:"Anchor",onclick:t,stateSelector:"a:not([href])"}),e.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",onclick:t})}),tinymce.PluginManager.add("autolink",function(e){function t(e){i(e,-1,"(",!0)}function n(e){i(e,0,"",!0)}function r(e){i(e,-1,"",!1)}function i(e,t,n){function r(e,t){if(0>t&&(t=0),3==e.nodeType){var n=e.data.length;t>n&&(t=n)}return t}function i(e,t){a.setStart(e,r(e,t))}function o(e,t){a.setEnd(e,r(e,t))}var a,s,l,c,d,u,f,m,p,h;if(a=e.selection.getRng(!0).cloneRange(),a.startOffset<5){if(m=a.endContainer.previousSibling,!m){if(!a.endContainer.firstChild||!a.endContainer.firstChild.nextSibling)return;m=a.endContainer.firstChild.nextSibling}if(p=m.length,i(m,p),o(m,p),a.endOffset<5)return;s=a.endOffset,c=m}else{if(c=a.endContainer,3!=c.nodeType&&c.firstChild){for(;3!=c.nodeType&&c.firstChild;)c=c.firstChild;3==c.nodeType&&(i(c,0),o(c,c.nodeValue.length))}s=1==a.endOffset?2:a.endOffset-1-t}l=s;do i(c,s>=2?s-2:0),o(c,s>=1?s-1:0),s-=1,h=a.toString();while(" "!=h&&""!==h&&160!=h.charCodeAt(0)&&s-2>=0&&h!=n);a.toString()==n||160==a.toString().charCodeAt(0)?(i(c,s),o(c,l),s+=1):0===a.startOffset?(i(c,0),o(c,l)):(i(c,s),o(c,l)),u=a.toString(),"."==u.charAt(u.length-1)&&o(c,l-1),u=a.toString(),f=u.match(/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i),f&&("www."==f[1]?f[1]="http://www.":/@$/.test(f[1])&&!/^mailto:/.test(f[1])&&(f[1]="mailto:"+f[1]),d=e.selection.getBookmark(),e.selection.setRng(a),e.execCommand("createlink",!1,f[1]+f[2]),e.selection.moveToBookmark(d),e.nodeChanged())}var o;return e.on("keydown",function(t){return 13==t.keyCode?r(e):void 0}),tinymce.Env.ie?void e.on("focus",function(){if(!o){o=!0;try{e.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}}):(e.on("keypress",function(n){return 41==n.keyCode?t(e):void 0}),void e.on("keyup",function(t){return 32==t.keyCode?n(e):void 0}))}),tinymce.PluginManager.add("autoresize",function(e){function t(){return e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen()}function n(r){var a,s,l,c,d,u,f,m,p=tinymce.DOM;if(s=e.getDoc()){if(l=s.body,c=s.documentElement,d=i.autoresize_min_height,!l||r&&"setcontent"===r.type&&r.initial||t())return void(l&&c&&(l.style.overflowY="auto",c.style.overflowY="auto"));f=e.dom.getStyle(l,"margin-top",!0),m=e.dom.getStyle(l,"margin-bottom",!0),u=l.offsetHeight+parseInt(f,10)+parseInt(m,10),(isNaN(u)||0>=u)&&(u=tinymce.Env.ie?l.scrollHeight:tinymce.Env.webkit&&0===l.clientHeight?0:l.offsetHeight),u>i.autoresize_min_height&&(d=u),i.autoresize_max_height&&u>i.autoresize_max_height?(d=i.autoresize_max_height,l.style.overflowY="auto",c.style.overflowY="auto"):(l.style.overflowY="hidden",c.style.overflowY="hidden",l.scrollTop=0),d!==o&&(a=d-o,p.setStyle(p.get(e.id+"_ifr"),"height",d+"px"),o=d,tinymce.isWebKit&&0>a&&n(r))}}function r(e,t,i){setTimeout(function(){n({}),e--?r(e,t,i):i&&i()},t)}var i=e.settings,o=0;e.settings.inline||(i.autoresize_min_height=parseInt(e.getParam("autoresize_min_height",e.getElement().offsetHeight),10),i.autoresize_max_height=parseInt(e.getParam("autoresize_max_height",0),10),e.on("init",function(){var t=e.getParam("autoresize_overflow_padding",1);e.dom.setStyles(e.getBody(),{paddingBottom:e.getParam("autoresize_bottom_margin",50),paddingLeft:t,paddingRight:t})}),e.on("nodechange setcontent keyup FullscreenStateChanged",n),e.getParam("autoresize_on_init",!0)&&e.on("init",function(){r(20,100,function(){r(5,1e3)})}),e.addCommand("mceAutoResize",n))}),tinymce.PluginManager.add("autosave",function(e){function t(e,t){var n={s:1e3,m:6e4};return e=/^(\d+)([ms]?)$/.exec(""+(e||t)),(e[2]?n[e[2]]:1)*parseInt(e,10)}function n(){var e=parseInt(p.getItem(u+"time"),10)||0;return!((new Date).getTime()-e>m.autosave_retention)||(r(!1),!1)}function r(t){p.removeItem(u+"draft"),p.removeItem(u+"time"),t!==!1&&e.fire("RemoveDraft")}function i(){!d()&&e.isDirty()&&(p.setItem(u+"draft",e.getContent({format:"raw",no_events:!0})),p.setItem(u+"time",(new Date).getTime()),e.fire("StoreDraft"))}function o(){n()&&(e.setContent(p.getItem(u+"draft"),{format:"raw"}),e.fire("RestoreDraft"))}function a(){f||(setInterval(function(){e.removed||i()},m.autosave_interval),f=!0)}function s(){var t=this;t.disabled(!n()),e.on("StoreDraft RestoreDraft RemoveDraft",function(){t.disabled(!n())}),a()}function l(){e.undoManager.beforeChange(),o(),r(),e.undoManager.add()}function c(){var e;return tinymce.each(tinymce.editors,function(t){t.plugins.autosave&&t.plugins.autosave.storeDraft(),!e&&t.isDirty()&&t.getParam("autosave_ask_before_unload",!0)&&(e=t.translate("You have unsaved changes are you sure you want to navigate away?"))}),e}function d(t){var n=e.settings.forced_root_block;return t=tinymce.trim("undefined"==typeof t?e.getBody().innerHTML:t),""===t||new RegExp("^<"+n+"[^>]*>(( |&nbsp;|[ \t]|<br[^>]*>)+?|)</"+n+">|<br>$","i").test(t)}var u,f,m=e.settings,p=tinymce.util.LocalStorage;u=m.autosave_prefix||"tinymce-autosave-{path}{query}-{id}-",u=u.replace(/\{path\}/g,document.location.pathname),u=u.replace(/\{query\}/g,document.location.search),u=u.replace(/\{id\}/g,e.id),m.autosave_interval=t(m.autosave_interval,"30s"),m.autosave_retention=t(m.autosave_retention,"20m"),e.addButton("restoredraft",{title:"Restore last draft",onclick:l,onPostRender:s}),e.addMenuItem("restoredraft",{text:"Restore last draft",onclick:l,onPostRender:s,context:"file"}),e.settings.autosave_restore_when_empty!==!1&&(e.on("init",function(){n()&&d()&&o()}),e.on("saveContent",function(){r()})),window.onbeforeunload=c,this.hasDraft=n,this.storeDraft=i,this.restoreDraft=o,this.removeDraft=r,this.isEmpty=d}),!function(){tinymce.create("tinymce.plugins.BBCodePlugin",{init:function(e){var t=this,n=e.getParam("bbcode_dialect","punbb").toLowerCase();e.on("beforeSetContent",function(e){e.content=t["_"+n+"_bbcode2html"](e.content)}),e.on("postProcess",function(e){e.set&&(e.content=t["_"+n+"_bbcode2html"](e.content)),e.get&&(e.content=t["_"+n+"_html2bbcode"](e.content))})},getInfo:function(){return{longname:"BBCode Plugin",author:"Moxiecode Systems AB",authorurl:"http://www.tinymce.com",infourl:"http://www.tinymce.com/wiki.php/Plugin:bbcode"}},_punbb_html2bbcode:function(e){function t(t,n){e=e.replace(t,n)}return e=tinymce.trim(e),t(/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]"),t(/<font.*?color=\"(.*?)\".*?class=\"codeStyle\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),t(/<font.*?color=\"(.*?)\".*?class=\"quoteStyle\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),t(/<font.*?class=\"codeStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),t(/<font.*?class=\"quoteStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),t(/<span style=\"color: ?(.*?);\">(.*?)<\/span>/gi,"[color=$1]$2[/color]"),t(/<font.*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[color=$1]$2[/color]"),t(/<span style=\"font-size:(.*?);\">(.*?)<\/span>/gi,"[size=$1]$2[/size]"),t(/<font>(.*?)<\/font>/gi,"$1"),t(/<img.*?src=\"(.*?)\".*?\/>/gi,"[img]$1[/img]"),t(/<span class=\"codeStyle\">(.*?)<\/span>/gi,"[code]$1[/code]"),t(/<span class=\"quoteStyle\">(.*?)<\/span>/gi,"[quote]$1[/quote]"),t(/<strong class=\"codeStyle\">(.*?)<\/strong>/gi,"[code][b]$1[/b][/code]"),t(/<strong class=\"quoteStyle\">(.*?)<\/strong>/gi,"[quote][b]$1[/b][/quote]"),t(/<em class=\"codeStyle\">(.*?)<\/em>/gi,"[code][i]$1[/i][/code]"),t(/<em class=\"quoteStyle\">(.*?)<\/em>/gi,"[quote][i]$1[/i][/quote]"),t(/<u class=\"codeStyle\">(.*?)<\/u>/gi,"[code][u]$1[/u][/code]"),t(/<u class=\"quoteStyle\">(.*?)<\/u>/gi,"[quote][u]$1[/u][/quote]"),t(/<\/(strong|b)>/gi,"[/b]"),t(/<(strong|b)>/gi,"[b]"),t(/<\/(em|i)>/gi,"[/i]"),t(/<(em|i)>/gi,"[i]"),t(/<\/u>/gi,"[/u]"),t(/<span style=\"text-decoration: ?underline;\">(.*?)<\/span>/gi,"[u]$1[/u]"),t(/<u>/gi,"[u]"),t(/<blockquote[^>]*>/gi,"[quote]"),t(/<\/blockquote>/gi,"[/quote]"),t(/<br \/>/gi,"\n"),t(/<br\/>/gi,"\n"),t(/<br>/gi,"\n"),t(/<p>/gi,""),t(/<\/p>/gi,"\n"),t(/&nbsp;|\u00a0/gi," "),t(/&quot;/gi,'"'),t(/&lt;/gi,"<"),t(/&gt;/gi,">"),t(/&amp;/gi,"&"),e},_punbb_bbcode2html:function(e){function t(t,n){e=e.replace(t,n)}return e=tinymce.trim(e),t(/\n/gi,"<br />"),t(/\[b\]/gi,"<strong>"),t(/\[\/b\]/gi,"</strong>"),t(/\[i\]/gi,"<em>"),t(/\[\/i\]/gi,"</em>"),t(/\[u\]/gi,"<u>"),t(/\[\/u\]/gi,"</u>"),t(/\[url=([^\]]+)\](.*?)\[\/url\]/gi,'<a href="$1">$2</a>'),t(/\[url\](.*?)\[\/url\]/gi,'<a href="$1">$1</a>'),t(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />'),t(/\[color=(.*?)\](.*?)\[\/color\]/gi,'<font color="$1">$2</font>'),t(/\[code\](.*?)\[\/code\]/gi,'<span class="codeStyle">$1</span>&nbsp;'),t(/\[quote.*?\](.*?)\[\/quote\]/gi,'<span class="quoteStyle">$1</span>&nbsp;'),e}}),tinymce.PluginManager.add("bbcode",tinymce.plugins.BBCodePlugin)}(),tinymce.PluginManager.add("charmap",function(e){function t(){function t(e){for(;e;){if("TD"==e.nodeName)return e;e=e.parentNode}}var r,i,o,a;r='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>';var s=25;for(o=0;10>o;o++){for(r+="<tr>",i=0;s>i;i++){var l=n[o*s+i];r+='<td title="'+l[1]+'"><div tabindex="-1" title="'+l[1]+'" role="button">'+(l?String.fromCharCode(parseInt(l[0],10)):"&nbsp;")+"</div></td>"}r+="</tr>"}r+="</tbody></table>";var c={type:"container",html:r,onclick:function(t){var n=t.target;"TD"==n.tagName&&(n=n.firstChild),"DIV"==n.tagName&&(e.execCommand("mceInsertContent",!1,n.firstChild.data),t.ctrlKey||a.close())},onmouseover:function(e){var n=t(e.target);n&&a.find("#preview").text(n.firstChild.firstChild.data)}};a=e.windowManager.open({title:"Special character",spacing:10,padding:10,items:[c,{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:100,minHeight:80}],buttons:[{text:"Close",onclick:function(){a.close()}}]})}var n=[["160","no-break space"],["38","ampersand"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["221","Y - acute"],["376","Y - diaeresis"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"],["173","soft hyphen"]];e.addButton("charmap",{icon:"charmap",tooltip:"Special character",onclick:t}),e.addMenuItem("charmap",{icon:"charmap",text:"Special character",onclick:t,context:"insert"})}),tinymce.PluginManager.add("code",function(e){function t(){var t=e.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:!0,minWidth:e.getParam("code_dialog_width",600),minHeight:e.getParam("code_dialog_height",Math.min(tinymce.DOM.getViewPort().h-200,500)),spellcheck:!1,style:"direction: ltr; text-align: left"},onSubmit:function(t){e.focus(),e.undoManager.transact(function(){e.setContent(t.data.code)}),e.selection.setCursorLocation(),e.nodeChanged()}});t.find("#code").value(e.getContent({source_view:!0}))}e.addCommand("mceCodeEditor",t),e.addButton("code",{icon:"code",tooltip:"Source code",onclick:t}),e.addMenuItem("code",{icon:"code",text:"Source code",context:"tools",onclick:t})}),tinymce.PluginManager.add("colorpicker",function(e){function t(t,n){function r(e){var t=new tinymce.util.Color(e),n=t.toRgb();o.fromJSON({r:n.r,g:n.g,b:n.b,hex:t.toHex().substr(1)}),i(t.toHex())}function i(e){o.find("#preview")[0].getEl().style.background=e}var o=e.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:n,onchange:function(){var e=this.rgb();o&&(o.find("#r").value(e.r),o.find("#g").value(e.g),o.find("#b").value(e.b),o.find("#hex").value(this.value().substr(1)),i(this.value()))}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:!1,onchange:function(){var e,t,n=o.find("colorpicker")[0];return e=this.name(),t=this.value(),"hex"==e?(t="#"+t,r(t),void n.value(t)):(t={r:o.find("#r").value(),g:o.find("#g").value(),b:o.find("#b").value()},n.value(t),void r(t))}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){t("#"+this.toJSON().hex)}});r(n)}e.settings.color_picker_callback||(e.settings.color_picker_callback=t)}),tinymce.PluginManager.add("contextmenu",function(e){var t,n=e.settings.contextmenu_never_use_native;e.on("contextmenu",function(r){var i,o=e.getDoc();if(!r.ctrlKey||n){if(r.preventDefault(),tinymce.Env.mac&&tinymce.Env.webkit&&2==r.button&&o.caretRangeFromPoint&&e.selection.setRng(o.caretRangeFromPoint(r.x,r.y)),i=e.settings.contextmenu||"link image inserttable | cell row column deletetable",t)t.show();else{var a=[];tinymce.each(i.split(/[ ,]/),function(t){var n=e.menuItems[t];"|"==t&&(n={text:t}),n&&(n.shortcut="",a.push(n))});for(var s=0;s<a.length;s++)"|"==a[s].text&&(0===s||s==a.length-1)&&a.splice(s,1);t=new tinymce.ui.Menu({items:a,context:"contextmenu"}).addClass("contextmenu").renderTo(),e.on("remove",function(){t.remove(),t=null})}var l={x:r.pageX,y:r.pageY};e.inline||(l=tinymce.DOM.getPos(e.getContentAreaContainer()),l.x+=r.clientX,l.y+=r.clientY),t.moveTo(l.x,l.y)}})}),tinymce.PluginManager.add("directionality",function(e){function t(t){var n,r=e.dom,i=e.selection.getSelectedBlocks();i.length&&(n=r.getAttrib(i[0],"dir"),tinymce.each(i,function(e){r.getParent(e.parentNode,"*[dir='"+t+"']",r.getRoot())||(n!=t?r.setAttrib(e,"dir",t):r.setAttrib(e,"dir",null))}),e.nodeChanged())}function n(e){var t=[];return tinymce.each("h1 h2 h3 h4 h5 h6 div p".split(" "),function(n){t.push(n+"[dir="+e+"]")}),t.join(",")}e.addCommand("mceDirectionLTR",function(){t("ltr")}),e.addCommand("mceDirectionRTL",function(){t("rtl")}),e.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:n("ltr")}),e.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:n("rtl")})}),tinymce.PluginManager.add("emoticons",function(e,t){function n(){var e;return e='<table role="list" class="mce-grid">',tinymce.each(r,function(n){e+="<tr>",tinymce.each(n,function(n){var r=t+"/img/smiley-"+n+".gif";e+='<td><a href="#" data-mce-url="'+r+'" data-mce-alt="'+n+'" tabindex="-1" role="option" aria-label="'+n+'"><img src="'+r+'" style="width: 18px; height: 18px" role="presentation" /></a></td>'}),e+="</tr>"}),e+="</table>"}var r=[["cool","cry","embarassed","foot-in-mouth"],["frown","innocent","kiss","laughing"],["money-mouth","sealed","smile","surprised"],["tongue-out","undecided","wink","yell"]];e.addButton("emoticons",{type:"panelbutton",panel:{role:"application",autohide:!0,html:n,onclick:function(t){var n=e.dom.getParent(t.target,"a");n&&(e.insertContent('<img src="'+n.getAttribute("data-mce-url")+'" alt="'+n.getAttribute("data-mce-alt")+'" />'),this.hide())}},tooltip:"Emoticons"})}),tinymce.PluginManager.add("fullpage",function(e){function t(){
var t=n();e.windowManager.open({title:"Document properties",data:t,defaults:{type:"textbox",size:40},body:[{name:"title",label:"Title"},{name:"keywords",label:"Keywords"},{name:"description",label:"Description"},{name:"robots",label:"Robots"},{name:"author",label:"Author"},{name:"docencoding",label:"Encoding"}],onSubmit:function(e){r(tinymce.extend(t,e.data))}})}function n(){function t(e,t){var n=e.attr(t);return n||""}var n,r,o=i(),a={};return a.fontface=e.getParam("fullpage_default_fontface",""),a.fontsize=e.getParam("fullpage_default_fontsize",""),n=o.firstChild,7==n.type&&(a.xml_pi=!0,r=/encoding="([^"]+)"/.exec(n.value),r&&(a.docencoding=r[1])),n=o.getAll("#doctype")[0],n&&(a.doctype="<!DOCTYPE"+n.value+">"),n=o.getAll("title")[0],n&&n.firstChild&&(a.title=n.firstChild.value),d(o.getAll("meta"),function(e){var t,n=e.attr("name"),r=e.attr("http-equiv");n?a[n.toLowerCase()]=e.attr("content"):"Content-Type"==r&&(t=/charset\s*=\s*(.*)\s*/gi.exec(e.attr("content")),t&&(a.docencoding=t[1]))}),n=o.getAll("html")[0],n&&(a.langcode=t(n,"lang")||t(n,"xml:lang")),a.stylesheets=[],tinymce.each(o.getAll("link"),function(e){"stylesheet"==e.attr("rel")&&a.stylesheets.push(e.attr("href"))}),n=o.getAll("body")[0],n&&(a.langdir=t(n,"dir"),a.style=t(n,"style"),a.visited_color=t(n,"vlink"),a.link_color=t(n,"link"),a.active_color=t(n,"alink")),a}function r(t){function n(e,t,n){e.attr(t,n?n:void 0)}function r(e){a.firstChild?a.insert(e,a.firstChild):a.append(e)}var o,a,s,c,f,m=e.dom;o=i(),a=o.getAll("head")[0],a||(c=o.getAll("html")[0],a=new u("head",1),c.firstChild?c.insert(a,c.firstChild,!0):c.append(a)),c=o.firstChild,t.xml_pi?(f='version="1.0"',t.docencoding&&(f+=' encoding="'+t.docencoding+'"'),7!=c.type&&(c=new u("xml",7),o.insert(c,o.firstChild,!0)),c.value=f):c&&7==c.type&&c.remove(),c=o.getAll("#doctype")[0],t.doctype?(c||(c=new u("#doctype",10),t.xml_pi?o.insert(c,o.firstChild):r(c)),c.value=t.doctype.substring(9,t.doctype.length-1)):c&&c.remove(),c=null,d(o.getAll("meta"),function(e){"Content-Type"==e.attr("http-equiv")&&(c=e)}),t.docencoding?(c||(c=new u("meta",1),c.attr("http-equiv","Content-Type"),c.shortEnded=!0,r(c)),c.attr("content","text/html; charset="+t.docencoding)):c&&c.remove(),c=o.getAll("title")[0],t.title?(c?c.empty():(c=new u("title",1),r(c)),c.append(new u("#text",3)).value=t.title):c&&c.remove(),d("keywords,description,author,copyright,robots".split(","),function(e){var n,i,a=o.getAll("meta"),s=t[e];for(n=0;n<a.length;n++)if(i=a[n],i.attr("name")==e)return void(s?i.attr("content",s):i.remove());s&&(c=new u("meta",1),c.attr("name",e),c.attr("content",s),c.shortEnded=!0,r(c))});var p={};tinymce.each(o.getAll("link"),function(e){"stylesheet"==e.attr("rel")&&(p[e.attr("href")]=e)}),tinymce.each(t.stylesheets,function(e){p[e]||(c=new u("link",1),c.attr({rel:"stylesheet",text:"text/css",href:e}),c.shortEnded=!0,r(c)),delete p[e]}),tinymce.each(p,function(e){e.remove()}),c=o.getAll("body")[0],c&&(n(c,"dir",t.langdir),n(c,"style",t.style),n(c,"vlink",t.visited_color),n(c,"link",t.link_color),n(c,"alink",t.active_color),m.setAttribs(e.getBody(),{style:t.style,dir:t.dir,vLink:t.visited_color,link:t.link_color,aLink:t.active_color})),c=o.getAll("html")[0],c&&(n(c,"lang",t.langcode),n(c,"xml:lang",t.langcode)),a.firstChild||a.remove(),s=new tinymce.html.Serializer({validate:!1,indent:!0,apply_source_formatting:!0,indent_before:"head,html,body,meta,title,script,link,style",indent_after:"head,html,body,meta,title,script,link,style"}).serialize(o),l=s.substring(0,s.indexOf("</body>"))}function i(){return new tinymce.html.DomParser({validate:!1,root_name:"#document"}).parse(l)}function o(t){function n(e){return e.replace(/<\/?[A-Z]+/g,function(e){return e.toLowerCase()})}var r,o,s,u,f=t.content,m="",p=e.dom;if(!t.selection&&!("raw"==t.format&&l||t.source_view&&e.getParam("fullpage_hide_in_source_view"))){f=f.replace(/<(\/?)BODY/gi,"<$1body"),r=f.indexOf("<body"),-1!=r?(r=f.indexOf(">",r),l=n(f.substring(0,r+1)),o=f.indexOf("</body",r),-1==o&&(o=f.length),t.content=f.substring(r+1,o),c=n(f.substring(o))):(l=a(),c="\n</body>\n</html>"),s=i(),d(s.getAll("style"),function(e){e.firstChild&&(m+=e.firstChild.value)}),u=s.getAll("body")[0],u&&p.setAttribs(e.getBody(),{style:u.attr("style")||"",dir:u.attr("dir")||"",vLink:u.attr("vlink")||"",link:u.attr("link")||"",aLink:u.attr("alink")||""}),p.remove("fullpage_styles");var h=e.getDoc().getElementsByTagName("head")[0];m&&(p.add(h,"style",{id:"fullpage_styles"},m),u=p.get("fullpage_styles"),u.styleSheet&&(u.styleSheet.cssText=m));var g={};tinymce.each(h.getElementsByTagName("link"),function(e){"stylesheet"==e.rel&&e.getAttribute("data-mce-fullpage")&&(g[e.href]=e)}),tinymce.each(s.getAll("link"),function(e){var t=e.attr("href");g[t]||"stylesheet"!=e.attr("rel")||p.add(h,"link",{rel:"stylesheet",text:"text/css",href:t,"data-mce-fullpage":"1"}),delete g[t]}),tinymce.each(g,function(e){e.parentNode.removeChild(e)})}}function a(){var t,n="",r="";return e.getParam("fullpage_default_xml_pi")&&(n+='<?xml version="1.0" encoding="'+e.getParam("fullpage_default_encoding","ISO-8859-1")+'" ?>\n'),n+=e.getParam("fullpage_default_doctype","<!DOCTYPE html>"),n+="\n<html>\n<head>\n",(t=e.getParam("fullpage_default_title"))&&(n+="<title>"+t+"</title>\n"),(t=e.getParam("fullpage_default_encoding"))&&(n+='<meta http-equiv="Content-Type" content="text/html; charset='+t+'" />\n'),(t=e.getParam("fullpage_default_font_family"))&&(r+="font-family: "+t+";"),(t=e.getParam("fullpage_default_font_size"))&&(r+="font-size: "+t+";"),(t=e.getParam("fullpage_default_text_color"))&&(r+="color: "+t+";"),n+="</head>\n<body"+(r?' style="'+r+'"':"")+">\n"}function s(t){t.selection||t.source_view&&e.getParam("fullpage_hide_in_source_view")||(t.content=tinymce.trim(l)+"\n"+tinymce.trim(t.content)+"\n"+tinymce.trim(c))}var l,c,d=tinymce.each,u=tinymce.html.Node;e.addCommand("mceFullPageProperties",t),e.addButton("fullpage",{title:"Document properties",cmd:"mceFullPageProperties"}),e.addMenuItem("fullpage",{text:"Document properties",cmd:"mceFullPageProperties",context:"file"}),e.on("BeforeSetContent",o),e.on("GetContent",s)}),tinymce.PluginManager.add("fullscreen",function(e){function t(){var e,t,n=window,r=document,i=r.body;return i.offsetWidth&&(e=i.offsetWidth,t=i.offsetHeight),n.innerWidth&&n.innerHeight&&(e=n.innerWidth,t=n.innerHeight),{w:e,h:t}}function n(){function n(){c.setStyle(f,"height",t().h-(u.clientHeight-f.clientHeight))}var d,u,f,m,p=document.body,h=document.documentElement;l=!l,u=e.getContainer(),d=u.style,f=e.getContentAreaContainer().firstChild,m=f.style,l?(r=m.width,i=m.height,m.width=m.height="100%",a=d.width,s=d.height,d.width=d.height="",c.addClass(p,"mce-fullscreen"),c.addClass(h,"mce-fullscreen"),c.addClass(u,"mce-fullscreen"),c.bind(window,"resize",n),n(),o=n):(m.width=r,m.height=i,a&&(d.width=a),s&&(d.height=s),c.removeClass(p,"mce-fullscreen"),c.removeClass(h,"mce-fullscreen"),c.removeClass(u,"mce-fullscreen"),c.unbind(window,"resize",o)),e.fire("FullscreenStateChanged",{state:l})}var r,i,o,a,s,l=!1,c=tinymce.DOM;return e.settings.inline?void 0:(e.on("init",function(){e.addShortcut("Ctrl+Alt+F","",n)}),e.on("remove",function(){o&&c.unbind(window,"resize",o)}),e.addCommand("mceFullScreen",n),e.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Alt+F",selectable:!0,onClick:n,onPostRender:function(){var t=this;e.on("FullscreenStateChanged",function(e){t.active(e.state)})},context:"view"}),e.addButton("fullscreen",{tooltip:"Fullscreen",shortcut:"Ctrl+Alt+F",onClick:n,onPostRender:function(){var t=this;e.on("FullscreenStateChanged",function(e){t.active(e.state)})}}),{isFullscreen:function(){return l}})}),tinymce.PluginManager.add("hr",function(e){e.addCommand("InsertHorizontalRule",function(){e.execCommand("mceInsertContent",!1,"<hr />")}),e.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"}),e.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})}),tinymce.PluginManager.add("image",function(e){function t(e,t){function n(e,n){r.parentNode&&r.parentNode.removeChild(r),t({width:e,height:n})}var r=document.createElement("img");r.onload=function(){n(r.clientWidth,r.clientHeight)},r.onerror=function(){n()};var i=r.style;i.visibility="hidden",i.position="fixed",i.bottom=i.left=0,i.width=i.height="auto",document.body.appendChild(r),r.src=e}function n(e,t,n){function r(e,n){return n=n||[],tinymce.each(e,function(e){var i={text:e.text||e.title};e.menu?i.menu=r(e.menu):(i.value=e.value,t(i)),n.push(i)}),n}return r(e,n||[])}function r(t){return function(){var n=e.settings.image_list;"string"==typeof n?tinymce.util.XHR.send({url:n,success:function(e){t(tinymce.util.JSON.parse(e))}}):"function"==typeof n?n(t):t(n)}}function i(r){function i(){var e,t,n,r;e=c.find("#width")[0],t=c.find("#height")[0],e&&t&&(n=e.value(),r=t.value(),c.find("#constrain")[0].checked()&&d&&u&&n&&r&&(d!=n?(r=Math.round(n/d*r),t.value(r)):(n=Math.round(r/u*n),e.value(n))),d=n,u=r)}function o(){function t(t){function n(){t.onload=t.onerror=null,e.selection&&(e.selection.select(t),e.nodeChanged())}t.onload=function(){p.width||p.height||!v||h.setAttribs(t,{width:t.clientWidth,height:t.clientHeight}),n()},t.onerror=n}l(),i(),p=tinymce.extend(p,c.toJSON()),p.alt||(p.alt=""),""===p.width&&(p.width=null),""===p.height&&(p.height=null),p.style||(p.style=null),p={src:p.src,alt:p.alt,width:p.width,height:p.height,style:p.style,class:p.class},e.undoManager.transact(function(){return p.src?(g?h.setAttribs(g,p):(p.id="__mcenew",e.focus(),e.selection.setContent(h.createHTML("img",p)),g=h.get("__mcenew"),h.setAttrib(g,"id",null)),void t(g)):void(g&&(h.remove(g),e.focus(),e.nodeChanged()))})}function a(e){return e&&(e=e.replace(/px$/,"")),e}function s(n){var r=n.meta||{};f&&f.value(e.convertURL(this.value(),"src")),tinymce.each(r,function(e,t){c.find("#"+t).value(e)}),r.width||r.height||t(this.value(),function(e){e.width&&e.height&&v&&(d=e.width,u=e.height,c.find("#width").value(d),c.find("#height").value(u))})}function l(){function t(e){return e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e}if(e.settings.image_advtab){var n=c.toJSON(),r=h.parseStyle(n.style);delete r.margin,r["margin-top"]=r["margin-bottom"]=t(n.vspace),r["margin-left"]=r["margin-right"]=t(n.hspace),r["border-width"]=t(n.border),c.find("#style").value(h.serializeStyle(h.parseStyle(h.serializeStyle(r))))}}var c,d,u,f,m,p={},h=e.dom,g=e.selection.getNode(),v=e.settings.image_dimensions!==!1;d=h.getAttrib(g,"width"),u=h.getAttrib(g,"height"),"IMG"!=g.nodeName||g.getAttribute("data-mce-object")||g.getAttribute("data-mce-placeholder")?g=null:p={src:h.getAttrib(g,"src"),alt:h.getAttrib(g,"alt"),class:h.getAttrib(g,"class"),width:d,height:u},r&&(f={type:"listbox",label:"Image list",values:n(r,function(t){t.value=e.convertURL(t.value||t.url,"src")},[{text:"None",value:""}]),value:p.src&&e.convertURL(p.src,"src"),onselect:function(e){var t=c.find("#alt");(!t.value()||e.lastControl&&t.value()==e.lastControl.text())&&t.value(e.control.text()),c.find("#src").value(e.control.value()).fire("change")},onPostRender:function(){f=this}}),e.settings.image_class_list&&(m={name:"class",type:"listbox",label:"Class",values:n(e.settings.image_class_list,function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"img",classes:[t.value]})})})});var y=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:s},f];e.settings.image_description!==!1&&y.push({name:"alt",type:"textbox",label:"Image description"}),v&&y.push({type:"container",label:"Dimensions",layout:"flex",direction:"row",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:3,onchange:i,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:3,onchange:i,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}),y.push(m),e.settings.image_advtab?(g&&(p.hspace=a(g.style.marginLeft||g.style.marginRight),p.vspace=a(g.style.marginTop||g.style.marginBottom),p.border=a(g.style.borderWidth),p.style=e.dom.serializeStyle(e.dom.parseStyle(e.dom.getAttrib(g,"style")))),c=e.windowManager.open({title:"Insert/edit image",data:p,bodyType:"tabpanel",body:[{title:"General",type:"form",items:y},{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox"},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,alignH:["left","right"],defaults:{type:"textbox",maxWidth:50,onchange:l},items:[{label:"Vertical space",name:"vspace"},{label:"Horizontal space",name:"hspace"},{label:"Border",name:"border"}]}]}],onSubmit:o})):c=e.windowManager.open({title:"Insert/edit image",data:p,body:y,onSubmit:o})}e.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:r(i),stateSelector:"img:not([data-mce-object],[data-mce-placeholder])"}),e.addMenuItem("image",{icon:"image",text:"Insert image",onclick:r(i),context:"insert",prependToContext:!0}),e.addCommand("mceImage",r(i))}),tinymce.PluginManager.add("importcss",function(e){function t(e){return"string"==typeof e?function(t){return-1!==t.indexOf(e)}:e instanceof RegExp?function(t){return e.test(t)}:e}function n(t,n){function r(e,t){var a,s=e.href;if(s&&n(s,t)){o(e.imports,function(e){r(e,!0)});try{a=e.cssRules||e.rules}catch(e){}o(a,function(e){e.styleSheet?r(e.styleSheet,!0):e.selectorText&&o(e.selectorText.split(","),function(e){i.push(tinymce.trim(e))})})}}var i=[],a={};o(e.contentCSS,function(e){a[e]=!0}),n||(n=function(e,t){return t||a[e]});try{o(t.styleSheets,function(e){r(e)})}catch(e){}return i}function r(t){var n,r=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(t);if(r){var i=r[1],o=r[2].substr(1).split(".").join(" "),a=tinymce.makeMap("a,img");return r[1]?(n={title:t},e.schema.getTextBlockElements()[i]?n.block=i:e.schema.getBlockElements()[i]||a[i.toLowerCase()]?n.selector=i:n.inline=i):r[2]&&(n={inline:"span",title:t.substr(1),classes:o}),e.settings.importcss_merge_classes!==!1?n.classes=o:n.attributes={class:o},n}}var i=this,o=tinymce.each;e.on("renderFormatsMenu",function(a){var s=e.settings,l={},c=s.importcss_selector_converter||r,d=t(s.importcss_selector_filter),u=a.control;e.settings.importcss_append||u.items().remove();var f=[];tinymce.each(s.importcss_groups,function(e){e=tinymce.extend({},e),e.filter=t(e.filter),f.push(e)}),o(n(a.doc||e.getDoc(),t(s.importcss_file_filter)),function(t){if(-1===t.indexOf(".mce-")&&!l[t]&&(!d||d(t))){var n,r=c.call(i,t);if(r){var o=r.name||tinymce.DOM.uniqueId();if(f)for(var a=0;a<f.length;a++)if(!f[a].filter||f[a].filter(t)){f[a].item||(f[a].item={text:f[a].title,menu:[]}),n=f[a].item.menu;break}e.formatter.register(o,r);var s=tinymce.extend({},u.settings.itemDefaults,{text:r.title,format:o});n?n.push(s):u.add(s)}l[t]=!0}}),o(f,function(e){u.add(e.item)}),a.control.renderNew()}),i.convertSelectorToFormat=r}),tinymce.PluginManager.add("insertdatetime",function(e){function t(t,n){function r(e,t){if(e=""+e,e.length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e}return n=n||new Date,t=t.replace("%D","%m/%d/%Y"),t=t.replace("%r","%I:%M:%S %p"),t=t.replace("%Y",""+n.getFullYear()),t=t.replace("%y",""+n.getYear()),t=t.replace("%m",r(n.getMonth()+1,2)),t=t.replace("%d",r(n.getDate(),2)),t=t.replace("%H",""+r(n.getHours(),2)),t=t.replace("%M",""+r(n.getMinutes(),2)),t=t.replace("%S",""+r(n.getSeconds(),2)),t=t.replace("%I",""+((n.getHours()+11)%12+1)),t=t.replace("%p",""+(n.getHours()<12?"AM":"PM")),t=t.replace("%B",""+e.translate(l[n.getMonth()])),t=t.replace("%b",""+e.translate(s[n.getMonth()])),t=t.replace("%A",""+e.translate(a[n.getDay()])),t=t.replace("%a",""+e.translate(o[n.getDay()])),t=t.replace("%%","%")}function n(n){var r=t(n);if(e.settings.insertdatetime_element){var i;i=t(/%[HMSIp]/.test(n)?"%Y-%m-%dT%H:%M":"%Y-%m-%d"),r='<time datetime="'+i+'">'+r+"</time>";var o=e.dom.getParent(e.selection.getStart(),"time");if(o)return void e.dom.setOuterHTML(o,r)}e.insertContent(r)}var r,i,o="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),a="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),s="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),l="January February March April May June July August September October November December".split(" "),c=[];e.addCommand("mceInsertDate",function(){n(e.getParam("insertdatetime_dateformat",e.translate("%Y-%m-%d")))}),e.addCommand("mceInsertTime",function(){n(e.getParam("insertdatetime_timeformat",e.translate("%H:%M:%S")))}),e.addButton("insertdatetime",{type:"splitbutton",title:"Insert date/time",onclick:function(){n(r||i)},menu:c}),tinymce.each(e.settings.insertdatetime_formats||["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"],function(e){i||(i=e),c.push({text:t(e),onclick:function(){r=e,n(e)}})}),e.addMenuItem("insertdatetime",{icon:"date",text:"Insert date/time",menu:c,context:"insert"})}),!function(e){e.on("AddEditor",function(e){e.editor.settings.inline_styles=!1}),e.PluginManager.add("legacyoutput",function(t,n,r){t.on("init",function(){var n="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",r=e.explode(t.settings.font_size_style_values),i=t.schema;t.formatter.register({alignleft:{selector:n,attributes:{align:"left"}},aligncenter:{selector:n,attributes:{align:"center"}},alignright:{selector:n,attributes:{align:"right"}},alignjustify:{selector:n,attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",styles:{textDecoration:"line-through"},exact:!0}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(t){return e.inArray(r,t.value)+1}}},forecolor:{inline:"font",attributes:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}}),e.each("b,i,u,strike".split(","),function(e){i.addValidElements(e+"[*]")}),i.getElementRule("font")||i.addValidElements("font[face|size|color|style]"),e.each(n.split(","),function(e){var t=i.getElementRule(e);t&&(t.attributes.align||(t.attributes.align={},t.attributesOrder.push("align")))})}),t.addButton("fontsizeselect",function(){var e=[],n="8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7",r=t.settings.fontsize_formats||n;return t.$.each(r.split(" "),function(t,n){var r=n,i=n,o=n.split("=");o.length>1&&(r=o[0],i=o[1]),e.push({text:r,value:i})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:e,fixedWidth:!0,onPostRender:function(){var e=this;t.on("NodeChange",function(){var n;n=t.dom.getParent(t.selection.getNode(),"font"),e.value(n?n.size:"")})},onclick:function(e){e.control.settings.value&&t.execCommand("FontSize",!1,e.control.settings.value)}}}),t.addButton("fontselect",function(){function e(e){e=e.replace(/;$/,"").split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e}var n="Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",i=[],o=e(t.settings.font_formats||n);return r.each(o,function(e,t){i.push({text:{raw:t[0]},value:t[1],textStyle:-1==t[1].indexOf("dings")?"font-family:"+t[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:i,fixedWidth:!0,onPostRender:function(){var e=this;t.on("NodeChange",function(){var n;n=t.dom.getParent(t.selection.getNode(),"font"),e.value(n?n.face:"")})},onselect:function(e){e.control.settings.value&&t.execCommand("FontName",!1,e.control.settings.value)}}})})}(tinymce),tinymce.PluginManager.add("link",function(e){function t(t){return function(){var n=e.settings.link_list;"string"==typeof n?tinymce.util.XHR.send({url:n,success:function(e){t(tinymce.util.JSON.parse(e))}}):"function"==typeof n?n(t):t(n)}}function n(e,t,n){function r(e,n){return n=n||[],tinymce.each(e,function(e){var i={text:e.text||e.title};e.menu?i.menu=r(e.menu):(i.value=e.value,t&&t(i)),n.push(i)}),n}return r(e,n||[])}function r(t){function r(e){var t=u.find("#text");(!t.value()||e.lastControl&&t.value()==e.lastControl.text())&&t.value(e.control.text()),u.find("#href").value(e.control.value())}function i(t){var n=[];return tinymce.each(e.dom.select("a:not([href])"),function(e){var r=e.name||e.id;r&&n.push({text:r,value:"#"+r,selected:-1!=t.indexOf("#"+r)})}),n.length?(n.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:n,onselect:r}):void 0}function o(){!d&&0===x.text.length&&f&&this.parent().parent().find("#text")[0].value(this.value())}function a(t){var n=t.meta||{};p&&p.value(e.convertURL(this.value(),"href")),tinymce.each(t.meta,function(e,t){u.find("#"+t).value(e)}),n.text||o.call(this)}function s(e){var t=C.getContent();if(/</.test(t)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(t)||-1==t.indexOf("href=")))return!1;if(e){var n,r=e.childNodes;if(0===r.length)return!1;for(n=r.length-1;n>=0;n--)if(3!=r[n].nodeType)return!1}return!0}var l,c,d,u,f,m,p,h,g,v,y,b,x={},C=e.selection,w=e.dom;l=C.getNode(),c=w.getParent(l,"a[href]"),f=s(),x.text=d=c?c.innerText||c.textContent:C.getContent({format:"text"}),x.href=c?w.getAttrib(c,"href"):"",(b=w.getAttrib(c,"target"))?x.target=b:e.settings.default_link_target&&(x.target=e.settings.default_link_target),(b=w.getAttrib(c,"rel"))&&(x.rel=b),(b=w.getAttrib(c,"class"))&&(x.class=b),(b=w.getAttrib(c,"title"))&&(x.title=b),f&&(m={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){x.text=this.value()}}),t&&(p={type:"listbox",label:"Link list",values:n(t,function(t){t.value=e.convertURL(t.value||t.url,"href")},[{text:"None",value:""}]),onselect:r,value:e.convertURL(x.href,"href"),onPostRender:function(){p=this}}),e.settings.target_list!==!1&&(e.settings.target_list||(e.settings.target_list=[{text:"None",value:""},{text:"New window",value:"_blank"}]),g={name:"target",type:"listbox",label:"Target",values:n(e.settings.target_list)}),e.settings.rel_list&&(h={name:"rel",type:"listbox",label:"Rel",values:n(e.settings.rel_list)}),e.settings.link_class_list&&(v={name:"class",type:"listbox",label:"Class",values:n(e.settings.link_class_list,function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"a",classes:[t.value]})})})}),e.settings.link_title!==!1&&(y={name:"title",type:"textbox",label:"Title",value:x.title}),u=e.windowManager.open({title:"Insert link",data:x,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:a,onkeyup:o},m,y,i(x.href),p,h,g,v],onSubmit:function(t){function n(t,n){var r=e.selection.getRng();window.setTimeout(function(){e.windowManager.confirm(t,function(t){e.selection.setRng(r),n(t)})},0)}function r(){var t={href:i,target:x.target?x.target:null,rel:x.rel?x.rel:null,class:x.class?x.class:null,title:x.title?x.title:null};c?(e.focus(),f&&x.text!=d&&("innerText"in c?c.innerText=x.text:c.textContent=x.text),w.setAttribs(c,t),C.select(c),e.undoManager.add()):f?e.insertContent(w.createHTML("a",t,w.encode(x.text))):e.execCommand("mceInsertLink",!1,t)}var i;return x=tinymce.extend(x,t.data),(i=x.href)?i.indexOf("@")>0&&-1==i.indexOf("//")&&-1==i.indexOf("mailto:")?void n("The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(e){e&&(i="mailto:"+i),r()}):/^\s*www\./i.test(i)?void n("The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(e){e&&(i="http://"+i),r()}):void r():void e.execCommand("unlink")}})}e.addButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Ctrl+K",onclick:t(r),stateSelector:"a[href]"}),e.addButton("unlink",{icon:"unlink",tooltip:"Remove link",cmd:"unlink",stateSelector:"a[href]"}),e.addShortcut("Ctrl+K","",t(r)),e.addCommand("mceLink",t(r)),this.showDialog=r,e.addMenuItem("link",{icon:"link",text:"Insert link",shortcut:"Ctrl+K",onclick:t(r),stateSelector:"a[href]",context:"insert",prependToContext:!0})}),tinymce.PluginManager.add("lists",function(e){function t(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)}function n(e){return e.parentNode.firstChild==e}function r(e){return e.parentNode.lastChild==e}function i(t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]}var o=this;e.on("init",function(){function a(e){function t(t){var r,i,o;i=e[t?"startContainer":"endContainer"],o=e[t?"startOffset":"endOffset"],1==i.nodeType&&(r=C.create("span",{"data-mce-type":"bookmark"}),i.hasChildNodes()?(o=Math.min(o,i.childNodes.length-1),t?i.insertBefore(r,i.childNodes[o]):C.insertAfter(r,i.childNodes[o])):i.appendChild(r),i=r,o=0),n[t?"startContainer":"endContainer"]=i,n[t?"startOffset":"endOffset"]=o}var n={};return t(!0),e.collapsed||t(),n}function s(e){function t(t){function n(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t==e)return n;(1!=t.nodeType||"bookmark"!=t.getAttribute("data-mce-type"))&&n++,t=t.nextSibling}return-1}var r,i,o;r=o=e[t?"startContainer":"endContainer"],i=e[t?"startOffset":"endOffset"],r&&(1==r.nodeType&&(i=n(r),r=r.parentNode,C.remove(o)),e[t?"startContainer":"endContainer"]=r,e[t?"startOffset":"endOffset"]=i)}t(!0),t();var n=C.createRng();n.setStart(e.startContainer,e.startOffset),e.endContainer&&n.setEnd(e.endContainer,e.endOffset),w.setRng(n)}function l(t,n){var r,i,o,a=C.createFragment(),s=e.schema.getBlockElements();if(e.settings.forced_root_block&&(n=n||e.settings.forced_root_block),n&&(i=C.create(n),i.tagName===e.settings.forced_root_block&&C.setAttribs(i,e.settings.forced_root_block_attrs),a.appendChild(i)),t)for(;r=t.firstChild;){var l=r.nodeName;o||"SPAN"==l&&"bookmark"==r.getAttribute("data-mce-type")||(o=!0),s[l]?(a.appendChild(r),i=null):n?(i||(i=C.create(n),a.appendChild(i)),i.appendChild(r)):a.appendChild(r)}return e.settings.forced_root_block?o||tinymce.Env.ie&&!(tinymce.Env.ie>10)||i.appendChild(C.create("br",{"data-mce-bogus":"1"})):a.appendChild(C.create("br")),a}function c(){return tinymce.grep(w.getSelectedBlocks(),function(e){return/^(LI|DT|DD)$/.test(e.nodeName)})}function d(e,t,n){var r,i,o=C.select('span[data-mce-type="bookmark"]',e);n=n||l(t),r=C.createRng(),r.setStartAfter(t),r.setEndAfter(e),i=r.extractContents(),C.isEmpty(i)||C.insertAfter(i,e),C.insertAfter(n,e),C.isEmpty(t.parentNode)&&(tinymce.each(o,function(e){t.parentNode.parentNode.insertBefore(e,t.parentNode)}),C.remove(t.parentNode)),C.remove(t)}function u(e){var n,r;if(n=e.nextSibling,n&&t(n)&&n.nodeName==e.nodeName){for(;r=n.firstChild;)e.appendChild(r);C.remove(n)}if(n=e.previousSibling,n&&t(n)&&n.nodeName==e.nodeName){for(;r=n.firstChild;)e.insertBefore(r,e.firstChild);C.remove(n)}}function f(e){tinymce.each(tinymce.grep(C.select("ol,ul",e)),function(e){var n,r=e.parentNode;"LI"==r.nodeName&&r.firstChild==e&&(n=r.previousSibling,n&&"LI"==n.nodeName&&(n.appendChild(e),C.isEmpty(r)&&C.remove(r))),t(r)&&(n=r.previousSibling,n&&"LI"==n.nodeName&&n.appendChild(e))})}function m(e){function i(e){C.isEmpty(e)&&C.remove(e)}var o,a=e.parentNode,s=a.parentNode;return"DD"==e.nodeName?(C.rename(e,"DT"),!0):n(e)&&r(e)?("LI"==s.nodeName?(C.insertAfter(e,s),i(s),C.remove(a)):t(s)?C.remove(a,!0):(s.insertBefore(l(e),a),C.remove(a)),!0):n(e)?("LI"==s.nodeName?(C.insertAfter(e,s),e.appendChild(a),i(s)):t(s)?s.insertBefore(e,a):(s.insertBefore(l(e),a),C.remove(e)),!0):r(e)?("LI"==s.nodeName?C.insertAfter(e,s):t(s)?C.insertAfter(e,a):(C.insertAfter(l(e),a),C.remove(e)),!0):("LI"==s.nodeName?(a=s,o=l(e,"LI")):o=t(s)?l(e,"LI"):l(e),d(a,e,o),f(a.parentNode),!0)}function p(e){function n(n,r){var i;if(t(n)){for(;i=e.lastChild.firstChild;)r.appendChild(i);C.remove(n)}}var r,i;return"DT"==e.nodeName?(C.rename(e,"DD"),!0):(r=e.previousSibling,r&&t(r)?(r.appendChild(e),!0):r&&"LI"==r.nodeName&&t(r.lastChild)?(r.lastChild.appendChild(e),n(e.lastChild,r.lastChild),!0):(r=e.nextSibling,r&&t(r)?(r.insertBefore(e,r.firstChild),!0):(!r||"LI"!=r.nodeName||!t(e.lastChild))&&(r=e.previousSibling,!(!r||"LI"!=r.nodeName)&&(i=C.create(e.parentNode.nodeName),r.appendChild(i),i.appendChild(e),n(e.lastChild,i),!0))))}function h(){var t=c();if(t.length){for(var n=a(w.getRng(!0)),r=0;r<t.length&&(p(t[r])||0!==r);r++);return s(n),e.nodeChanged(),!0}}function g(){var t=c();if(t.length){var n,r,i=a(w.getRng(!0)),o=e.getBody();for(n=t.length;n--;)for(var l=t[n].parentNode;l&&l!=o;){for(r=t.length;r--;)if(t[r]===l){t.splice(n,1);break}l=l.parentNode}for(n=0;n<t.length&&(m(t[n])||0!==n);n++);return s(i),e.nodeChanged(),!0}}function v(n){function r(){function t(e){var t,n;for(t=o[e?"startContainer":"endContainer"],n=o[e?"startOffset":"endOffset"],1==t.nodeType&&(t=t.childNodes[Math.min(n,t.childNodes.length-1)]||t);t.parentNode!=a;){if(i(t))return t;if(/^(TD|TH)$/.test(t.parentNode.nodeName))return t;t=t.parentNode}return t}for(var n,r=[],a=e.getBody(),s=t(!0),l=t(),c=[],d=s;d&&(c.push(d),d!=l);d=d.nextSibling);return tinymce.each(c,function(e){if(i(e))return r.push(e),void(n=null);if(C.isBlock(e)||"BR"==e.nodeName)return"BR"==e.nodeName&&C.remove(e),void(n=null);var t=e.nextSibling;return tinymce.dom.BookmarkManager.isBookmarkNode(e)&&(i(t)||!t&&e.parentNode==a)?void(n=null):(n||(n=C.create("p"),e.parentNode.insertBefore(n,e),r.push(n)),void n.appendChild(e))}),r}var o=w.getRng(!0),l=a(o),c="LI";n=n.toUpperCase(),"DL"==n&&(c="DT"),tinymce.each(r(),function(e){var r,i;i=e.previousSibling,i&&t(i)&&i.nodeName==n?(r=i,e=C.rename(e,c),i.appendChild(e)):(r=C.create(n),e.parentNode.insertBefore(r,e),r.appendChild(e),e=C.rename(e,c)),u(r)}),s(l)}function y(){var n=a(w.getRng(!0)),r=e.getBody();tinymce.each(c(),function(e){var n,i;if(C.isEmpty(e))return void m(e);for(n=e;n&&n!=r;n=n.parentNode)t(n)&&(i=n);d(i,e)}),s(n)}function b(e){var t=C.getParent(w.getStart(),"OL,UL,DL");if(t)if(t.nodeName==e)y(e);else{var n=a(w.getRng(!0));u(C.rename(t,e)),s(n)}else v(e)}function x(t){return function(){var n=C.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName==t}}var C=e.dom,w=e.selection;o.backspaceDelete=function(e){function n(e,t){var n=e.startContainer,r=e.startOffset;if(3==n.nodeType&&(t?r<n.data.length:r>0))return n;for(var i=new tinymce.dom.TreeWalker(e.startContainer);n=i[t?"next":"prev"]();)if(3==n.nodeType&&n.data.length>0)return n}function r(e,n){var r,i,o=e.parentNode;for(t(n.lastChild)&&(i=n.lastChild),r=n.lastChild,r&&"BR"==r.nodeName&&e.hasChildNodes()&&C.remove(r);r=e.firstChild;)n.appendChild(r);i&&n.appendChild(i),C.remove(e),C.isEmpty(o)&&C.remove(o)}if(w.isCollapsed()){var i=C.getParent(w.getStart(),"LI");if(i){var o=w.getRng(!0),l=C.getParent(n(o,e),"LI");if(l&&l!=i){var c=a(o);return e?r(l,i):r(i,l),s(c),!0}if(!l&&!e&&y(i.parentNode.nodeName))return!0}}},e.addCommand("Indent",function(){return!h()||void 0}),e.addCommand("Outdent",function(){return!g()||void 0}),e.addCommand("InsertUnorderedList",function(){b("UL")}),e.addCommand("InsertOrderedList",function(){b("OL")}),e.addCommand("InsertDefinitionList",function(){b("DL")}),e.addQueryStateHandler("InsertUnorderedList",x("UL")),e.addQueryStateHandler("InsertOrderedList",x("OL")),e.addQueryStateHandler("InsertDefinitionList",x("DL")),e.on("keydown",function(t){9==t.keyCode&&e.dom.getParent(e.selection.getStart(),"LI,DT,DD")&&(t.preventDefault(),t.shiftKey?g():h())})}),e.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(){var t=this;e.on("nodechange",function(){for(var r=e.selection.getSelectedBlocks(),i=!1,o=0,a=r.length;!i&&a>o;o++){var s=r[o].nodeName;i="LI"==s&&n(r[o])||"UL"==s||"OL"==s||"DD"==s}t.disabled(i)})}}),e.on("keydown",function(e){
e.keyCode==tinymce.util.VK.BACKSPACE?o.backspaceDelete()&&e.preventDefault():e.keyCode==tinymce.util.VK.DELETE&&o.backspaceDelete(!0)&&e.preventDefault()})}),tinymce.PluginManager.add("media",function(e,t){function n(e){return-1!=e.indexOf(".mp3")?"audio/mpeg":-1!=e.indexOf(".wav")?"audio/wav":-1!=e.indexOf(".mp4")?"video/mp4":-1!=e.indexOf(".webm")?"video/webm":-1!=e.indexOf(".ogg")?"video/ogg":-1!=e.indexOf(".swf")?"application/x-shockwave-flash":""}function r(t){var n=e.settings.media_scripts;if(n)for(var r=0;r<n.length;r++)if(-1!==t.indexOf(n[r].filter))return n[r]}function i(){function t(e){var t,n,o,a;t=r.find("#width")[0],n=r.find("#height")[0],o=t.value(),a=n.value(),r.find("#constrain")[0].checked()&&i&&c&&o&&a&&(e.control==t?(a=Math.round(o/i*a),n.value(a)):(o=Math.round(a/c*o),t.value(o))),i=o,c=a}function n(){d=s(this.value()),this.parent().parent().fromJSON(d)}var r,i,c,d,f=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onchange:function(e){tinymce.each(e.meta,function(e,t){r.find("#"+t).value(e)})}}];e.settings.media_alt_source!==!1&&f.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),e.settings.media_poster!==!1&&f.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),e.settings.media_dimensions!==!1&&f.push({type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:3,size:3,onchange:t},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:3,size:3,onchange:t},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}),d=l(e.selection.getNode()),i=d.width,c=d.height;var m={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:o(),multiline:!0,label:"Source"};m[u]=n,r=e.windowManager.open({title:"Insert/edit video",data:d,bodyType:"tabpanel",body:[{title:"General",type:"form",onShowTab:function(){d=s(this.next().find("#embed").value()),this.fromJSON(d)},items:f},{title:"Embed",type:"panel",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,onShowTab:function(){this.find("#embed").value(a(this.parent().toJSON()))},items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},m]}],onSubmit:function(){var t,n,r,i;for(t=e.dom.select("img[data-mce-object]"),e.insertContent(a(this.toJSON())),n=e.dom.select("img[data-mce-object]"),r=0;r<t.length;r++)for(i=n.length-1;i>=0;i--)t[r]==n[i]&&n.splice(i,1);e.selection.select(n[0]),e.nodeChanged()}})}function o(){var t=e.selection.getNode();return t.getAttribute("data-mce-object")?e.selection.getContent():void 0}function a(i){var o="";if(!i.source1&&(tinymce.extend(i,s(i.embed)),!i.source1))return"";if(i.source2||(i.source2=""),i.poster||(i.poster=""),i.source1=e.convertURL(i.source1,"source"),i.source2=e.convertURL(i.source2,"source"),i.source1mime=n(i.source1),i.source2mime=n(i.source2),i.poster=e.convertURL(i.poster,"poster"),i.flashPlayerUrl=e.convertURL(t+"/moxieplayer.swf","movie"),tinymce.each(d,function(e){var t,n,r;if(t=e.regex.exec(i.source1)){for(r=e.url,n=0;t[n];n++)r=r.replace("$"+n,function(){return t[n]});i.source1=r,i.type=e.type,i.width=i.width||e.w,i.height=i.height||e.h}}),i.embed)o=c(i.embed,i,!0);else{var a=r(i.source1);a&&(i.type="script",i.width=a.width,i.height=a.height),i.width=i.width||300,i.height=i.height||150,tinymce.each(i,function(t,n){i[n]=e.dom.encode(t)}),"iframe"==i.type?o+='<iframe src="'+i.source1+'" width="'+i.width+'" height="'+i.height+'"></iframe>':"application/x-shockwave-flash"==i.source1mime?(o+='<object data="'+i.source1+'" width="'+i.width+'" height="'+i.height+'" type="application/x-shockwave-flash">',i.poster&&(o+='<img src="'+i.poster+'" width="'+i.width+'" height="'+i.height+'" />'),o+="</object>"):-1!=i.source1mime.indexOf("audio")?e.settings.audio_template_callback?o=e.settings.audio_template_callback(i):o+='<audio controls="controls" src="'+i.source1+'">'+(i.source2?'\n<source src="'+i.source2+'"'+(i.source2mime?' type="'+i.source2mime+'"':"")+" />\n":"")+"</audio>":"script"==i.type?o+='<script src="'+i.source1+'"></script>':o=e.settings.video_template_callback?e.settings.video_template_callback(i):'<video width="'+i.width+'" height="'+i.height+'"'+(i.poster?' poster="'+i.poster+'"':"")+' controls="controls">\n<source src="'+i.source1+'"'+(i.source1mime?' type="'+i.source1mime+'"':"")+" />\n"+(i.source2?'<source src="'+i.source2+'"'+(i.source2mime?' type="'+i.source2mime+'"':"")+" />\n":"")+"</video>"}return o}function s(e){var t={};return new tinymce.html.SaxParser({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(e,n){if(t.source1||"param"!=e||(t.source1=n.map.movie),("iframe"==e||"object"==e||"embed"==e||"video"==e||"audio"==e)&&(t.type||(t.type=e),t=tinymce.extend(n.map,t)),"script"==e){var i=r(n.map.src);if(!i)return;t={type:"script",source1:n.map.src,width:i.width,height:i.height}}"source"==e&&(t.source1?t.source2||(t.source2=n.map.src):t.source1=n.map.src),"img"!=e||t.poster||(t.poster=n.map.src)}}).parse(e),t.source1=t.source1||t.src||t.data,t.source2=t.source2||"",t.poster=t.poster||"",t}function l(t){return t.getAttribute("data-mce-object")?s(e.serializer.serialize(t,{selection:!0})):{}}function c(e,t,n){function r(e,t){var n,r,i,o;for(n in t)if(i=""+t[n],e.map[n])for(r=e.length;r--;)o=e[r],o.name==n&&(i?(e.map[n]=i,o.value=i):(delete e.map[n],e.splice(r,1)));else i&&(e.push({name:n,value:i}),e.map[n]=i)}var i,o=new tinymce.html.Writer,a=0;return new tinymce.html.SaxParser({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(e){o.comment(e)},cdata:function(e){o.cdata(e)},text:function(e,t){o.text(e,t)},start:function(e,s,l){switch(e){case"video":case"object":case"embed":case"img":case"iframe":r(s,{width:t.width,height:t.height})}if(n)switch(e){case"video":r(s,{poster:t.poster,src:""}),t.source2&&r(s,{src:""});break;case"iframe":r(s,{src:t.source1});break;case"source":if(a++,2>=a&&(r(s,{src:t["source"+a],type:t["source"+a+"mime"]}),!t["source"+a]))return;break;case"img":if(!t.poster)return;i=!0}o.start(e,s,l)},end:function(e){if("video"==e&&n)for(var s=1;2>=s;s++)if(t["source"+s]){var l=[];l.map={},s>a&&(r(l,{src:t["source"+s],type:t["source"+s+"mime"]}),o.start("source",l,!0))}if(t.poster&&"object"==e&&n&&!i){var c=[];c.map={},r(c,{src:t.poster,width:t.width,height:t.height}),o.start("img",c,!0)}o.end(e)}},new tinymce.html.Schema({})).parse(e),o.getContent()}var d=[{regex:/youtu\.be\/([\w\-.]+)/,type:"iframe",w:425,h:350,url:"//www.youtube.com/embed/$1"},{regex:/youtube\.com(.+)v=([^&]+)/,type:"iframe",w:425,h:350,url:"//www.youtube.com/embed/$2"},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc"},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"'}],u=tinymce.Env.ie&&tinymce.Env.ie<=8?"onChange":"onInput";e.on("ResolveName",function(e){var t;1==e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)}),e.on("preInit",function(){var t=e.schema.getSpecialElements();tinymce.each("video audio iframe object".split(" "),function(e){t[e]=new RegExp("</"+e+"[^>]*>","gi")});var n=e.schema.getBoolAttrs();tinymce.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){n[e]={}}),e.parser.addNodeFilter("iframe,video,audio,object,embed,script",function(t,n){for(var i,o,a,s,l,c,d,u,f=t.length;f--;)if(o=t[f],o.parent&&("script"!=o.name||(u=r(o.attr("src"))))){for(a=new tinymce.html.Node("img",1),a.shortEnded=!0,u&&(u.width&&o.attr("width",u.width.toString()),u.height&&o.attr("height",u.height.toString())),c=o.attributes,i=c.length;i--;)s=c[i].name,l=c[i].value,"width"!==s&&"height"!==s&&"style"!==s&&(("data"==s||"src"==s)&&(l=e.convertURL(l,s)),a.attr("data-mce-p-"+s,l));d=o.firstChild&&o.firstChild.value,d&&(a.attr("data-mce-html",escape(d)),a.firstChild=null),a.attr({width:o.attr("width")||"300",height:o.attr("height")||("audio"==n?"30":"150"),style:o.attr("style"),src:tinymce.Env.transparentSrc,"data-mce-object":n,class:"mce-object mce-object-"+n}),o.replace(a)}}),e.serializer.addAttributeFilter("data-mce-object",function(e,t){for(var n,r,i,o,a,s,l,c=e.length;c--;)if(n=e[c],n.parent){for(l=n.attr(t),r=new tinymce.html.Node(l,1),"audio"!=l&&"script"!=l&&r.attr({width:n.attr("width"),height:n.attr("height")}),r.attr({style:n.attr("style")}),o=n.attributes,i=o.length;i--;){var d=o[i].name;0===d.indexOf("data-mce-p-")&&r.attr(d.substr(11),o[i].value)}"script"==l&&r.attr("type","text/javascript"),a=n.attr("data-mce-html"),a&&(s=new tinymce.html.Node("#text",3),s.raw=!0,s.value=unescape(a),r.append(s)),n.replace(r)}})}),e.on("ObjectSelected",function(e){var t=e.target.getAttribute("data-mce-object");("audio"==t||"script"==t)&&e.preventDefault()}),e.on("objectResized",function(e){var t,n=e.target;n.getAttribute("data-mce-object")&&(t=n.getAttribute("data-mce-html"),t&&(t=unescape(t),n.setAttribute("data-mce-html",escape(c(t,{width:e.width,height:e.height})))))}),e.addButton("media",{tooltip:"Insert/edit video",onclick:i,stateSelector:["img[data-mce-object=video]","img[data-mce-object=iframe]"]}),e.addMenuItem("media",{icon:"media",text:"Insert video",onclick:i,context:"insert",prependToContext:!0})}),tinymce.PluginManager.add("nonbreaking",function(e){var t=e.getParam("nonbreaking_force_tab");if(e.addCommand("mceNonBreaking",function(){e.insertContent(e.plugins.visualchars&&e.plugins.visualchars.state?'<span class="mce-nbsp">&nbsp;</span>':"&nbsp;"),e.dom.setAttrib(e.dom.select("span.mce-nbsp"),"data-mce-bogus","1")}),e.addButton("nonbreaking",{title:"Insert nonbreaking space",cmd:"mceNonBreaking"}),e.addMenuItem("nonbreaking",{text:"Nonbreaking space",cmd:"mceNonBreaking",context:"insert"}),t){var n=+t>1?+t:3;e.on("keydown",function(t){if(9==t.keyCode){if(t.shiftKey)return;t.preventDefault();for(var r=0;n>r;r++)e.execCommand("mceNonBreaking")}})}}),tinymce.PluginManager.add("noneditable",function(e){function t(e){var t;if(1===e.nodeType){if(t=e.getAttribute(d),t&&"inherit"!==t)return t;if(t=e.contentEditable,"inherit"!==t)return t}return null}function n(e){for(var n;e;){if(n=t(e))return"false"===n?e:null;e=e.parentNode}}function r(){function r(e){for(;e;){if(e.id===m)return e;e=e.parentNode}}function i(e){var t;if(e)for(t=new l(e,e),e=t.current();e;e=t.next())if(3===e.nodeType)return e}function o(n,r){var i,o;return"false"===t(n)&&d.isBlock(n)?void f.select(n):(o=d.createRng(),"true"===t(n)&&(n.firstChild||n.appendChild(e.getDoc().createTextNode(" ")),n=n.firstChild,r=!0),i=d.create("span",{id:m,"data-mce-bogus":!0},p),r?n.parentNode.insertBefore(i,n):d.insertAfter(i,n),o.setStart(i.firstChild,1),o.collapse(!0),f.setRng(o),i)}function a(e){var t,n,o,a;if(e)t=f.getRng(!0),t.setStartBefore(e),t.setEndBefore(e),n=i(e),n&&n.nodeValue.charAt(0)==p&&(n=n.deleteData(0,1)),d.remove(e,!0),f.setRng(t);else for(o=r(f.getStart());(e=d.get(m))&&e!==a;)o!==e&&(n=i(e),n&&n.nodeValue.charAt(0)==p&&(n=n.deleteData(0,1)),d.remove(e,!0)),a=e}function s(){function e(e,n){var r,i,o,a,s;if(r=c.startContainer,i=c.startOffset,3==r.nodeType){if(s=r.nodeValue.length,i>0&&s>i||(n?i==s:0===i))return}else{if(!(i<r.childNodes.length))return n?null:e;var d=!n&&i>0?i-1:i;r=r.childNodes[d],r.hasChildNodes()&&(r=r.firstChild)}for(o=new l(r,e);a=o[n?"prev":"next"]();){if(3===a.nodeType&&a.nodeValue.length>0)return;if("true"===t(a))return a}return e}var r,i,s,c,d;a(),s=f.isCollapsed(),r=n(f.getStart()),i=n(f.getEnd()),(r||i)&&(c=f.getRng(!0),s?(r=r||i,(d=e(r,!0))?o(d,!0):(d=e(r,!1))?o(d,!1):f.select(r)):(c=f.getRng(!0),r&&c.setStartBefore(r),i&&c.setEndAfter(i),f.setRng(c)))}function c(i){function o(e,t){for(;e=e[t?"previousSibling":"nextSibling"];)if(3!==e.nodeType||e.nodeValue.length>0)return e}function c(e,t){f.select(e),f.collapse(t)}function m(i){function o(e){for(var t=c;t;){if(t===e)return;t=t.parentNode}d.remove(e),s()}function a(){var r,a,s=e.schema.getNonEmptyElements();for(a=new tinymce.dom.TreeWalker(c,e.getBody());(r=i?a.prev():a.next())&&!s[r.nodeName.toLowerCase()]&&!(3===r.nodeType&&tinymce.trim(r.nodeValue).length>0);)if("false"===t(r))return o(r),!0;return!!n(r)}var l,c,u,m;if(f.isCollapsed()){if(l=f.getRng(!0),c=l.startContainer,u=l.startOffset,c=r(c)||c,m=n(c))return o(m),!1;if(3==c.nodeType&&(i?u>0:u<c.nodeValue.length))return!0;if(1==c.nodeType&&(c=c.childNodes[u]||c),a())return!1}return!0}var p,h,g,v,y=i.keyCode;if(g=f.getStart(),v=f.getEnd(),p=n(g)||n(v),p&&(112>y||y>124)&&y!=u.DELETE&&y!=u.BACKSPACE){if((tinymce.isMac?i.metaKey:i.ctrlKey)&&(67==y||88==y||86==y))return;if(i.preventDefault(),y==u.LEFT||y==u.RIGHT){var b=y==u.LEFT;if(e.dom.isBlock(p)){var x=b?p.previousSibling:p.nextSibling,C=new l(x,x),w=b?C.prev():C.next();c(w,!b)}else c(p,b)}}else if(y==u.LEFT||y==u.RIGHT||y==u.BACKSPACE||y==u.DELETE){if(h=r(g)){if(y==u.LEFT||y==u.BACKSPACE)if(p=o(h,!0),p&&"false"===t(p)){if(i.preventDefault(),y!=u.LEFT)return void d.remove(p);c(p,!0)}else a(h);if(y==u.RIGHT||y==u.DELETE)if(p=o(h),p&&"false"===t(p)){if(i.preventDefault(),y!=u.RIGHT)return void d.remove(p);c(p,!1)}else a(h)}if((y==u.BACKSPACE||y==u.DELETE)&&!m(y==u.BACKSPACE))return i.preventDefault(),!1}}var d=e.dom,f=e.selection,m="mce_noneditablecaret",p="\ufeff";e.on("mousedown",function(n){var r=e.selection.getNode();"false"===t(r)&&r==n.target&&s()}),e.on("mouseup keyup",s),e.on("keydown",c)}function i(t){var n=s.length,r=t.content,i=tinymce.trim(a);if("raw"!=t.format){for(;n--;)r=r.replace(s[n],function(t){var n=arguments,o=n[n.length-2];return o>0&&'"'==r.charAt(o-1)?t:'<span class="'+i+'" data-mce-content="'+e.dom.encode(n[0])+'">'+e.dom.encode("string"==typeof n[1]?n[1]:n[0])+"</span>"});t.content=r}}var o,a,s,l=tinymce.dom.TreeWalker,c="contenteditable",d="data-mce-"+c,u=tinymce.util.VK;o=" "+tinymce.trim(e.getParam("noneditable_editable_class","mceEditable"))+" ",a=" "+tinymce.trim(e.getParam("noneditable_noneditable_class","mceNonEditable"))+" ",s=e.getParam("noneditable_regexp"),s&&!s.length&&(s=[s]),e.on("PreInit",function(){r(),s&&e.on("BeforeSetContent",i),e.parser.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)n=e[r],t=" "+n.attr("class")+" ",-1!==t.indexOf(o)?n.attr(d,"true"):-1!==t.indexOf(a)&&n.attr(d,"false")}),e.serializer.addAttributeFilter(d,function(e){for(var t,n=e.length;n--;)t=e[n],s&&t.attr("data-mce-content")?(t.name="#text",t.type=3,t.raw=!0,t.value=t.attr("data-mce-content")):(t.attr(c,null),t.attr(d,null))}),e.parser.addAttributeFilter(c,function(e){for(var t,n=e.length;n--;)t=e[n],t.attr(d,t.attr(c)),t.attr(c,null)})}),e.on("drop",function(e){n(e.target)&&e.preventDefault()})}),tinymce.PluginManager.add("pagebreak",function(e){var t="mce-pagebreak",n=e.getParam("pagebreak_separator","<!-- pagebreak -->"),r=new RegExp(n.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(e){return"\\"+e}),"gi"),i='<img src="'+tinymce.Env.transparentSrc+'" class="'+t+'" data-mce-resize="false" />';e.addCommand("mcePageBreak",function(){e.insertContent(e.settings.pagebreak_split_block?"<p>"+i+"</p>":i)}),e.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"}),e.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"}),e.on("ResolveName",function(n){"IMG"==n.target.nodeName&&e.dom.hasClass(n.target,t)&&(n.name="pagebreak")}),e.on("click",function(n){n=n.target,"IMG"===n.nodeName&&e.dom.hasClass(n,t)&&e.selection.select(n)}),e.on("BeforeSetContent",function(e){e.content=e.content.replace(r,i)}),e.on("PreInit",function(){e.serializer.addNodeFilter("img",function(t){for(var r,i,o=t.length;o--;)if(r=t[o],i=r.attr("class"),i&&-1!==i.indexOf("mce-pagebreak")){var a=r.parent;if(e.schema.getBlockElements()[a.name]&&e.settings.pagebreak_split_block){a.type=3,a.value=n,a.raw=!0,r.remove();continue}r.type=3,r.value=n,r.raw=!0}})})}),!function(e,t){"use strict";function n(e,t){for(var n,r=[],o=0;o<e.length;++o){if(n=a[e[o]]||i(e[o]),!n)throw"module definition dependecy not found: "+e[o];r.push(n)}t.apply(null,r)}function r(e,r,i){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(i===t)throw"invalid module definition, definition function must be specified";n(r,function(){a[e]=i.apply(null,arguments)})}function i(t){for(var n=e,r=t.split(/[.\/]/),i=0;i<r.length;++i){if(!n[r[i]])return;n=n[r[i]]}return n}function o(n){for(var r=0;r<n.length;r++){for(var i=e,o=n[r],s=o.split(/[.\/]/),l=0;l<s.length-1;++l)i[s[l]]===t&&(i[s[l]]={}),i=i[s[l]];i[s[s.length-1]]=a[o]}}var a={},s="tinymce/pasteplugin/Utils",l="tinymce/util/Tools",c="tinymce/html/DomParser",d="tinymce/html/Schema",u="tinymce/pasteplugin/Clipboard",f="tinymce/Env",m="tinymce/util/VK",p="tinymce/pasteplugin/WordFilter",h="tinymce/html/Serializer",g="tinymce/html/Node",v="tinymce/pasteplugin/Quirks",y="tinymce/pasteplugin/Plugin",b="tinymce/PluginManager";r(s,[l,c,d],function(e,t,n){function r(t,n){return e.each(n,function(e){t=e.constructor==RegExp?t.replace(e,""):t.replace(e[0],e[1])}),t}function i(r){function i(e){var t=e.name,n=e;if("br"===t)return void(s+="\n");if(l[t]&&(s+=" "),c[t])return void(s+=" ");if(3==e.type&&(s+=e.value),!e.shortEnded&&(e=e.firstChild))do i(e);while(e=e.next);d[t]&&n.next&&(s+="\n","p"==t&&(s+="\n"))}var o=new n,a=new t({},o),s="",l=o.getShortEndedElements(),c=e.makeMap("script noscript style textarea video audio iframe object"," "),d=o.getBlockElements();return i(a.parse(r)),s}function o(e){function t(e,t,n){return t||n?" ":" "}return e=r(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,t],/<br>$/i])}return{filter:r,innerText:i,trimHtml:o}}),r(u,[f,m,s],function(e,t,n){return function(r){function i(e){var t,n=r.dom;if(t=r.fire("BeforePastePreProcess",{content:e}),t=r.fire("PastePreProcess",t),e=t.content,!t.isDefaultPrevented()){if(r.hasEventListeners("PastePostProcess")&&!t.isDefaultPrevented()){var i=n.add(r.getBody(),"div",{style:"display:none"},e);t=r.fire("PastePostProcess",{node:i}),n.remove(i),e=t.node.innerHTML}t.isDefaultPrevented()||r.insertContent(e,{merge:r.settings.paste_merge_formats!==!1})}}function o(e){e=r.dom.encode(e).replace(/\r\n/g,"\n");var t,o=r.dom.getParent(r.selection.getStart(),r.dom.isBlock),a=r.settings.forced_root_block;a&&(t=r.dom.createHTML(a,r.settings.forced_root_block_attrs),t=t.substr(0,t.length-3)+">"),o&&/^(PRE|DIV)$/.test(o.nodeName)||!a?e=n.filter(e,[[/\n/g,"<br>"]]):(e=n.filter(e,[[/\n\n/g,"</p>"+t],[/^(.*<\/p>)(<p>)$/,t+"$1"],[/\n/g,"<br />"]]),-1!=e.indexOf("<p>")&&(e=t+e)),i(e)}function a(){var t,n=r.dom,i=r.getBody(),o=r.dom.getViewPort(r.getWin()),a=o.y,s=20;if(y=r.selection.getRng(),r.inline&&(t=r.selection.getScrollContainer(),t&&t.scrollTop>0&&(a=t.scrollTop)),y.getClientRects){var l=y.getClientRects();if(l.length)s=a+(l[0].top-n.getPos(i).y);else{s=a;var c=y.startContainer;c&&(3==c.nodeType&&c.parentNode!=i&&(c=c.parentNode),1==c.nodeType&&(s=n.getPos(c,t||i).y))}}v=n.add(r.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+s+"px;width: 10px; height: 10px; overflow: hidden; opacity: 0"},w),(e.ie||e.gecko)&&n.setStyle(v,"left","rtl"==n.getStyle(i,"direction",!0)?65535:-65535),n.bind(v,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),v.focus(),r.selection.select(v,!0)}function s(){if(v){for(var e;e=r.dom.get("mcepastebin");)r.dom.remove(e),r.dom.unbind(e);y&&r.selection.setRng(y)}v=y=null}function l(){var e,t,n,i,o="";for(e=r.dom.select("div[id=mcepastebin]"),t=0;t<e.length;t++)n=e[t],n.firstChild&&"mcepastebin"==n.firstChild.id&&(n=n.firstChild),i=n.innerHTML,o!=w&&(o+=i);return o}function c(e){var t={};if(e&&e.types){var n=e.getData("Text");n&&n.length>0&&(t["text/plain"]=n);for(var r=0;r<e.types.length;r++){var i=e.types[r];t[i]=e.getData(i)}}return t}function d(e){return c(e.clipboardData||r.getDoc().dataTransfer)}function u(e,t){function n(n){function o(){t&&(r.selection.setRng(t),t=null),i('<img src="'+l.result+'">')}var a,s,l;if(n)for(a=0;a<n.length;a++)if(s=n[a],/^image\/(jpeg|png|gif)$/.test(s.type))return l=new FileReader,l.onload=o,l.readAsDataURL(s.getAsFile?s.getAsFile():s),e.preventDefault(),!0}var o=e.clipboardData||e.dataTransfer;return r.settings.paste_data_images&&o?n(o.items)||n(o.files):void 0}function f(e){var t=e.clipboardData;return-1!=navigator.userAgent.indexOf("Android")&&t&&t.items&&0===t.items.length}function m(e){var t,n,i=r.getDoc();if(i.caretPositionFromPoint)n=i.caretPositionFromPoint(e.clientX,e.clientY),t=i.createRange(),t.setStart(n.offsetNode,n.offset),t.collapse(!0);else if(i.caretRangeFromPoint)t=i.caretRangeFromPoint(e.clientX,e.clientY);else if(i.body.createTextRange){t=i.body.createTextRange();try{t.moveToPoint(e.clientX,e.clientY),t.collapse(!0)}catch(n){t.collapse(e.clientY<i.body.clientHeight)}}return t}function p(e,t){return t in e&&e[t].length>0}function h(e){return t.metaKeyPressed(e)&&86==e.keyCode||e.shiftKey&&45==e.keyCode}function g(){r.on("keydown",function(t){function n(e){h(e)&&!e.isDefaultPrevented()&&s()}if(h(t)&&!t.isDefaultPrevented()){if(b=t.shiftKey&&86==t.keyCode,b&&e.webkit&&-1!=navigator.userAgent.indexOf("Version/"))return;if(t.stopImmediatePropagation(),C=(new Date).getTime(),e.ie&&b)return t.preventDefault(),void r.fire("paste",{ieFake:!0});s(),a(),r.once("keyup",n),r.once("paste",function(){r.off("keyup",n)})}}),r.on("paste",function(t){var c=d(t),m=(new Date).getTime()-C<1e3,h="text"==x.pasteFormat||b;return b=!1,t.isDefaultPrevented()||f(t)?void s():u(t)?void s():(m||t.preventDefault(),!e.ie||m&&!t.ieFake||(a(),r.dom.bind(v,"paste",function(e){e.stopPropagation()}),r.getDoc().execCommand("Paste",!1,null),c["text/html"]=l()),void setTimeout(function(){var e;return p(c,"text/html")?e=c["text/html"]:(e=l(),e==w&&(h=!0)),e=n.trimHtml(e),v&&v.firstChild&&"mcepastebin"===v.firstChild.id&&(h=!0),s(),h&&(e=p(c,"text/plain")&&-1==e.indexOf("</p>")?c["text/plain"]:n.innerText(e)),e==w?void(m||r.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")):void(h?o(e):i(e))},0))}),r.on("dragstart",function(e){if(e.dataTransfer.types)try{e.dataTransfer.setData("mce-internal",r.selection.getContent())}catch(e){}}),r.on("drop",function(e){var t=m(e);if(!e.isDefaultPrevented()&&!u(e,t)&&t){var n=c(e.dataTransfer),a=n["mce-internal"]||n["text/html"]||n["text/plain"];a&&(e.preventDefault(),r.undoManager.transact(function(){n["mce-internal"]&&r.execCommand("Delete"),r.selection.setRng(t),n["text/html"]?i(a):o(a)}))}}),r.on("dragover dragend",function(e){var t,n=e.dataTransfer;if(r.settings.paste_data_images&&n)for(t=0;t<n.types.length;t++)if("Files"==n.types[t])return e.preventDefault(),!1})}var v,y,b,x=this,C=0,w="%MCEPASTEBIN%";x.pasteHtml=i,x.pasteText=o,r.on("preInit",function(){g(),r.parser.addNodeFilter("img",function(t){if(!r.settings.paste_data_images)for(var n=t.length;n--;){var i=t[n].attributes.map.src;i&&/^(data:image|webkit\-fake\-url)/.test(i)&&(t[n].attr("data-mce-object")||i===e.transparentSrc||t[n].remove())}})})}}),r(p,[l,c,d,h,g,s],function(e,t,n,r,i,o){function a(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}function s(s){var l=s.settings;s.on("BeforePastePreProcess",function(c){function d(e){function t(e){var n="";if(3===e.type)return e.value;if(e=e.firstChild)do n+=t(e);while(e=e.next);return n}function n(e,t){if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do if(!n(e,t))return!1;while(e=e.next);return!0}function r(e){if(e._listIgnore)return void e.remove();if(e=e.firstChild)do r(e);while(e=e.next)}function o(e,t,o){var c=e._listLevel||l;c!=l&&(l>c?a&&(a=a.parent.parent):(s=a,a=null)),a&&a.name==t?a.append(e):(s=s||a,a=new i(t,1),o>1&&a.attr("start",""+o),e.wrap(a)),e.name="li",c>l&&s&&s.lastChild.append(a),l=c,r(e),n(e,/^\u00a0+/),n(e,/^\s*([\u2022\u00b7\u00a7\u00d8\u25CF]|\w+\.)/),n(e,/^\u00a0+/)}for(var a,s,l=1,c=e.getAll("p"),d=0;d<c.length;d++)if(e=c[d],"p"==e.name&&e.firstChild){var u=t(e),f=e.firstChild;if(/^[\s\u00a0]*[\u2022\u00b7\u00a7\u00d8\u25CF]\s*/.test(u)){o(e,"ul");continue}if(/^[\s\u00a0]*\w+\./.test(u)&&!/^[\s\u00a0]*\w+\.\s*[^\s]+/.test(f.value)){var m=/([0-9])\./.exec(u),p=1;m&&(p=parseInt(m[1],10)),o(e,"ol",p);continue}if(e._listLevel){o(e,"ul",1);continue}a=null}}function u(t,n){var r,o={},a=s.dom.parseStyle(n);return e.each(a,function(e,i){switch(i){case"mso-list":r=/\w+ \w+([0-9]+)/i.exec(n),r&&(t._listLevel=parseInt(r[1],10)),/Ignore/i.test(e)&&t.firstChild&&(t._listIgnore=!0,t.firstChild._listIgnore=!0);break;case"horiz-align":i="text-align";break;case"vert-align":i="vertical-align";break;case"font-color":case"mso-foreground":i="color";break;case"mso-background":case"mso-highlight":i="background";break;case"font-weight":case"font-style":return void("normal"!=e&&(o[i]=e));case"mso-element":if(/^(comment|comment-list)$/i.test(e))return void t.remove()}return 0===i.indexOf("mso-comment")?void t.remove():void(0!==i.indexOf("mso-")&&("all"==f||m&&m[i])&&(o[i]=e))}),/(bold)/i.test(o["font-weight"])&&(delete o["font-weight"],t.wrap(new i("b",1))),/(italic)/i.test(o["font-style"])&&(delete o["font-style"],t.wrap(new i("i",1))),o=s.dom.serializeStyle(o,t.name),o?o:null}var f,m,p=c.content;if(f=l.paste_retain_style_properties,f&&(m=e.makeMap(f.split(/[, ]/))),l.paste_enable_default_filters!==!1&&a(c.content)){c.wordContent=!0,p=o.filter(p,[/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join(" "):""}]]);var h=l.paste_word_valid_elements;h||(h="-strong/b,-em/i,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-table[width],-tr,-td[colspan|rowspan|width],-th,-thead,-tfoot,-tbody,-a[href|name],sub,sup,strike,br,del");var g=new n({valid_elements:h,valid_children:"-li[p]"});e.each(g.elements,function(e){e.attributes.class||(e.attributes.class={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))});var v=new t({},g);v.addAttributeFilter("style",function(e){for(var t,n=e.length;n--;)t=e[n],t.attr("style",u(t,t.attr("style"))),"span"==t.name&&t.parent&&!t.attributes.length&&t.unwrap()}),v.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)t=e[r],n=t.attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel|MsoCaption)$/i.test(n)&&t.remove(),t.attr("class",null)}),v.addNodeFilter("del",function(e){for(var t=e.length;t--;)e[t].remove()}),v.addNodeFilter("a",function(e){for(var t,n,r,i=e.length;i--;)if(t=e[i],n=t.attr("href"),r=t.attr("name"),n&&-1!=n.indexOf("#_msocom_"))t.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1],n&&(n="#"+n)),n||r){if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){t.unwrap();continue}t.attr({href:n,name:r})}else t.unwrap()});var y=v.parse(p);d(y),c.content=new r({},g).serialize(y)}})}return s.isWordContent=a,s}),r(v,[f,l,p,s],function(e,t,n,r){return function(i){function o(e){i.on("BeforePastePreProcess",function(t){t.content=e(t.content)})}function a(e){if(!n.isWordContent(e))return e;var o=[];t.each(i.schema.getBlockElements(),function(e,t){o.push(t)});var a=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+o.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return e=r.filter(e,[[a,"$1"]]),e=r.filter(e,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function s(e){if(n.isWordContent(e))return e;var t=i.settings.paste_webkit_styles;if(i.settings.paste_remove_styles_if_webkit===!1||"all"==t)return e;if(t&&(t=t.split(/[, ]/)),t){var r=i.dom,o=i.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,n,i,a){var s=r.parseStyle(i,"span"),l={};if("none"===t)return n+a;for(var c=0;c<t.length;c++){var d=s[t[c]],u=r.getStyle(o,t[c],!0);/color/.test(t[c])&&(d=r.toHex(d),u=r.toHex(u)),u!=d&&(l[t[c]]=d)}return l=r.serializeStyle(l,"span"),l?n+' style="'+l+'"'+a:""})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e=e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,r){return t+' style="'+n+'"'+r})}e.webkit&&o(s),e.ie&&o(a)}}),r(y,[b,u,p,v],function(e,t,n,r){var i;e.add("paste",function(e){function o(){"text"==a.pasteFormat?(this.active(!1),a.pasteFormat="html"):(a.pasteFormat="text",this.active(!0),i||(e.windowManager.alert("Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),i=!0))}var a,s=this,l=e.settings;s.clipboard=a=new t(e),s.quirks=new r(e),s.wordFilter=new n(e),e.settings.paste_as_text&&(s.clipboard.pasteFormat="text"),l.paste_preprocess&&e.on("PastePreProcess",function(e){l.paste_preprocess.call(s,s,e)}),l.paste_postprocess&&e.on("PastePostProcess",function(e){l.paste_postprocess.call(s,s,e)}),e.addCommand("mceInsertClipboardContent",function(e,t){t.content&&s.clipboard.pasteHtml(t.content),t.text&&s.clipboard.pasteText(t.text)}),e.paste_block_drop&&e.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()}),e.settings.paste_data_images||e.on("drop",function(e){var t=e.dataTransfer;t&&t.files&&t.files.length>0&&e.preventDefault()}),e.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",onclick:o,active:"text"==s.clipboard.pasteFormat}),e.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:a.pasteFormat,onclick:o})})}),o([s,p])}(this),tinymce.PluginManager.add("preview",function(e){var t=e.settings,n=!tinymce.Env.ie;e.addCommand("mcePreview",function(){e.windowManager.open({title:"Preview",width:parseInt(e.getParam("plugin_preview_width","650"),10),height:parseInt(e.getParam("plugin_preview_height","500"),10),html:'<iframe src="javascript:\'\'" frameborder="0"'+(n?' sandbox="allow-scripts"':"")+"></iframe>",buttons:{text:"Close",onclick:function(){this.parent().parent().close()}},onPostRender:function(){var r,i="";i+='<base href="'+e.documentBaseURI.getURI()+'">',tinymce.each(e.contentCSS,function(t){i+='<link type="text/css" rel="stylesheet" href="'+e.documentBaseURI.toAbsolute(t)+'">'});var o=t.body_id||"tinymce";-1!=o.indexOf("=")&&(o=e.getParam("body_id","","hash"),o=o[e.id]||o);var a=t.body_class||"";-1!=a.indexOf("=")&&(a=e.getParam("body_class","","hash"),a=a[e.id]||"");var s=e.settings.directionality?' dir="'+e.settings.directionality+'"':"";if(r="<!DOCTYPE html><html><head>"+i+'</head><body id="'+o+'" class="mce-content-body '+a+'"'+s+">"+e.getContent()+"</body></html>",n)this.getEl("body").firstChild.src="data:text/html;charset=utf-8,"+encodeURIComponent(r);else{var l=this.getEl("body").firstChild.contentWindow.document;l.open(),l.write(r),l.close()}}})}),e.addButton("preview",{title:"Preview",cmd:"mcePreview"}),e.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})}),tinymce.PluginManager.add("print",function(e){e.addCommand("mcePrint",function(){e.getWin().print()}),e.addButton("print",{title:"Print",cmd:"mcePrint"}),e.addShortcut("Ctrl+P","","mcePrint"),e.addMenuItem("print",{text:"Print",cmd:"mcePrint",icon:"print",shortcut:"Ctrl+P",context:"file"})}),tinymce.PluginManager.add("save",function(e){function t(){var t;return t=tinymce.DOM.getParent(e.id,"form"),!e.getParam("save_enablewhendirty",!0)||e.isDirty()?(tinymce.triggerSave(),e.getParam("save_onsavecallback")?void(e.execCallback("save_onsavecallback",e)&&(e.startContent=tinymce.trim(e.getContent({format:"raw"})),e.nodeChanged())):void(t?(e.isNotDirty=!0,
(!t.onsubmit||t.onsubmit())&&("function"==typeof t.submit?t.submit():e.windowManager.alert("Error: Form submit field collision.")),e.nodeChanged()):e.windowManager.alert("Error: No form element found."))):void 0}function n(){var t=tinymce.trim(e.startContent);return e.getParam("save_oncancelcallback")?void e.execCallback("save_oncancelcallback",e):(e.setContent(t),e.undoManager.clear(),void e.nodeChanged())}function r(){var t=this;e.on("nodeChange",function(){t.disabled(e.getParam("save_enablewhendirty",!0)&&!e.isDirty())})}e.addCommand("mceSave",t),e.addCommand("mceCancel",n),e.addButton("save",{icon:"save",text:"Save",cmd:"mceSave",disabled:!0,onPostRender:r}),e.addButton("cancel",{text:"Cancel",icon:!1,cmd:"mceCancel",disabled:!0,onPostRender:r}),e.addShortcut("ctrl+s","","mceSave")}),!function(){function e(e,t,n,r,i){function o(e,t){if(t=t||0,!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";var n=e.index;if(t>0){var r=e[t];if(!r)throw"Invalid capture group";n+=e[0].indexOf(r),e[0]=r}return[n,n+e[0].length,[e[0]]]}function a(e){var t;if(3===e.nodeType)return e.data;if(m[e.nodeName]&&!f[e.nodeName])return"";if(t="",(f[e.nodeName]||p[e.nodeName])&&(t+="\n"),e=e.firstChild)do t+=a(e);while(e=e.nextSibling);return t}function s(e,t,n){var r,i,o,a,s=[],l=0,c=e,d=t.shift(),u=0;e:for(;;){if((f[c.nodeName]||p[c.nodeName])&&l++,3===c.nodeType&&(!i&&c.length+l>=d[1]?(i=c,a=d[1]-l):r&&s.push(c),!r&&c.length+l>d[0]&&(r=c,o=d[0]-l),l+=c.length),r&&i){if(c=n({startNode:r,startNodeIndex:o,endNode:i,endNodeIndex:a,innerNodes:s,match:d[2],matchIndex:u}),l-=i.length-a,r=null,i=null,s=[],d=t.shift(),u++,!d)break}else{if((!m[c.nodeName]||f[c.nodeName])&&c.firstChild){c=c.firstChild;continue}if(c.nextSibling){c=c.nextSibling;continue}}for(;;){if(c.nextSibling){c=c.nextSibling;break}if(c.parentNode===e)break e;c=c.parentNode}}}function l(e){var t;if("function"!=typeof e){var n=e.nodeType?e:u.createElement(e);t=function(e,t){var r=n.cloneNode(!1);return r.setAttribute("data-mce-index",t),e&&r.appendChild(u.createTextNode(e)),r}}else t=e;return function(e){var n,r,i,o=e.startNode,a=e.endNode,s=e.matchIndex;if(o===a){var l=o;i=l.parentNode,e.startNodeIndex>0&&(n=u.createTextNode(l.data.substring(0,e.startNodeIndex)),i.insertBefore(n,l));var c=t(e.match[0],s);return i.insertBefore(c,l),e.endNodeIndex<l.length&&(r=u.createTextNode(l.data.substring(e.endNodeIndex)),i.insertBefore(r,l)),l.parentNode.removeChild(l),c}n=u.createTextNode(o.data.substring(0,e.startNodeIndex)),r=u.createTextNode(a.data.substring(e.endNodeIndex));for(var d=t(o.data.substring(e.startNodeIndex),s),f=[],m=0,p=e.innerNodes.length;p>m;++m){var h=e.innerNodes[m],g=t(h.data,s);h.parentNode.replaceChild(g,h),f.push(g)}var v=t(a.data.substring(0,e.endNodeIndex),s);return i=o.parentNode,i.insertBefore(n,o),i.insertBefore(d,o),i.removeChild(o),i=a.parentNode,i.insertBefore(v,a),i.insertBefore(r,a),i.removeChild(a),v}}var c,d,u,f,m,p,h=[],g=0;if(u=t.ownerDocument,f=i.getBlockElements(),m=i.getWhiteSpaceElements(),p=i.getShortEndedElements(),d=a(t)){if(e.global)for(;c=e.exec(d);)h.push(o(c,r));else c=d.match(e),h.push(o(c,r));return h.length&&(g=h.length,s(t,h,l(n))),g}}function t(t){function n(){function e(){i.statusbar.find("#next").disabled(!a(d+1).length),i.statusbar.find("#prev").disabled(!a(d-1).length)}function n(){tinymce.ui.MessageBox.alert("Could not find the specified string.",function(){i.find("#find")[0].focus()})}var r={},i=tinymce.ui.Factory.create({type:"window",layout:"flex",pack:"center",align:"center",onClose:function(){t.focus(),c.done()},onSubmit:function(t){var o,s,l,u;return t.preventDefault(),s=i.find("#case").checked(),u=i.find("#words").checked(),l=i.find("#find").value(),l.length?r.text==l&&r.caseState==s&&r.wholeWord==u?0===a(d+1).length?void n():(c.next(),void e()):(o=c.find(l,s,u),o||n(),i.statusbar.items().slice(1).disabled(0===o),e(),void(r={text:l,caseState:s,wholeWord:u})):(c.done(!1),void i.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",onclick:function(){i.submit()}},{text:"Replace",disabled:!0,onclick:function(){c.replace(i.find("#replace").value())||(i.statusbar.items().slice(1).disabled(!0),d=-1,r={})}},{text:"Replace all",disabled:!0,onclick:function(){c.replace(i.find("#replace").value(),!0,!0),i.statusbar.items().slice(1).disabled(!0),r={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){c.prev(),e()}},{text:"Next",name:"next",disabled:!0,onclick:function(){c.next(),e()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:t.selection.getNode().src},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}}).renderTo().reflow()}function r(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t}function i(n){var r,i;return i=t.dom.create("span",{"data-mce-bogus":1}),i.className="mce-match-marker",r=t.getBody(),c.done(!1),e(n,r,i,!1,t.schema)}function o(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)}function a(e){var n,i=[];if(n=tinymce.toArray(t.getBody().getElementsByTagName("span")),n.length)for(var o=0;o<n.length;o++){var a=r(n[o]);null!==a&&a.length&&a===e.toString()&&i.push(n[o])}return i}function s(e){var n=d,r=t.dom;e=e!==!1,e?n++:n--,r.removeClass(a(d),"mce-match-marker-selected");var i=a(n);return i.length?(r.addClass(a(n),"mce-match-marker-selected"),t.selection.scrollIntoView(i[0]),n):-1}function l(e){e.parentNode.removeChild(e)}var c=this,d=-1;c.init=function(e){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Ctrl+F",onclick:n,separator:"before",context:"edit"}),e.addButton("searchreplace",{tooltip:"Find and replace",shortcut:"Ctrl+F",onclick:n}),e.addCommand("SearchReplace",n),e.shortcuts.add("Ctrl+F","",n)},c.find=function(e,t,n){e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),e=n?"\\b"+e+"\\b":e;var r=i(new RegExp(e,t?"g":"gi"));return r&&(d=-1,d=s(!0)),r},c.next=function(){var e=s(!0);-1!==e&&(d=e)},c.prev=function(){var e=s(!1);-1!==e&&(d=e)},c.replace=function(e,n,i){var s,u,f,m,p,h,g=d;for(n=n!==!1,f=t.getBody(),u=tinymce.toArray(f.getElementsByTagName("span")),s=0;s<u.length;s++){var v=r(u[s]);if(null!==v&&v.length)if(m=p=parseInt(v,10),i||m===d){for(e.length?(u[s].firstChild.nodeValue=e,o(u[s])):l(u[s]);u[++s];)if(m=r(u[s]),null!==v&&v.length){if(m!==p){s--;break}l(u[s])}n&&g--}else p>d&&u[s].setAttribute("data-mce-index",p-1)}return t.undoManager.add(),d=g,n?(h=a(g+1).length>0,c.next()):(h=a(g-1).length>0,c.prev()),!i&&h},c.done=function(e){var n,i,a,s;for(i=tinymce.toArray(t.getBody().getElementsByTagName("span")),n=0;n<i.length;n++){var l=r(i[n]);null!==l&&l.length&&(l===d.toString()&&(a||(a=i[n].firstChild),s=i[n].firstChild),o(i[n]))}if(a&&s){var c=t.dom.createRng();return c.setStart(a,0),c.setEnd(s,s.data.length),e!==!1&&t.selection.setRng(c),c}}}tinymce.PluginManager.add("searchreplace",t)}(),!function(e,t){"use strict";function n(e,t){for(var n,r=[],o=0;o<e.length;++o){if(n=a[e[o]]||i(e[o]),!n)throw"module definition dependecy not found: "+e[o];r.push(n)}t.apply(null,r)}function r(e,r,i){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(i===t)throw"invalid module definition, definition function must be specified";n(r,function(){a[e]=i.apply(null,arguments)})}function i(t){for(var n=e,r=t.split(/[.\/]/),i=0;i<r.length;++i){if(!n[r[i]])return;n=n[r[i]]}return n}function o(n){for(var r=0;r<n.length;r++){for(var i=e,o=n[r],s=o.split(/[.\/]/),l=0;l<s.length-1;++l)i[s[l]]===t&&(i[s[l]]={}),i=i[s[l]];i[s[s.length-1]]=a[o]}}var a={};r("tinymce/spellcheckerplugin/DomTextMatcher",[],function(){return function(e,t){function n(e,t){if(!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";return{start:e.index,end:e.index+e[0].length,text:e[0],data:t}}function r(e){var t;if(3===e.nodeType)return e.data;if(_[e.nodeName]&&!w[e.nodeName])return"";if(t="",(w[e.nodeName]||k[e.nodeName])&&(t+="\n"),e=e.firstChild)do t+=r(e);while(e=e.nextSibling);return t}function i(e,t,n){var r,i,o,a,s,l=[],c=0,d=e,u=0;t=t.slice(0),t.sort(function(e,t){return e.start-t.start}),s=t.shift();e:for(;;){if((w[d.nodeName]||k[d.nodeName])&&c++,3===d.nodeType&&(!i&&d.length+c>=s.end?(i=d,a=s.end-c):r&&l.push(d),!r&&d.length+c>s.start&&(r=d,o=s.start-c),c+=d.length),r&&i){if(d=n({startNode:r,startNodeIndex:o,endNode:i,endNodeIndex:a,innerNodes:l,match:s.text,matchIndex:u}),c-=i.length-a,r=null,i=null,l=[],s=t.shift(),u++,!s)break}else{if((!_[d.nodeName]||w[d.nodeName])&&d.firstChild){d=d.firstChild;continue}if(d.nextSibling){d=d.nextSibling;continue}}for(;;){if(d.nextSibling){d=d.nextSibling;break}if(d.parentNode===e)break e;d=d.parentNode}}}function o(e){function t(t,n){var r=N[n];r.stencil||(r.stencil=e(r));var i=r.stencil.cloneNode(!1);return i.setAttribute("data-mce-index",n),t&&i.appendChild(S.doc.createTextNode(t)),i}return function(e){var n,r,i,o=e.startNode,a=e.endNode,s=e.matchIndex,l=S.doc;if(o===a){var c=o;i=c.parentNode,e.startNodeIndex>0&&(n=l.createTextNode(c.data.substring(0,e.startNodeIndex)),i.insertBefore(n,c));var d=t(e.match,s);return i.insertBefore(d,c),e.endNodeIndex<c.length&&(r=l.createTextNode(c.data.substring(e.endNodeIndex)),i.insertBefore(r,c)),c.parentNode.removeChild(c),d}n=l.createTextNode(o.data.substring(0,e.startNodeIndex)),r=l.createTextNode(a.data.substring(e.endNodeIndex));for(var u=t(o.data.substring(e.startNodeIndex),s),f=[],m=0,p=e.innerNodes.length;p>m;++m){var h=e.innerNodes[m],g=t(h.data,s);h.parentNode.replaceChild(g,h),f.push(g)}var v=t(a.data.substring(0,e.endNodeIndex),s);return i=o.parentNode,i.insertBefore(n,o),i.insertBefore(u,o),i.removeChild(o),i=a.parentNode,i.insertBefore(v,a),i.insertBefore(r,a),i.removeChild(a),v}}function a(e){var t=e.parentNode;t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)}function s(t){var n=e.getElementsByTagName("*"),r=[];t="number"==typeof t?""+t:null;for(var i=0;i<n.length;i++){var o=n[i],a=o.getAttribute("data-mce-index");null!==a&&a.length&&(a===t||null===t)&&r.push(o)}return r}function l(e){for(var t=N.length;t--;)if(N[t]===e)return t;return-1}function c(e){var t=[];return d(function(n,r){e(n,r)&&t.push(n)}),N=t,this}function d(e){for(var t=0,n=N.length;n>t&&e(N[t],t)!==!1;t++);return this}function u(t){return N.length&&i(e,N,o(t)),this}function f(e,t){if(C&&e.global)for(;x=e.exec(C);)N.push(n(x,t));return this}function m(e){var t,n=s(e?l(e):null);for(t=n.length;t--;)a(n[t]);return this}function p(e){return N[e.getAttribute("data-mce-index")]}function h(e){return s(l(e))[0]}function g(e,t,n){return N.push({start:e,end:e+t,text:C.substr(e,t),data:n}),this}function v(e){var n=s(l(e)),r=t.dom.createRng();return r.setStartBefore(n[0]),r.setEndAfter(n[n.length-1]),r}function y(e,n){var r=v(e);return r.deleteContents(),n.length>0&&r.insertNode(t.dom.doc.createTextNode(n)),r}function b(){return N.splice(0,N.length),m(),this}var x,C,w,_,k,N=[],S=t.dom;return w=t.schema.getBlockElements(),_=t.schema.getWhiteSpaceElements(),k=t.schema.getShortEndedElements(),C=r(e),{text:C,matches:N,each:d,filter:c,reset:b,matchFromElement:p,elementFromMatch:h,find:f,add:g,wrap:u,unwrap:m,replace:y,rangeFromMatch:v,indexOf:l}}}),r("tinymce/spellcheckerplugin/Plugin",["tinymce/spellcheckerplugin/DomTextMatcher","tinymce/PluginManager","tinymce/util/Tools","tinymce/ui/Menu","tinymce/dom/DOMUtils","tinymce/util/XHR","tinymce/util/URI","tinymce/util/JSON"],function(e,t,n,r,i,o,a,s){t.add("spellchecker",function(t,l){function c(){return R.textMatcher||(R.textMatcher=new e(t.getBody(),t)),R.textMatcher}function d(e,t){var r=[];return n.each(t,function(e){r.push({selectable:!0,text:e.name,data:e.value})}),r}function u(e){for(var t in e)return!1;return!0}function f(e,o){var a=[],s=N[e];n.each(s,function(e){a.push({text:e,onclick:function(){t.insertContent(t.dom.encode(e)),t.dom.remove(o),v()}})}),a.push({text:"-"}),T&&a.push({text:"Add to Dictionary",onclick:function(){y(e,o)}}),a.push.apply(a,[{text:"Ignore",onclick:function(){b(e,o)}},{text:"Ignore all",onclick:function(){b(e,o,!0)}},{text:"Finish",onclick:x}]),E=new r({items:a,context:"contextmenu",onautohide:function(e){-1!=e.target.className.indexOf("spellchecker")&&e.preventDefault()},onhide:function(){E.remove(),E=null}}),E.renderTo(document.body);var l=i.DOM.getPos(t.getContentAreaContainer()),c=t.dom.getPos(o[0]),d=t.dom.getRoot();"BODY"==d.nodeName?(c.x-=d.ownerDocument.documentElement.scrollLeft||d.scrollLeft,c.y-=d.ownerDocument.documentElement.scrollTop||d.scrollTop):(c.x-=d.scrollLeft,c.y-=d.scrollTop),l.x+=c.x,l.y+=c.y,E.moveTo(l.x,l.y+o[0].offsetHeight)}function m(){return t.getParam("spellchecker_wordchar_pattern")||new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`§©«®±¶·¸»¼½¾¿×÷¤”“„]+',"g")}function p(e,t,r,i){var c={method:e},d="";"spellcheck"==e&&(c.text=t,c.lang=A.spellchecker_language),"addToDictionary"==e&&(c.word=t),n.each(c,function(e,t){d&&(d+="&"),d+=t+"="+encodeURIComponent(e)}),o.send({url:new a(l).toAbsolute(A.spellchecker_rpc_url),type:"post",content_type:"application/x-www-form-urlencoded",data:d,success:function(e){e=s.parse(e),e?e.error?i(e.error):r(e):i("Sever response wasn't proper JSON.")},error:function(e,t){i("Spellchecker request error: "+t.status)}})}function h(e,t,n,r){var i=A.spellchecker_callback||p;i.call(R,e,t,n,r)}function g(){function e(e){var n;return e.words?(T=!!e.dictionary,n=e.words):n=e,t.setProgressState(!1),u(n)?(t.windowManager.alert("No misspellings found"),void(S=!1)):(N=n,c().find(m()).filter(function(e){return!!n[e.text]}).wrap(function(e){return t.dom.create("span",{class:"mce-spellchecker-word","data-mce-bogus":1,"data-mce-word":e.text})}),void t.fire("SpellcheckStart"))}function n(e){t.windowManager.alert(e),t.setProgressState(!1),x()}return S?void x():(x(),S=!0,t.setProgressState(!0),h("spellcheck",c().text,e,n),void t.focus())}function v(){t.dom.select("span.mce-spellchecker-word").length||x()}function y(e,n){t.setProgressState(!0),h("addToDictionary",e,function(){t.setProgressState(!1),t.dom.remove(n,!0),v()},function(e){t.windowManager.alert(e),t.setProgressState(!1)})}function b(e,r,i){t.selection.collapse(),i?n.each(t.dom.select("span.mce-spellchecker-word"),function(n){n.getAttribute("data-mce-word")==e&&t.dom.remove(n,!0)}):t.dom.remove(r,!0),v()}function x(){c().reset(),R.textMatcher=null,S&&(S=!1,t.fire("SpellcheckEnd"))}function C(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t}function w(e){var r,i=[];if(r=n.toArray(t.getBody().getElementsByTagName("span")),r.length)for(var o=0;o<r.length;o++){var a=C(r[o]);null!==a&&a.length&&a===e.toString()&&i.push(r[o])}return i}function _(e){var t=A.spellchecker_language;e.control.items().each(function(e){e.active(e.settings.data===t)})}var k,N,S,E,T,R=this,A=t.settings,B=A.spellchecker_languages||"English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv";k=d("Language",n.map(B.split(","),function(e){return e=e.split("="),{name:e[0],value:e[1]}})),t.on("click",function(e){var n=e.target;if("mce-spellchecker-word"==n.className){e.preventDefault();var r=w(C(n));if(r.length>0){var i=t.dom.createRng();i.setStartBefore(r[0]),i.setEndAfter(r[r.length-1]),t.selection.setRng(i),f(n.getAttribute("data-mce-word"),r)}}}),t.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:g,selectable:!0,onPostRender:function(){var e=this;t.on("SpellcheckStart SpellcheckEnd",function(){e.active(S)})}});var P={tooltip:"Spellcheck",onclick:g,onPostRender:function(){var e=this;t.on("SpellcheckStart SpellcheckEnd",function(){e.active(S)})}};k.length>1&&(P.type="splitbutton",P.menu=k,P.onshow=_,P.onselect=function(e){A.spellchecker_language=e.control.settings.data}),t.addButton("spellchecker",P),t.addCommand("mceSpellCheck",g),t.on("remove",function(){E&&(E.remove(),E=null)}),t.on("change",v),this.getTextMatcher=c,this.getWordCharPattern=m,this.getLanguage=function(){return A.spellchecker_language},A.spellchecker_language=A.spellchecker_language||A.language||"en"})}),o(["tinymce/spellcheckerplugin/DomTextMatcher"])}(this),tinymce.PluginManager.add("tabfocus",function(e){function t(e){9!==e.keyCode||e.ctrlKey||e.altKey||e.metaKey||e.preventDefault()}function n(t){function n(t){function n(e){return"BODY"===e.nodeName||"hidden"!=e.type&&"none"!=e.style.display&&"hidden"!=e.style.visibility&&n(e.parentNode)}function o(e){return e.tabIndex||"INPUT"==e.nodeName||"TEXTAREA"==e.nodeName}function l(e){return!o(e)&&"-1"!=e.getAttribute("tabindex")&&n(e)}if(s=r.select(":input:enabled,*[tabindex]:not(iframe)"),i(s,function(t,n){return t.id==e.id?(a=n,!1):void 0}),t>0){for(c=a+1;c<s.length;c++)if(l(s[c]))return s[c]}else for(c=a-1;c>=0;c--)if(l(s[c]))return s[c];return null}var a,s,l,c;if(!(9!==t.keyCode||t.ctrlKey||t.altKey||t.metaKey)&&(l=o(e.getParam("tab_focus",e.getParam("tabfocus_elements",":prev,:next"))),1==l.length&&(l[1]=l[0],l[0]=":prev"),s=t.shiftKey?":prev"==l[0]?n(-1):r.get(l[0]):":next"==l[1]?n(1):r.get(l[1]))){var d=tinymce.get(s.id||s.name);s.id&&d?d.focus():window.setTimeout(function(){tinymce.Env.webkit||window.focus(),s.focus()},10),t.preventDefault()}}var r=tinymce.DOM,i=tinymce.each,o=tinymce.explode;e.on("init",function(){e.inline&&tinymce.DOM.setAttrib(e.getBody(),"tabIndex",null)}),e.on("keyup",t),tinymce.Env.gecko?e.on("keypress keydown",n):e.on("keydown",n)}),!function(e,t){"use strict";function n(e,t){for(var n,r=[],o=0;o<e.length;++o){if(n=a[e[o]]||i(e[o]),!n)throw"module definition dependecy not found: "+e[o];r.push(n)}t.apply(null,r)}function r(e,r,i){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(r===t)throw"invalid module definition, dependencies must be specified";if(i===t)throw"invalid module definition, definition function must be specified";n(r,function(){a[e]=i.apply(null,arguments)})}function i(t){for(var n=e,r=t.split(/[.\/]/),i=0;i<r.length;++i){if(!n[r[i]])return;n=n[r[i]]}return n}function o(n){for(var r=0;r<n.length;r++){for(var i=e,o=n[r],s=o.split(/[.\/]/),l=0;l<s.length-1;++l)i[s[l]]===t&&(i[s[l]]={}),i=i[s[l]];i[s[s.length-1]]=a[o]}}var a={},s="tinymce/tableplugin/TableGrid",l="tinymce/util/Tools",c="tinymce/Env",d="tinymce/tableplugin/Quirks",u="tinymce/util/VK",f="tinymce/tableplugin/CellSelection",m="tinymce/dom/TreeWalker",p="tinymce/tableplugin/Dialogs",h="tinymce/tableplugin/Plugin",g="tinymce/PluginManager";r(s,[l,c],function(e,n){function r(e,t){return parseInt(e.getAttribute(t)||1,10)}var i=e.each;return function(o,a){function s(){var e=0;B=[],P=0,i(["thead","tbody","tfoot"],function(t){var n=O.select("> "+t+" tr",a);i(n,function(n,o){o+=e,i(O.select("> td, > th",n),function(e,n){var i,a,s,l;if(B[o])for(;B[o][n];)n++;for(s=r(e,"rowspan"),l=r(e,"colspan"),a=o;o+s>a;a++)for(B[a]||(B[a]=[]),i=n;n+l>i;i++)B[a][i]={part:t,real:a==o&&i==n,elm:e,rowspan:s,colspan:l};P=Math.max(P,n+1)})}),e+=n.length})}function l(e,t){return e=e.cloneNode(t),e.removeAttribute("id"),e}function c(e,t){var n;return n=B[t],n?n[e]:void 0}function d(e,t,n){e&&(n=parseInt(n,10),1===n?e.removeAttribute(t,1):e.setAttribute(t,n,1))}function u(e){return e&&(O.hasClass(e.elm,"mce-item-selected")||e==L)}function f(){var e=[];return i(a.rows,function(t){i(t.cells,function(n){return O.hasClass(n,"mce-item-selected")||L&&n==L.elm?(e.push(t),!1):void 0})}),e}function m(){var e=O.createRng();e.setStartAfter(a),e.setEndAfter(a),I.setRng(e),O.remove(a)}function p(t){var r,a={};return o.settings.table_clone_elements!==!1&&(a=e.makeMap((o.settings.table_clone_elements||"strong em b i span font h1 h2 h3 h4 h5 h6 p div").toUpperCase(),/[ ,]/)),e.walk(t,function(e){var o;return 3==e.nodeType?(i(O.getParents(e.parentNode,null,t).reverse(),function(e){a[e.nodeName]&&(e=l(e,!1),r?o&&o.appendChild(e):r=o=e,o=e)}),o&&(o.innerHTML=n.ie?"&nbsp;":'<br data-mce-bogus="1" />'),!1):void 0},"childNodes"),t=l(t,!1),d(t,"rowSpan",1),d(t,"colSpan",1),r?t.appendChild(r):(!n.ie||n.ie>10)&&(t.innerHTML='<br data-mce-bogus="1" />'),t}function h(){var e,t=O.createRng();return i(O.select("tr",a),function(e){0===e.cells.length&&O.remove(e)}),0===O.select("tr",a).length?(t.setStartBefore(a),t.setEndBefore(a),I.setRng(t),void O.remove(a)):(i(O.select("thead,tbody,tfoot",a),function(e){0===e.rows.length&&O.remove(e)}),s(),void(D&&(e=B[Math.min(B.length-1,D.y)],e&&(I.select(e[Math.min(e.length-1,D.x)].elm,!0),I.collapse(!0)))))}function g(e,t,n,r){var i,o,a,s,l;for(i=B[t][e].elm.parentNode,a=1;n>=a;a++)if(i=O.getNext(i,"tr")){for(o=e;o>=0;o--)if(l=B[t+a][o].elm,l.parentNode==i){for(s=1;r>=s;s++)O.insertAfter(p(l),l);break}if(-1==o)for(s=1;r>=s;s++)i.insertBefore(p(i.cells[0]),i.cells[0])}}function v(){i(B,function(e,t){i(e,function(e,n){var i,o,a;if(u(e)&&(e=e.elm,i=r(e,"colspan"),o=r(e,"rowspan"),i>1||o>1)){for(d(e,"rowSpan",1),d(e,"colSpan",1),a=0;i-1>a;a++)O.insertAfter(p(e),e);g(n,t,o-1,i)}})})}function y(t,n,r){var o,a,l,f,m,p,g,y,b,x,C;if(t?(o=S(t),a=o.x,l=o.y,f=a+(n-1),m=l+(r-1)):(D=M=null,i(B,function(e,t){i(e,function(e,n){u(e)&&(D||(D={x:n,y:t}),M={x:n,y:t})})}),D&&(a=D.x,l=D.y,f=M.x,m=M.y)),y=c(a,l),b=c(f,m),y&&b&&y.part==b.part){for(v(),s(),y=c(a,l).elm,d(y,"colSpan",f-a+1),d(y,"rowSpan",m-l+1),g=l;m>=g;g++)for(p=a;f>=p;p++)B[g]&&B[g][p]&&(t=B[g][p].elm,t!=y&&(x=e.grep(t.childNodes),i(x,function(e){y.appendChild(e)}),x.length&&(x=e.grep(y.childNodes),C=0,i(x,function(e){"BR"==e.nodeName&&O.getAttrib(e,"data-mce-bogus")&&C++<x.length-1&&y.removeChild(e)})),O.remove(t)));h()}}function b(e){var n,o,a,s,c,f,m,h,g;if(i(B,function(t,r){return i(t,function(t){return(!u(t)||(t=t.elm,c=t.parentNode,f=l(c,!1),n=r,!e))&&void 0}),e?!n:void 0}),n!==t){for(s=0;s<B[0].length;s++)if(B[n][s]&&(o=B[n][s].elm,o!=a)){if(e){if(n>0&&B[n-1][s]&&(h=B[n-1][s].elm,g=r(h,"rowSpan"),g>1)){d(h,"rowSpan",g+1);continue}}else if(g=r(o,"rowspan"),g>1){d(o,"rowSpan",g+1);continue}m=p(o),d(m,"colSpan",o.colSpan),f.appendChild(m),a=o}f.hasChildNodes()&&(e?c.parentNode.insertBefore(f,c):O.insertAfter(f,c))}}function x(e){var t,n;i(B,function(n){return i(n,function(n,r){return(!u(n)||(t=r,!e))&&void 0}),e?!t:void 0}),i(B,function(i,o){var a,s,l;i[t]&&(a=i[t].elm,a!=n&&(l=r(a,"colspan"),s=r(a,"rowspan"),1==l?e?(a.parentNode.insertBefore(p(a),a),g(t,o,s-1,l)):(O.insertAfter(p(a),a),g(t,o,s-1,l)):d(a,"colSpan",a.colSpan+1),n=a))})}function C(){var t=[];i(B,function(n){i(n,function(n,o){u(n)&&-1===e.inArray(t,o)&&(i(B,function(e){var t,n=e[o].elm;t=r(n,"colSpan"),t>1?d(n,"colSpan",t-1):O.remove(n)}),t.push(o))})}),h()}function w(){function e(e){var t,n;i(e.cells,function(e){var n=r(e,"rowSpan");n>1&&(d(e,"rowSpan",n-1),t=S(e),g(t.x,t.y,1,1))}),t=S(e.cells[0]),i(B[t.y],function(e){var t;e=e.elm,e!=n&&(t=r(e,"rowSpan"),1>=t?O.remove(e):d(e,"rowSpan",t-1),n=e)})}var t;t=f(),i(t.reverse(),function(t){e(t)}),h()}function _(){var e=f();return O.remove(e),h(),e}function k(){var e=f();return i(e,function(t,n){e[n]=l(t,!0)}),e}function N(e,t){var n=f(),r=n[t?0:n.length-1],o=r.cells.length;e&&(i(B,function(e){var t;return o=0,i(e,function(e){e.real&&(o+=e.colspan),e.elm.parentNode==r&&(t=1)}),!t&&void 0}),t||e.reverse(),i(e,function(e){var n,i,a=e.cells.length;for(n=0;a>n;n++)i=e.cells[n],d(i,"colSpan",1),d(i,"rowSpan",1);for(n=a;o>n;n++)e.appendChild(p(e.cells[a-1]));for(n=o;a>n;n++)O.remove(e.cells[n]);t?r.parentNode.insertBefore(e,r):O.insertAfter(e,r)}),O.removeClass(O.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"))}function S(e){var t;return i(B,function(n,r){return i(n,function(n,i){return n.elm==e?(t={x:i,y:r},!1):void 0}),!t}),t}function E(e){D=S(e)}function T(){var e,t;return e=t=0,i(B,function(n,r){i(n,function(n,i){var o,a;u(n)&&(n=B[r][i],i>e&&(e=i),r>t&&(t=r),n.real&&(o=n.colspan-1,a=n.rowspan-1,o&&i+o>e&&(e=i+o),a&&r+a>t&&(t=r+a)))})}),{x:e,y:t}}function R(e){var t,n,r,i,o,a,s,l,c,d;if(M=S(e),D&&M){for(t=Math.min(D.x,M.x),n=Math.min(D.y,M.y),r=Math.max(D.x,M.x),i=Math.max(D.y,M.y),o=r,a=i,d=n;a>=d;d++)e=B[d][t],e.real||t-(e.colspan-1)<t&&(t-=e.colspan-1);for(c=t;o>=c;c++)e=B[n][c],e.real||n-(e.rowspan-1)<n&&(n-=e.rowspan-1);for(d=n;i>=d;d++)for(c=t;r>=c;c++)e=B[d][c],e.real&&(s=e.colspan-1,l=e.rowspan-1,s&&c+s>o&&(o=c+s),l&&d+l>a&&(a=d+l));for(O.removeClass(O.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),d=n;a>=d;d++)for(c=t;o>=c;c++)B[d][c]&&O.addClass(B[d][c].elm,"mce-item-selected")}}function A(e,t){var n,r,i;n=S(e),r=n.y*P+n.x;do{if(r+=t,i=c(r%P,Math.floor(r/P)),!i)break;if(i.elm!=e)return I.select(i.elm,!0),O.isEmpty(i.elm)&&I.collapse(!0),!0}while(i.elm==e);return!1}var B,P,D,M,L,I=o.selection,O=I.dom;a=a||O.getParent(I.getStart(),"table"),s(),L=O.getParent(I.getStart(),"th,td"),L&&(D=S(L),M=T(),L=c(D.x,D.y)),e.extend(this,{deleteTable:m,split:v,merge:y,insertRow:b,insertCol:x,deleteCols:C,deleteRows:w,cutRows:_,copyRows:k,pasteRows:N,getPos:S,setStartCell:E,setEndCell:R,moveRelIdx:A,refresh:s})}}),r(d,[u,c,l],function(e,t,n){function r(e,t){return parseInt(e.getAttribute(t)||1,10)}var i=n.each;return function(n){function o(){function t(t){function o(e,r){var i=e?"previousSibling":"nextSibling",o=n.dom.getParent(r,"tr"),s=o[i];if(s)return g(n,r,s,e),t.preventDefault(),!0;var d=n.dom.getParent(o,"table"),u=o.parentNode,f=u.nodeName.toLowerCase();if("tbody"===f||f===(e?"tfoot":"thead")){var m=a(e,d,u,"tbody");if(null!==m)return l(e,m,r)}return c(e,o,i,d)}function a(e,t,r,i){var o=n.dom.select(">"+i,t),a=o.indexOf(r);if(e&&0===a||!e&&a===o.length-1)return s(e,t);if(-1===a){var l="thead"===r.tagName.toLowerCase()?0:o.length-1;return o[l]}return o[a+(e?-1:1)]}function s(e,t){var r=e?"thead":"tfoot",i=n.dom.select(">"+r,t);return 0!==i.length?i[0]:null}function l(e,r,i){var o=d(r,e);return o&&g(n,i,o,e),t.preventDefault(),!0}function c(e,r,i,a){var s=a[i];if(s)return u(s),!0;var l=n.dom.getParent(a,"td,th");if(l)return o(e,l,t);var c=d(r,!e);return u(c),t.preventDefault(),!1}function d(e,t){var r=e&&e[t?"lastChild":"firstChild"];return r&&"BR"===r.nodeName?n.dom.getParent(r,"td,th"):r}function u(e){n.selection.setCursorLocation(e,0)}function f(){return b==e.UP||b==e.DOWN}function m(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"tr");return null!==n}function p(e){for(var t=0,n=e;n.previousSibling;)n=n.previousSibling,t+=r(n,"colspan");return t}function h(e,t){var n=0,o=0;return i(e.children,function(e,i){return n+=r(e,"colspan"),o=i,!(n>t)&&void 0}),o}function g(e,t,r,i){var o=p(n.dom.getParent(t,"td,th")),a=h(r,o),s=r.childNodes[a],l=d(s,i);u(l||s)}function v(e){var t=n.selection.getNode(),r=n.dom.getParent(t,"td,th"),i=n.dom.getParent(e,"td,th");return r&&r!==i&&y(r,i)}function y(e,t){return n.dom.getParent(e,"TABLE")===n.dom.getParent(t,"TABLE")}var b=t.keyCode;if(f()&&m(n)){var x=n.selection.getNode();setTimeout(function(){v(x)&&o(!t.shiftKey&&b===e.UP,x,t)},0)}}n.on("KeyDown",function(e){t(e)})}function a(){function e(e,t){var n,r=t.ownerDocument,i=r.createRange();return i.setStartBefore(t),i.setEnd(e.endContainer,e.endOffset),n=r.createElement("body"),n.appendChild(i.cloneContents()),0===n.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length}n.on("KeyDown",function(t){var r,i,o=n.dom;(37==t.keyCode||38==t.keyCode)&&(r=n.selection.getRng(),i=o.getParent(r.startContainer,"table"),i&&n.getBody().firstChild==i&&e(r,i)&&(r=o.createRng(),r.setStartBefore(i),r.setEndBefore(i),n.selection.setRng(r),t.preventDefault()))})}function s(){n.on("KeyDown SetContent VisualAid",function(){var e;for(e=n.getBody().lastChild;e;e=e.previousSibling)if(3==e.nodeType){if(e.nodeValue.length>0)break}else if(1==e.nodeType&&("BR"==e.tagName||!e.getAttribute("data-mce-bogus")))break;e&&"TABLE"==e.nodeName&&(n.settings.forced_root_block?n.dom.add(n.getBody(),n.settings.forced_root_block,n.settings.forced_root_block_attrs,t.ie&&t.ie<11?"&nbsp;":'<br data-mce-bogus="1" />'):n.dom.add(n.getBody(),"br",{"data-mce-bogus":"1"}))}),n.on("PreProcess",function(e){var t=e.node.lastChild;t&&("BR"==t.nodeName||1==t.childNodes.length&&("BR"==t.firstChild.nodeName||" "==t.firstChild.nodeValue))&&t.previousSibling&&"TABLE"==t.previousSibling.nodeName&&n.dom.remove(t)})}function l(){function e(e,t,n,r){var i,o,a,s=3,l=e.dom.getParent(t.startContainer,"TABLE");return l&&(i=l.parentNode),o=t.startContainer.nodeType==s&&0===t.startOffset&&0===t.endOffset&&r&&("TR"==n.nodeName||n==i),a=("TD"==n.nodeName||"TH"==n.nodeName)&&!r,o||a}function t(){var t=n.selection.getRng(),r=n.selection.getNode(),i=n.dom.getParent(t.startContainer,"TD,TH");if(e(n,t,r,i)){i||(i=r);for(var o=i.lastChild;o.lastChild;)o=o.lastChild;3==o.nodeType&&(t.setEnd(o,o.data.length),n.selection.setRng(t))}}n.on("KeyDown",function(){t()}),n.on("MouseDown",function(e){2!=e.button&&t()})}function c(){n.on("keydown",function(t){if((t.keyCode==e.DELETE||t.keyCode==e.BACKSPACE)&&!t.isDefaultPrevented()){var r=n.dom.getParent(n.selection.getStart(),"table");if(r){for(var i=n.dom.select("td,th",r),o=i.length;o--;)if(!n.dom.hasClass(i[o],"mce-item-selected"))return;t.preventDefault(),n.execCommand("mceTableDelete")}}})}c(),t.webkit&&(o(),l()),t.gecko&&(a(),s()),t.ie>10&&(a(),s())}}),r(f,[s,m,l],function(e,t,n){return function(r){function i(e){r.getBody().style.webkitUserSelect="",(e||u)&&(r.dom.removeClass(r.dom.select("td.mce-item-selected,th.mce-item-selected"),"mce-item-selected"),u=!1)}function o(t){var n,i,o=t.target;if(!c&&s&&(a||o!=s)&&("TD"==o.nodeName||"TH"==o.nodeName)){i=d.getParent(o,"table"),i==l&&(a||(a=new e(r,i),a.setStartCell(s),r.getBody().style.webkitUserSelect="none"),a.setEndCell(o),u=!0),n=r.selection.getSel();try{n.removeAllRanges?n.removeAllRanges():n.empty()}catch(e){}t.preventDefault()}}var a,s,l,c,d=r.dom,u=!0;return r.on("MouseDown",function(e){2==e.button||c||(i(),s=d.getParent(e.target,"td,th"),l=d.getParent(s,"table"))}),r.on("mouseover",o),r.on("remove",function(){d.unbind(r.getDoc(),"mouseover",o)}),r.on("MouseUp",function(){function e(e,r){var o=new t(e,e);do{if(3==e.nodeType&&0!==n.trim(e.nodeValue).length)return void(r?i.setStart(e,0):i.setEnd(e,e.nodeValue.length));if("BR"==e.nodeName)return void(r?i.setStartBefore(e):i.setEndBefore(e))}while(e=r?o.next():o.prev())}var i,o,c,u,f,m=r.selection;if(s){if(a&&(r.getBody().style.webkitUserSelect=""),o=d.select("td.mce-item-selected,th.mce-item-selected"),o.length>0){i=d.createRng(),u=o[0],i.setStartBefore(u),i.setEndAfter(u),e(u,1),c=new t(u,d.getParent(o[0],"table"));do if("TD"==u.nodeName||"TH"==u.nodeName){if(!d.hasClass(u,"mce-item-selected"))break;f=u}while(u=c.next());e(f),m.setRng(i)}r.nodeChanged(),s=a=l=null}}),r.on("KeyUp Drop SetContent",function(e){i("setcontent"==e.type),s=a=l=null}),r.on("ObjectResizeStart ObjectResized",function(e){c="ObjectResized"!=e.type}),{clear:i}}}),r(p,[l,c],function(e,t){var n=e.each;return function(r){function i(){var e=this,t=r.settings.color_picker_callback;t&&t.call(r,function(t){e.value(t).fire("change")},e.value())}function o(e){return{title:"Advanced",type:"form",defaults:{onchange:function(){u(e,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:i},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:i}]}]}}function a(e){return e?e.replace(/px$/,""):""}function s(e){return/^[0-9]+$/.test(e)&&(e+="px"),e}function l(e){n("left center right".split(" "),function(t){r.formatter.remove("align"+t,{},e)})}function c(e){n("top middle bottom".split(" "),function(t){r.formatter.remove("valign"+t,{},e)})}function d(t,n,r){function i(t,r){return r=r||[],
e.each(t,function(e){var t={text:e.text||e.title};e.menu?t.menu=i(e.menu):(t.value=e.value,n&&n(t)),r.push(t)}),r}return i(t,r||[])}function u(e,t,n){var r=t.toJSON(),i=e.parseStyle(r.style);n?(t.find("#borderColor").value(i["border-color"]||"")[0].fire("change"),t.find("#backgroundColor").value(i["background-color"]||"")[0].fire("change")):(i["border-color"]=r.borderColor,i["background-color"]=r.backgroundColor),t.find("#style").value(e.serializeStyle(e.parseStyle(e.serializeStyle(i))))}function f(e,t,n){var r=e.parseStyle(e.getAttrib(n,"style"));r["border-color"]&&(t.borderColor=r["border-color"]),r["background-color"]&&(t.backgroundColor=r["background-color"]),t.style=e.serializeStyle(r)}var m=this;m.tableProps=function(){m.table(!0)},m.table=function(i){function c(){var n;u(y,this),b=e.extend(b,this.toJSON()),e.each("backgroundColor borderColor".split(" "),function(e){delete b[e]}),b.class===!1&&delete b.class,r.undoManager.transact(function(){m||(m=r.plugins.table.insertTable(b.cols||1,b.rows||1)),r.dom.setAttribs(m,{cellspacing:b.cellspacing,cellpadding:b.cellpadding,border:b.border,style:b.style,class:b.class}),r.dom.setStyles(m,{width:s(b.width),height:s(b.height)}),n=y.select("caption",m)[0],n&&!b.caption&&y.remove(n),!n&&b.caption&&(n=y.create("caption"),n.innerHTML=t.ie?" ":'<br data-mce-bogus="1"/>',m.insertBefore(n,m.firstChild)),l(m),b.align&&r.formatter.apply("align"+b.align,{},m),r.focus(),r.addVisual()})}var m,p,h,g,v,y=r.dom,b={};i===!0?(m=y.getParent(r.selection.getStart(),"table"),m&&(b={width:a(y.getStyle(m,"width")||y.getAttrib(m,"width")),height:a(y.getStyle(m,"height")||y.getAttrib(m,"height")),cellspacing:m?y.getAttrib(m,"cellspacing"):"",cellpadding:m?y.getAttrib(m,"cellpadding"):"",border:m?y.getAttrib(m,"border"):"",caption:!!y.select("caption",m)[0],class:y.getAttrib(m,"class")},n("left center right".split(" "),function(e){r.formatter.matchNode(m,"align"+e)&&(b.align=e)}))):(p={label:"Cols",name:"cols"},h={label:"Rows",name:"rows"}),r.settings.table_class_list&&(b.class&&(b.class=b.class.replace(/\s*mce\-item\-table\s*/g,"")),g={name:"class",type:"listbox",label:"Class",values:d(r.settings.table_class_list,function(e){e.value&&(e.textStyle=function(){return r.formatter.getCssText({block:"table",classes:[e.value]})})})}),v={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:[p,h,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},g]},r.settings.table_adv_tab!==!1?(f(y,b,m),r.windowManager.open({title:"Table properties",data:b,bodyType:"tabpanel",body:[{title:"General",type:"form",items:v},o(y)],onsubmit:c})):r.windowManager.open({title:"Table properties",data:b,body:v,onsubmit:c})},m.merge=function(e,t){r.windowManager.open({title:"Merge cells",body:[{label:"Cols",name:"cols",type:"textbox",value:"1",size:10},{label:"Rows",name:"rows",type:"textbox",value:"1",size:10}],onsubmit:function(){var n=this.toJSON();r.undoManager.transact(function(){e.merge(t,n.cols,n.rows)})}})},m.cell=function(){function t(){u(h,this),m=e.extend(m,this.toJSON()),r.undoManager.transact(function(){n(g,function(e){r.dom.setAttribs(e,{scope:m.scope,style:m.style,class:m.class}),r.dom.setStyles(e,{width:s(m.width),height:s(m.height)}),m.type&&e.nodeName.toLowerCase()!=m.type&&(e=h.rename(e,m.type)),l(e),m.align&&r.formatter.apply("align"+m.align,{},e),c(e),m.valign&&r.formatter.apply("valign"+m.valign,{},e)}),r.focus()})}var i,m,p,h=r.dom,g=[];if(g=r.dom.select("td.mce-item-selected,th.mce-item-selected"),i=r.dom.getParent(r.selection.getStart(),"td,th"),!g.length&&i&&g.push(i),i=i||g[0]){m={width:a(h.getStyle(i,"width")||h.getAttrib(i,"width")),height:a(h.getStyle(i,"height")||h.getAttrib(i,"height")),scope:h.getAttrib(i,"scope"),class:h.getAttrib(i,"class")},m.type=i.nodeName.toLowerCase(),n("left center right".split(" "),function(e){r.formatter.matchNode(i,"align"+e)&&(m.align=e)}),n("top middle bottom".split(" "),function(e){r.formatter.matchNode(i,"valign"+e)&&(m.valign=e)}),r.settings.table_cell_class_list&&(p={name:"class",type:"listbox",label:"Class",values:d(r.settings.table_cell_class_list,function(e){e.value&&(e.textStyle=function(){return r.formatter.getCssText({block:"td",classes:[e.value]})})})});var v={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},p]};r.settings.table_cell_adv_tab!==!1?(f(h,m,i),r.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:m,body:[{title:"General",type:"form",items:v},o(h)],onsubmit:t})):r.windowManager.open({title:"Cell properties",data:m,items:v,onsubmit:t})}},m.row=function(){function t(){var t,i,o;u(v,this),h=e.extend(h,this.toJSON()),r.undoManager.transact(function(){var e=h.type;n(y,function(n){r.dom.setAttribs(n,{scope:h.scope,style:h.style,class:h.class}),r.dom.setStyles(n,{height:s(h.height)}),e!=n.parentNode.nodeName.toLowerCase()&&(t=v.getParent(n,"table"),i=n.parentNode,o=v.select(e,t)[0],o||(o=v.create(e),t.firstChild?t.insertBefore(o,t.firstChild):t.appendChild(o)),o.appendChild(n),i.hasChildNodes()||v.remove(i)),l(n),h.align&&r.formatter.apply("align"+h.align,{},n)}),r.focus()})}var i,c,m,p,h,g,v=r.dom,y=[];i=r.dom.getParent(r.selection.getStart(),"table"),c=r.dom.getParent(r.selection.getStart(),"td,th"),n(i.rows,function(e){n(e.cells,function(t){return v.hasClass(t,"mce-item-selected")||t==c?(y.push(e),!1):void 0})}),m=y[0],m&&(h={height:a(v.getStyle(m,"height")||v.getAttrib(m,"height")),scope:v.getAttrib(m,"scope"),class:v.getAttrib(m,"class")},h.type=m.parentNode.nodeName.toLowerCase(),n("left center right".split(" "),function(e){r.formatter.matchNode(m,"align"+e)&&(h.align=e)}),r.settings.table_row_class_list&&(p={name:"class",type:"listbox",label:"Class",values:d(r.settings.table_row_class_list,function(e){e.value&&(e.textStyle=function(){return r.formatter.getCssText({block:"tr",classes:[e.value]})})})}),g={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"None",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},p]},r.settings.table_row_adv_tab!==!1?(f(v,h,m),r.windowManager.open({title:"Row properties",data:h,bodyType:"tabpanel",body:[{title:"General",type:"form",items:g},o(v)],onsubmit:t})):r.windowManager.open({title:"Row properties",data:h,body:g,onsubmit:t}))}}}),r(h,[s,d,f,p,l,m,c,g],function(e,t,n,r,i,o,a,s){function l(i){function o(e){return function(){i.execCommand(e)}}function s(e,t){var n,r,o,s;for(o='<table id="__mce"><tbody>',n=0;t>n;n++){for(o+="<tr>",r=0;e>r;r++)o+="<td>"+(a.ie?" ":"<br>")+"</td>";o+="</tr>"}return o+="</tbody></table>",i.undoManager.transact(function(){i.insertContent(o),s=i.dom.get("__mce"),i.dom.setAttrib(s,"id",null),i.dom.setAttribs(s,i.settings.table_default_attributes||{}),i.dom.setStyles(s,i.settings.table_default_styles||{})}),s}function l(e,t){function n(){e.disabled(!i.dom.getParent(i.selection.getStart(),t)),i.selection.selectorChanged(t,function(t){e.disabled(!t)})}i.initialized?n():i.on("init",n)}function d(){l(this,"table")}function u(){l(this,"td,th")}function f(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;10>t;t++){e+="<tr>";for(var n=0;10>n;n++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>';e+="</tr>"}return e+="</table>",e+='<div class="mce-text-center" role="presentation">1 x 1</div>'}function m(e,t,n){var r,o,a,s,l,c=n.getEl().getElementsByTagName("table")[0],d=n.isRtl()||"tl-tr"==n.parent().rel;for(c.nextSibling.innerHTML=e+1+" x "+(t+1),d&&(e=9-e),o=0;10>o;o++)for(r=0;10>r;r++)s=c.rows[o].childNodes[r].firstChild,l=(d?r>=e:e>=r)&&t>=o,i.dom.toggleClass(s,"mce-active",l),l&&(a=s);return a.parentNode}var p,h=this,g=new r(i);i.settings.table_grid===!1?i.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",onclick:g.table}):i.addMenuItem("inserttable",{text:"Insert table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),g.table())},onshow:function(){m(0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");i.dom.removeClass(e,"mce-active"),i.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:f(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var t,n,r=e.target;"A"==r.tagName.toUpperCase()&&(t=parseInt(r.getAttribute("data-mce-x"),10),n=parseInt(r.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(t=9-t),(t!==this.lastX||n!==this.lastY)&&(m(t,n,e.control),this.lastX=t,this.lastY=n))},onclick:function(e){var t=this;"A"==e.target.tagName.toUpperCase()&&(e.preventDefault(),e.stopPropagation(),t.parent().cancel(),i.undoManager.transact(function(){s(t.lastX+1,t.lastY+1)}),i.addVisual())}}]}),i.addMenuItem("tableprops",{text:"Table properties",context:"table",onPostRender:d,onclick:g.tableProps}),i.addMenuItem("deletetable",{text:"Delete table",context:"table",onPostRender:d,cmd:"mceTableDelete"}),i.addMenuItem("cell",{separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:o("mceTableCellProps"),onPostRender:u},{text:"Merge cells",onclick:o("mceTableMergeCells"),onPostRender:u},{text:"Split cell",onclick:o("mceTableSplitCells"),onPostRender:u}]}),i.addMenuItem("row",{text:"Row",context:"table",menu:[{text:"Insert row before",onclick:o("mceTableInsertRowBefore"),onPostRender:u},{text:"Insert row after",onclick:o("mceTableInsertRowAfter"),onPostRender:u},{text:"Delete row",onclick:o("mceTableDeleteRow"),onPostRender:u},{text:"Row properties",onclick:o("mceTableRowProps"),onPostRender:u},{text:"-"},{text:"Cut row",onclick:o("mceTableCutRow"),onPostRender:u},{text:"Copy row",onclick:o("mceTableCopyRow"),onPostRender:u},{text:"Paste row before",onclick:o("mceTablePasteRowBefore"),onPostRender:u},{text:"Paste row after",onclick:o("mceTablePasteRowAfter"),onPostRender:u}]}),i.addMenuItem("column",{text:"Column",context:"table",menu:[{text:"Insert column before",onclick:o("mceTableInsertColBefore"),onPostRender:u},{text:"Insert column after",onclick:o("mceTableInsertColAfter"),onPostRender:u},{text:"Delete column",onclick:o("mceTableDeleteCol"),onPostRender:u}]});var v=[];c("inserttable tableprops deletetable | cell row column".split(" "),function(e){v.push("|"==e?{text:"-"}:i.menuItems[e])}),i.addButton("table",{type:"menubutton",title:"Table",menu:v}),a.isIE||i.on("click",function(e){e=e.target,"TABLE"===e.nodeName&&(i.selection.select(e),i.nodeChanged())}),h.quirks=new t(i),i.on("Init",function(){h.cellSelection=new n(i)}),c({mceTableSplitCells:function(e){e.split()},mceTableMergeCells:function(e){var t;t=i.dom.getParent(i.selection.getStart(),"th,td"),i.dom.select("td.mce-item-selected,th.mce-item-selected").length?e.merge():g.merge(e,t)},mceTableInsertRowBefore:function(e){e.insertRow(!0)},mceTableInsertRowAfter:function(e){e.insertRow()},mceTableInsertColBefore:function(e){e.insertCol(!0)},mceTableInsertColAfter:function(e){e.insertCol()},mceTableDeleteCol:function(e){e.deleteCols()},mceTableDeleteRow:function(e){e.deleteRows()},mceTableCutRow:function(e){p=e.cutRows()},mceTableCopyRow:function(e){p=e.copyRows()},mceTablePasteRowBefore:function(e){e.pasteRows(p,!0)},mceTablePasteRowAfter:function(e){e.pasteRows(p)},mceTableDelete:function(e){e.deleteTable()}},function(t,n){i.addCommand(n,function(){var n=new e(i);n&&(t(n),i.execCommand("mceRepaint"),h.cellSelection.clear())})}),c({mceInsertTable:g.table,mceTableProps:function(){g.table(!0)},mceTableRowProps:g.row,mceTableCellProps:g.cell},function(e,t){i.addCommand(t,function(t,n){e(n)})}),i.settings.table_tab_navigation!==!1&&i.on("keydown",function(t){var n,r,o;9==t.keyCode&&(n=i.dom.getParent(i.selection.getStart(),"th,td"),n&&(t.preventDefault(),r=new e(i),o=t.shiftKey?-1:1,i.undoManager.transact(function(){!r.moveRelIdx(n,o)&&o>0&&(r.insertRow(),r.refresh(),r.moveRelIdx(n,o))})))}),h.insertTable=s}var c=i.each;s.add("table",l)}),o([])}(this),tinymce.PluginManager.add("template",function(e){function t(t){return function(){var n=e.settings.templates;"string"==typeof n?tinymce.util.XHR.send({url:n,success:function(e){t(tinymce.util.JSON.parse(e))}}):t(n)}}function n(t){function n(t){function n(t){if(-1==t.indexOf("<html>")){var n="";tinymce.each(e.contentCSS,function(t){n+='<link type="text/css" rel="stylesheet" href="'+e.documentBaseURI.toAbsolute(t)+'">'}),t="<!DOCTYPE html><html><head>"+n+"</head><body>"+t+"</body></html>"}t=o(t,"template_preview_replace_values");var i=r.find("iframe")[0].getEl().contentWindow.document;i.open(),i.write(t),i.close()}var a=t.control.value();a.url?tinymce.util.XHR.send({url:a.url,success:function(e){i=e,n(i)}}):(i=a.content,n(i)),r.find("#description")[0].text(t.control.value().description)}var r,i,s=[];return t&&0!==t.length?(tinymce.each(t,function(e){s.push({selected:!s.length,text:e.title,value:{url:e.url,content:e.content,description:e.description}})}),r=e.windowManager.open({title:"Insert template",layout:"flex",direction:"column",align:"stretch",padding:15,spacing:10,items:[{type:"form",flex:0,padding:0,items:[{type:"container",label:"Templates",items:{type:"listbox",label:"Templates",name:"template",values:s,onselect:n}}]},{type:"label",name:"description",label:"Description",text:" "},{type:"iframe",flex:1,border:1}],onsubmit:function(){a(!1,i)},width:e.getParam("template_popup_width",600),height:e.getParam("template_popup_height",500)}),void r.find("listbox")[0].fire("select")):void e.windowManager.alert("No templates defined")}function r(t,n){function r(e,t){if(e=""+e,e.length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e}var i="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),o="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),a="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),s="January February March April May June July August September October November December".split(" ");return n=n||new Date,t=t.replace("%D","%m/%d/%Y"),t=t.replace("%r","%I:%M:%S %p"),t=t.replace("%Y",""+n.getFullYear()),t=t.replace("%y",""+n.getYear()),t=t.replace("%m",r(n.getMonth()+1,2)),t=t.replace("%d",r(n.getDate(),2)),t=t.replace("%H",""+r(n.getHours(),2)),t=t.replace("%M",""+r(n.getMinutes(),2)),t=t.replace("%S",""+r(n.getSeconds(),2)),t=t.replace("%I",""+((n.getHours()+11)%12+1)),t=t.replace("%p",""+(n.getHours()<12?"AM":"PM")),t=t.replace("%B",""+e.translate(s[n.getMonth()])),t=t.replace("%b",""+e.translate(a[n.getMonth()])),t=t.replace("%A",""+e.translate(o[n.getDay()])),t=t.replace("%a",""+e.translate(i[n.getDay()])),t=t.replace("%%","%")}function i(t){var n=e.dom,r=e.getParam("template_replace_values");s(n.select("*",t),function(e){s(r,function(t,i){n.hasClass(e,i)&&"function"==typeof r[i]&&r[i](e)})})}function o(t,n){return s(e.getParam(n),function(e,n){"function"!=typeof e&&(t=t.replace(new RegExp("\\{\\$"+n+"\\}","g"),e))}),t}function a(t,n){function a(e,t){return new RegExp("\\b"+t+"\\b","g").test(e.className)}var l,c,d=e.dom,u=e.selection.getContent();n=o(n,"template_replace_values"),l=d.create("div",null,n),c=d.select(".mceTmpl",l),c&&c.length>0&&(l=d.create("div",null),l.appendChild(c[0].cloneNode(!0))),s(d.select("*",l),function(t){a(t,e.getParam("template_cdate_classes","cdate").replace(/\s+/g,"|"))&&(t.innerHTML=r(e.getParam("template_cdate_format",e.getLang("template.cdate_format")))),a(t,e.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(t.innerHTML=r(e.getParam("template_mdate_format",e.getLang("template.mdate_format")))),a(t,e.getParam("template_selected_content_classes","selcontent").replace(/\s+/g,"|"))&&(t.innerHTML=u)}),i(l),e.execCommand("mceInsertContent",!1,l.innerHTML),e.addVisual()}var s=tinymce.each;e.addCommand("mceInsertTemplate",a),e.addButton("template",{title:"Insert template",onclick:t(n)}),e.addMenuItem("template",{text:"Insert template",onclick:t(n),context:"insert"}),e.on("PreProcess",function(t){var n=e.dom;s(n.select("div",t.node),function(t){n.hasClass(t,"mceTmpl")&&(s(n.select("*",t),function(t){n.hasClass(t,e.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(t.innerHTML=r(e.getParam("template_mdate_format",e.getLang("template.mdate_format"))))}),i(t))})})}),tinymce.PluginManager.add("textcolor",function(e){function t(t){var n;return e.dom.getParents(e.selection.getStart(),function(e){var r;(r=e.style["forecolor"==t?"color":"background-color"])&&(n=r)}),n}function n(){var t,n,r=[];for(n=e.settings.textcolor_map||["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],t=0;t<n.length;t+=2)r.push({text:n[t+1],color:"#"+n[t]});return r}function r(){function t(e,t){var n="transparent"==e;return'<td class="mce-grid-cell'+(n?" mce-colorbtn-trans":"")+'"><div id="'+m+"-"+p++ +'" data-mce-color="'+(e?e:"")+'" role="option" tabIndex="-1" style="'+(e?"background-color: "+e:"")+'" title="'+tinymce.translate(t)+'">'+(n?"&#215;":"")+"</div></td>"}var r,i,o,a,s,d,u,f=this,m=f._id,p=0;for(r=n(),r.push({text:tinymce.translate("No color"),color:"transparent"}),o='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',a=r.length-1,d=0;c>d;d++){for(o+="<tr>",s=0;l>s;s++)u=d*l+s,u>a?o+="<td></td>":(i=r[u],o+=t(i.color,i.text));o+="</tr>"}if(e.settings.color_picker_callback){for(o+='<tr><td colspan="'+l+'" class="mce-custom-color-btn"><div id="'+m+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+m+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+tinymce.translate("Custom...")+"</button></div></td></tr>",o+="<tr>",s=0;l>s;s++)o+=t("","Custom color");o+="</tr>"}return o+="</tbody></table>"}function i(t,n){e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()}function o(t){e.focus(),e.formatter.remove(t,{value:null},null,!0),e.nodeChanged()}function a(n){function r(e){c.hidePanel(),c.color(e),i(c.settings.format,e)}function a(e,t){e.style.background=t,e.setAttribute("data-mce-color",t)}var s,c=this.parent();if(tinymce.DOM.getParent(n.target,".mce-custom-color-btn")&&(c.hidePanel(),e.settings.color_picker_callback.call(e,function(e){var t,n,i,o=c.panel.getEl().getElementsByTagName("table")[0];for(t=tinymce.map(o.rows[o.rows.length-1].childNodes,function(e){return e.firstChild}),i=0;i<t.length&&(n=t[i],n.getAttribute("data-mce-color"));i++);if(i==l)for(i=0;l-1>i;i++)a(t[i],t[i+1].getAttribute("data-mce-color"));a(n,e),r(e)},t(c.settings.format))),s=n.target.getAttribute("data-mce-color")){if(this.lastId&&document.getElementById(this.lastId).setAttribute("aria-selected",!1),n.target.setAttribute("aria-selected",!0),this.lastId=n.target.id,"transparent"==s)return o(c.settings.format),void c.hidePanel();r(s)}else null!==s&&c.hidePanel()}function s(){var e=this;e._color&&i(e.settings.format,e._color)}var l,c;c=e.settings.textcolor_rows||5,l=e.settings.textcolor_cols||8,e.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:r,onclick:a},onclick:s}),e.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:r,onclick:a},onclick:s})}),tinymce.PluginManager.add("textpattern",function(e){function t(){return c&&(l.sort(function(e,t){return e.start.length>t.start.length?-1:e.start.length<t.start.length?1:0}),c=!1),l}function n(e){for(var n=t(),r=0;r<n.length;r++)if(0===e.indexOf(n[r].start)&&(!n[r].end||e.lastIndexOf(n[r].end)==e.length-n[r].end.length))return n[r]}function r(e,n,r){var i,o,a;for(i=t(),a=0;a<i.length;a++)if(o=i[a],o.end&&e.substr(n-o.end.length-r,o.end.length)==o.end)return o}function i(t){function i(){l=l.splitText(d),l.splitText(c-d-p),l.deleteData(0,m.start.length),l.deleteData(l.data.length-m.end.length,m.end.length)}var o,a,s,l,c,d,u,f,m,p,h;return o=e.selection,a=e.dom,o.isCollapsed()&&(s=o.getRng(!0),l=s.startContainer,c=s.startOffset,u=l.data,p=t?1:0,3==l.nodeType&&(m=r(u,c,p),m&&(d=Math.max(0,c-p),d=u.lastIndexOf(m.start,d-m.end.length-1),-1!==d&&(f=a.createRng(),f.setStart(l,d),f.setEnd(l,c-p),m=n(f.toString()),m&&m.end&&!(l.data.length<=m.start.length+m.end.length)))))?(h=e.formatter.get(m.format),h&&h[0].inline?(i(),e.formatter.apply(m.format,{},l),l):void 0):void 0}function o(){var t,r,i,o,a,s,l,c,d,u,f;if(t=e.selection,r=e.dom,t.isCollapsed()&&(l=r.getParent(t.getStart(),"p"))){for(d=new tinymce.dom.TreeWalker(l,l);a=d.next();)if(3==a.nodeType){o=a;break}if(o){if(c=n(o.data),!c)return;if(u=t.getRng(!0),i=u.startContainer,f=u.startOffset,o==i&&(f=Math.max(0,f-c.start.length)),tinymce.trim(o.data).length==c.start.length)return;c.format&&(s=e.formatter.get(c.format),s&&s[0].block&&(o.deleteData(0,c.start.length),e.formatter.apply(c.format,{},o),u.setStart(i,f),u.collapse(!0),t.setRng(u))),c.cmd&&e.undoManager.transact(function(){o.deleteData(0,c.start.length),e.execCommand(c.cmd)})}}}function a(){var t,n;n=i(),n&&(t=e.dom.createRng(),t.setStart(n,n.data.length),t.setEnd(n,n.data.length),e.selection.setRng(t)),o()}function s(){var t,n,r,o,a;t=i(!0),t&&(a=e.dom,n=t.data.slice(-1),/[\u00a0 ]/.test(n)&&(t.deleteData(t.data.length-1,1),r=a.doc.createTextNode(n),t.nextSibling?a.insertAfter(r,t.nextSibling):t.parentNode.appendChild(r),o=a.createRng(),o.setStart(r,1),o.setEnd(r,1),e.selection.setRng(o)))}var l,c=!0;l=e.settings.textpattern_patterns||[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],e.on("keydown",function(e){13!=e.keyCode||tinymce.util.VK.modifierPressed(e)||a()},!0),e.on("keyup",function(e){32!=e.keyCode||tinymce.util.VK.modifierPressed(e)||s()}),this.getPatterns=t,this.setPatterns=function(e){l=e,c=!0}}),tinymce.PluginManager.add("visualblocks",function(e,t){function n(){var t=this;t.active(o),e.on("VisualBlocks",function(){t.active(e.dom.hasClass(e.getBody(),"mce-visualblocks"))})}var r,i,o;window.NodeList&&(e.addCommand("mceVisualBlocks",function(){var n,a=e.dom;r||(r=a.uniqueId(),n=a.create("link",{id:r,rel:"stylesheet",href:t+"/css/visualblocks.css"}),e.getDoc().getElementsByTagName("head")[0].appendChild(n)),e.on("PreviewFormats AfterPreviewFormats",function(t){o&&a.toggleClass(e.getBody(),"mce-visualblocks","afterpreviewformats"==t.type)}),a.toggleClass(e.getBody(),"mce-visualblocks"),o=e.dom.hasClass(e.getBody(),"mce-visualblocks"),i&&i.active(a.hasClass(e.getBody(),"mce-visualblocks")),e.fire("VisualBlocks")}),e.addButton("visualblocks",{title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:n}),e.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:n,selectable:!0,context:"view",prependToContext:!0}),e.on("init",function(){e.settings.visualblocks_default_state&&e.execCommand("mceVisualBlocks",!1,null,{skip_focus:!0})}),e.on("remove",function(){e.dom.removeClass(e.getBody(),"mce-visualblocks")}))}),tinymce.PluginManager.add("visualchars",function(e){function t(t){var n,o,a,s,l,c,d=e.getBody(),u=e.selection;if(r=!r,i.state=r,e.fire("VisualChars",{state:r}),t&&(c=u.getBookmark()),r)for(o=[],tinymce.walk(d,function(e){3==e.nodeType&&e.nodeValue&&-1!=e.nodeValue.indexOf(" ")&&o.push(e)},"childNodes"),a=0;a<o.length;a++){for(s=o[a].nodeValue,s=s.replace(/(\u00a0)/g,'<span data-mce-bogus="1" class="mce-nbsp">$1</span>'),l=e.dom.create("div",null,s);n=l.lastChild;)e.dom.insertAfter(n,o[a]);e.dom.remove(o[a])}else for(o=e.dom.select("span.mce-nbsp",d),a=o.length-1;a>=0;a--)e.dom.remove(o[a],1);u.moveToBookmark(c)}function n(){var t=this;e.on("VisualChars",function(e){t.active(e.state)})}var r,i=this;e.addCommand("mceVisualChars",t),e.addButton("visualchars",{title:"Show invisible characters",cmd:"mceVisualChars",onPostRender:n}),e.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:n,selectable:!0,context:"view",prependToContext:!0}),e.on("beforegetcontent",function(e){r&&"raw"!=e.format&&!e.draft&&(r=!0,t(!1))})}),tinymce.PluginManager.add("wordcount",function(e){function t(){e.theme.panel.find("#wordcount").text(["Words: {0}",i.getCount()])}var n,r,i=this;n=e.getParam("wordcount_countregex",/[\w\u2019\x27\-\u00C0-\u1FFF]+/g),r=e.getParam("wordcount_cleanregex",/[0-9.(),;:!?%#$?\x27\x22_+=\\\/\-]*/g),e.on("init",function(){var n=e.theme.panel&&e.theme.panel.find("#statusbar")[0];n&&window.setTimeout(function(){n.insert({type:"label",name:"wordcount",text:["Words: {0}",i.getCount()],classes:"wordcount",disabled:e.settings.readonly},0),e.on("setcontent beforeaddundo",t),e.on("keyup",function(e){32==e.keyCode&&t()})},0)}),i.getCount=function(){var t=e.getContent({format:"raw"}),i=0;if(t){t=t.replace(/\.\.\./g," "),t=t.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," "),t=t.replace(/(\w+)(&#?[a-z0-9]+;)+(\w+)/i,"$1$3").replace(/&.+?;/g," "),t=t.replace(r,"");var o=t.match(n);o&&(i=o.length)}return i}}),tinymce.ThemeManager.add("modern",function(e){function t(){function t(t){var r,i=[];if(t)return u(t.split(/[ ,]/),function(t){function n(){var n=e.selection;"bullist"==o&&n.selectorChanged("ul > li",function(e,n){for(var r,i=n.parents.length;i--&&(r=n.parents[i].nodeName,"OL"!=r&&"UL"!=r););t.active(e&&"UL"==r)}),"numlist"==o&&n.selectorChanged("ol > li",function(e,n){for(var r,i=n.parents.length;i--&&(r=n.parents[i].nodeName,"OL"!=r&&"UL"!=r););t.active(e&&"OL"==r)}),t.settings.stateSelector&&n.selectorChanged(t.settings.stateSelector,function(e){t.active(e)},!0),t.settings.disabledStateSelector&&n.selectorChanged(t.settings.disabledStateSelector,function(e){t.disabled(e)})}var o;"|"==t?r=null:d.has(t)?(t={type:t},c.toolbar_items_size&&(t.size=c.toolbar_items_size),i.push(t),r=null):(r||(r={type:"buttongroup",items:[]},i.push(r)),e.buttons[t]&&(o=t,t=e.buttons[o],"function"==typeof t&&(t=t()),t.type=t.type||"button",c.toolbar_items_size&&(t.size=c.toolbar_items_size),t=d.create(t),r.items.push(t),e.initialized?n():e.on("init",n)))}),n.push({type:"toolbar",layout:"flow",items:i}),!0}var n=[];if(tinymce.isArray(c.toolbar)){if(0===c.toolbar.length)return;tinymce.each(c.toolbar,function(e,t){c["toolbar"+(t+1)]=e}),delete c.toolbar}for(var r=1;10>r&&t(c["toolbar"+r]);r++);return n.length||c.toolbar===!1||t(c.toolbar||p),n.length?{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:n}:void 0}function n(){function t(t){var n;return"|"==t?{text:"|"}:n=e.menuItems[t]}function n(n){var r,i,o,a,s;if(s=tinymce.makeMap((c.removed_menuitems||"").split(/[ ,]/)),c.menu?(i=c.menu[n],a=!0):i=m[n],i){r={text:i.title},o=[],u((i.items||"").split(/[ ,]/),function(e){var n=t(e);n&&!s[e]&&o.push(t(e))}),a||u(e.menuItems,function(e){e.context==n&&("before"==e.separator&&o.push({text:"|"}),e.prependToContext?o.unshift(e):o.push(e),"after"==e.separator&&o.push({text:"|"}))});for(var l=0;l<o.length;l++)"|"==o[l].text&&(0===l||l==o.length-1)&&o.splice(l,1);if(r.menu=o,!r.menu.length)return null}return r}var r,i=[],o=[];if(c.menu)for(r in c.menu)o.push(r);else for(r in m)o.push(r);for(var a="string"==typeof c.menubar?c.menubar.split(/[ ,]/):o,s=0;s<a.length;s++){var l=a[s];l=n(l),l&&i.push(l)}return i}function r(t){function n(e){var n=t.find(e)[0];n&&n.focus(!0)}e.shortcuts.add("Alt+F9","",function(){n("menubar")}),e.shortcuts.add("Alt+F10","",function(){n("toolbar")}),e.shortcuts.add("Alt+F11","",function(){n("elementpath")}),t.on("cancel",function(){e.focus()})}function i(t,n){function r(e){return{width:e.clientWidth,height:e.clientHeight}}var i,o,a,s;i=e.getContainer(),o=e.getContentAreaContainer().firstChild,a=r(i),s=r(o),null!==t&&(t=Math.max(c.min_width||100,t),t=Math.min(c.max_width||65535,t),f.setStyles(i,"width",t+(a.width-s.width)),f.setStyles(o,"width",t)),n=Math.max(c.min_height||100,n),n=Math.min(c.max_height||65535,n),f.setStyles(o,"height",n),e.fire("ResizeEditor")}function o(t,n){var r=e.getContentAreaContainer();l.resizeTo(r.clientWidth+t,r.clientHeight+n)}function a(i){function o(){if(m&&m.moveRel&&m.visible()&&!m._fixed){var t=e.selection.getScrollContainer(),n=e.getBody(),r=0,i=0;if(t){var o=f.getPos(n),a=f.getPos(t);r=Math.max(0,a.x-o.x),i=Math.max(0,a.y-o.y)}m.fixed(!1).moveRel(n,e.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(r,i)}}function a(){m&&(m.show(),o(),f.addClass(e.getBody(),"mce-edit-focus"))}function s(){m&&(m.hide(),f.removeClass(e.getBody(),"mce-edit-focus"))}function u(){return m?void(m.visible()||a()):(m=l.panel=d.create({type:p?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!!p,border:1,items:[c.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:n()},t()]}),e.fire("BeforeRenderUI"),m.renderTo(p||document.body).reflow(),r(m),a(),e.on("nodeChange",o),e.on("activate",a),e.on("deactivate",s),void e.nodeChanged())}var m,p;return c.fixed_toolbar_container&&(p=f.select(c.fixed_toolbar_container)[0]),c.content_editable=!0,e.on("focus",function(){i.skinUiCss?tinymce.DOM.styleSheetLoader.load(i.skinUiCss,u,u):u()}),e.on("blur hide",s),e.on("remove",function(){m&&(m.remove(),m=null)}),i.skinUiCss&&tinymce.DOM.styleSheetLoader.load(i.skinUiCss),{}}function s(o){var a,s,u;return o.skinUiCss&&tinymce.DOM.loadCSS(o.skinUiCss),a=l.panel=d.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",
layout:"stack",border:1,items:[c.menubar===!1?null:{type:"menubar",border:"0 0 1 0",items:n()},t(),{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",html:"",border:"1 0 0 0"}]}),c.resize!==!1&&(s={type:"resizehandle",direction:c.resize,onResizeStart:function(){var t=e.getContentAreaContainer().firstChild;u={width:t.clientWidth,height:t.clientHeight}},onResize:function(e){"both"==c.resize?i(u.width+e.deltaX,u.height+e.deltaY):i(null,u.height+e.deltaY)}}),c.statusbar!==!1&&a.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath"},s]}),c.readonly&&a.find("*").disabled(!0),e.fire("BeforeRenderUI"),a.renderBefore(o.targetNode).reflow(),c.width&&tinymce.DOM.setStyle(a.getEl(),"width",c.width),e.on("remove",function(){a.remove(),a=null}),r(a),{iframeContainer:a.find("#iframe")[0].getEl(),editorContainer:a.getEl()}}var l=this,c=e.settings,d=tinymce.ui.Factory,u=tinymce.each,f=tinymce.DOM,m={file:{title:"File",items:"newdocument"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},insert:{title:"Insert",items:"|"},view:{title:"View",items:"visualaid |"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript | formats | removeformat"},table:{title:"Table"},tools:{title:"Tools"}},p="undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image";l.renderUI=function(t){var n=c.skin!==!1&&(c.skin||"lightgray");if(n){var r=c.skin_url;r=r?e.documentBaseURI.toAbsolute(r):tinymce.baseURL+"/skins/"+n,t.skinUiCss=tinymce.Env.documentMode<=7?r+"/skin.ie7.min.css":r+"/skin.min.css",e.contentCSS.push(r+"/content"+(e.inline?".inline":"")+".min.css")}return e.on("ProgressState",function(e){l.throbber=l.throbber||new tinymce.ui.Throbber(l.panel.getEl("body")),e.state?l.throbber.show(e.time):l.throbber.hide()}),c.inline?a(t):s(t)},l.resizeTo=i,l.resizeBy=o});