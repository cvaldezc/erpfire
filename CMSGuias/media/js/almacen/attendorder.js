$(document).ready(function(){$("[name=bedside]").change(function(e){if(e.preventDefault(),this.checked)for(var t=document.getElementsByName("bed"),a=0;a<t.length;a++)t[a].checked="true"==this.value,$(".bed"+t[a].value).attr("disabled",!t[a].checked),$("[name="+t[a].value+"]").attr("disabled",!t[a].checked),$("[name=sc"+t[a].value+"]").attr("disabled",!t[a].checked),checkeded(String("sc"+t[a].value).valueOf(),!!t[a].checked)}),$("input[name=bed]").change(function(){$(".bed"+this.value).attr("disabled",!$(this).is(":checked")),$("[name="+this.value+"]").attr("disabled",!$(this).is(":checked")),$("[name=sc"+this.value+"]").attr("disabled",!$(this).is(":checked")),checkeded(String("sc"+this.value).valueOf(),!!$(this).is(":checked"))}),$(".btn-attend").click(function(e){e.preventDefault(),$().toastmessage("showToast",{type:"confirm",sticky:!0,text:"Atender el pedido y generar un documento de salida de almacÃ©n. Deseas atender el pedido?",buttons:[{value:"Si"},{value:"No"}],success:function(e){"Si"==e&&attendOrders()}})}),setTimeout(function(){$("input[name=bed]").each(function(){if(this.disabled)return $("input[name=bedside]").attr("disabled",!0),!0})},600)});var changeradio=function(e){var t=e;if(t.checked)for(var a=document.getElementsByName("sc"+t.name),n=0;n<a.length;n++)a[n].checked="true"==t.value,$(".n"+a[n].value).attr("disabled",!a[n].checked)},checkeded=function(e,t){for(var a=document.getElementsByName(e.substr(2)),n=0;n<a.length;n++)a[n].value!=String(t).valueOf()||a[n].checked||(a[n].checked=!0);for(var s=document.getElementsByName(e),n=0;n<s.length;n++)s[n].checked=t,$(".n"+s[n].value).attr("disabled",!t)},enablenquantitynip=function(e){$(".n"+e.value).attr("disabled",!e.checked),recoverVal(e.name.substring(2))},recoverVal=function(e){var t,a=0;$("[name=sc"+e+"]").each(function(){this.checked&&(t=$(".n"+this.value),a+=parseFloat(t.val())*parseFloat(t.attr("id")))}),$(".bed"+e).val(a/100)},attendOrders=function(){var e=!1,t=0,a=0,n=0,s=new Array;if($("[name=bed]").each(function(){this.checked&&(t+=1,"115"==this.value.substr(0,3)&&(n+=1,s.push(this.value)))}),$(".chknip").each(function(){a+=this.checked?1:0}),!(t>0))return $().toastmessage("showWarningToast","No se han seleccionado materiales para atender."),e=!1,!1;if(n>0){if(!(a>0))return $().toastmessage("showWarningToast","Existe tuberia seleccionada pero no se han seleccionado niples."),e=!1,!1;e=!0;for(var i=0;i<s.length;i++){var c=0;if($("[name=sc"+s[i]+"]").each(function(){this.checked&&c++}),e=c>0,!e)return $().toastmessage("showWarningToast","Hay niples sin seleccionar"),e}}if(e=!0){var d=new Object,r=new Array,o=new Array;$("[name=bed]").each(function(){this.checked&&r.push({matid:this.value,quantityshop:$(".bed"+this.value).val(),quantity:$(".bed"+this.value).attr("name")})}),$(".chknip").each(function(){this.checked&&o.push({nid:this.value,matid:$(".n"+this.value).attr("title"),quantityshop:$(".n"+this.value).val(),quantity:$(".n"+this.value).attr("name"),meter:$(".n"+this.value).attr("id")})}),d.materials=JSON.stringify(r),d.nipples=JSON.stringify(o),d.csrfmiddlewaretoken=$("[name=csrfmiddlewaretoken]").val(),d.oid=$(".oid").val(),console.info(d),$.post("",d,function(e){console.warn(e),e.status?location.href="/almacen/generate/"+$(".oid").val()+"/document/out/":$().toastmessage("showErrorToast","Transaction not found")})}else $().toastmessage("showErrorToast","Transaction incorrect!")};